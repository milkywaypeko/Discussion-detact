[{
  "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191",
  "repository_url": "https://api.github.com/repos/tensorflow/tensorflow",
  "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191/labels{/name}",
  "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191/comments",
  "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191/events",
  "html_url": "https://github.com/tensorflow/tensorflow/issues/8191",
  "id": 212690293,
  "node_id": "MDU6SXNzdWUyMTI2OTAyOTM=",
  "number": 8191,
  "title": "ValueError: Attempt to reuse RNNCell with a different variable scope than its first use.",
  "user": {
    "login": "doncat99",
    "id": 4565981,
    "node_id": "MDQ6VXNlcjQ1NjU5ODE=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/4565981?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/doncat99",
    "html_url": "https://github.com/doncat99",
    "followers_url": "https://api.github.com/users/doncat99/followers",
    "following_url": "https://api.github.com/users/doncat99/following{/other_user}",
    "gists_url": "https://api.github.com/users/doncat99/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/doncat99/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/doncat99/subscriptions",
    "organizations_url": "https://api.github.com/users/doncat99/orgs",
    "repos_url": "https://api.github.com/users/doncat99/repos",
    "events_url": "https://api.github.com/users/doncat99/events{/privacy}",
    "received_events_url": "https://api.github.com/users/doncat99/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 404586594,
      "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower",
      "name": "stat:awaiting tensorflower",
      "color": "f4b400",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 102,
  "created_at": "2017-03-08T10:06:12Z",
  "updated_at": "2018-04-13T08:28:21Z",
  "closed_at": "2018-01-05T19:32:31Z",
  "author_association": "NONE",
  "body": "I am not sure if I am the first who met the following error:\r\n\r\nValueError: Attempt to reuse RNNCell <tensorflow.contrib.rnn.python.ops.core_rnn_cell_impl.BasicLSTMCell object at 0x10210d5c0> with a different variable scope than its first use.  First use of cell was with scope 'rnn/multi_rnn_cell/cell_0/basic_lstm_cell', this attempt is with scope 'rnn/multi_rnn_cell/cell_1/basic_lstm_cell'.  Please create a new instance of the cell if you would like it to use a different set of weights.  If before you were using: MultiRNNCell([BasicLSTMCell(...)] * num_layers), change to: MultiRNNCell([BasicLSTMCell(...) for _ in range(num_layers)]).  If before you were using the same cell instance as both the forward and reverse cell of a bidirectional RNN, simply create two instances (one for forward, one for reverse).  In May 2017, we will start transitioning this cell's behavior to use existing stored weights, if any, when it is called with scope=None (which can lead to silent model degradation, so this error will remain until then.)\r\n\r\nwith the code fragment:\r\n\r\n      import tensorflow as tf\r\n      from tensorflow.contrib import rnn\r\n\r\n      hidden_size = 100\r\n      batch_size  = 100\r\n      num_steps   = 100\r\n      num_layers  = 100\r\n      is_training = True\r\n      keep_prob   = 0.4\r\n\r\n      input_data = tf.placeholder(tf.float32, [batch_size, num_steps])\r\n      lstm_cell = rnn.BasicLSTMCell(hidden_size, forget_bias=0.0, state_is_tuple=True)\r\n\r\n      if is_training and keep_prob < 1:\r\n          lstm_cell = rnn.DropoutWrapper(lstm_cell)\r\n      cell = rnn.MultiRNNCell([lstm_cell for _ in range(num_layers)], state_is_tuple=True)\r\n\r\n      _initial_state = cell.zero_state(batch_size, tf.float32)\r\n\r\n      iw = tf.get_variable(\"input_w\", [1, hidden_size])\r\n      ib = tf.get_variable(\"input_b\", [hidden_size])\r\n      inputs = [tf.nn.xw_plus_b(i_, iw, ib) for i_ in tf.split(input_data, num_steps, 1)]\r\n\r\n      if is_training and keep_prob < 1:\r\n          inputs = [tf.nn.dropout(input_, keep_prob) for input_ in inputs]\r\n    \r\n      outputs, states = rnn.static_rnn(cell, inputs, initial_state=_initial_state)\r\n\r\nI had googled around with no luck, can anyone show me a way out?",
  "closed_by": {
    "login": "ebrevdo",
    "id": 1794715,
    "node_id": "MDQ6VXNlcjE3OTQ3MTU=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ebrevdo",
    "html_url": "https://github.com/ebrevdo",
    "followers_url": "https://api.github.com/users/ebrevdo/followers",
    "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}",
    "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions",
    "organizations_url": "https://api.github.com/users/ebrevdo/orgs",
    "repos_url": "https://api.github.com/users/ebrevdo/repos",
    "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ebrevdo/received_events",
    "type": "User",
    "site_admin": false
  }
},{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285015625", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285015625", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 285015625, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTAxNTYyNQ==", "user": {"login": "Wojova", "id": 18679108, "node_id": "MDQ6VXNlcjE4Njc5MTA4", "avatar_url": "https://avatars2.githubusercontent.com/u/18679108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Wojova", "html_url": "https://github.com/Wojova", "followers_url": "https://api.github.com/users/Wojova/followers", "following_url": "https://api.github.com/users/Wojova/following{/other_user}", "gists_url": "https://api.github.com/users/Wojova/gists{/gist_id}", "starred_url": "https://api.github.com/users/Wojova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Wojova/subscriptions", "organizations_url": "https://api.github.com/users/Wojova/orgs", "repos_url": "https://api.github.com/users/Wojova/repos", "events_url": "https://api.github.com/users/Wojova/events{/privacy}", "received_events_url": "https://api.github.com/users/Wojova/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-08T11:20:20Z", "updated_at": "2017-03-08T11:20:20Z", "author_association": "NONE", "body": "I am getting the same error when trying to run the translate example (even when doing the small self test) which can be found here: https://github.com/tensorflow/models/tree/master/tutorials/rnn/translate"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285092629", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285092629", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 285092629, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTA5MjYyOQ==", "user": {"login": "tongda", "id": 653425, "node_id": "MDQ6VXNlcjY1MzQyNQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/653425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tongda", "html_url": "https://github.com/tongda", "followers_url": "https://api.github.com/users/tongda/followers", "following_url": "https://api.github.com/users/tongda/following{/other_user}", "gists_url": "https://api.github.com/users/tongda/gists{/gist_id}", "starred_url": "https://api.github.com/users/tongda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tongda/subscriptions", "organizations_url": "https://api.github.com/users/tongda/orgs", "repos_url": "https://api.github.com/users/tongda/repos", "events_url": "https://api.github.com/users/tongda/events{/privacy}", "received_events_url": "https://api.github.com/users/tongda/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-08T16:35:15Z", "updated_at": "2017-03-08T16:35:15Z", "author_association": "NONE", "body": "I met the same issue. If you are all using compiled version on master branch, I believe that we are the same issue caused by the [recent commit](https://github.com/tensorflow/tensorflow/commit/54d50ffec8df4f748694632dbe5ebde9971e2c9e). As the commit message says:\r\n\r\n> Make all RNNCells in tf.contrib.rnn act like tf.layers Layers, but with stricter semantics for no\r\nw:\r\n>\r\n>    1. Upon first use of __call__, the used scope is stored in the cell. The RNNCell tries to create weights in that scope but if some are already set, an error is raised unless the RNNCell was constructed with argument reuse=True.\r\n>\r\n>    2. A subsequent use of __call__ of the same cell instance must be in the same scope.\r\n>       If it is not, an error is raised.\r\n\r\nFrom my case, which is running the [ptb tutorial](https://github.com/tensorflow/models/tree/master/tutorials/rnn/ptb), the solution is just to add a parameter named with `reuse` like this at line 112:\r\n\r\n    def lstm_cell():\r\n      return tf.contrib.rnn.BasicLSTMCell(\r\n          size, forget_bias=0.0, state_is_tuple=True, reuse=tf.get_variable_scope().reuse)\r\n\r\nThen it works."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285111217", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285111217", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 285111217, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTExMTIxNw==", "user": {"login": "prb12", "id": 11547801, "node_id": "MDQ6VXNlcjExNTQ3ODAx", "avatar_url": "https://avatars1.githubusercontent.com/u/11547801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prb12", "html_url": "https://github.com/prb12", "followers_url": "https://api.github.com/users/prb12/followers", "following_url": "https://api.github.com/users/prb12/following{/other_user}", "gists_url": "https://api.github.com/users/prb12/gists{/gist_id}", "starred_url": "https://api.github.com/users/prb12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prb12/subscriptions", "organizations_url": "https://api.github.com/users/prb12/orgs", "repos_url": "https://api.github.com/users/prb12/repos", "events_url": "https://api.github.com/users/prb12/events{/privacy}", "received_events_url": "https://api.github.com/users/prb12/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-08T17:37:12Z", "updated_at": "2017-03-08T17:37:12Z", "author_association": "MEMBER", "body": "@ebrevdo Could you please take a look at this?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285209555", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285209555", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 285209555, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTIwOTU1NQ==", "user": {"login": "tomwanzek", "id": 16323903, "node_id": "MDQ6VXNlcjE2MzIzOTAz", "avatar_url": "https://avatars1.githubusercontent.com/u/16323903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomwanzek", "html_url": "https://github.com/tomwanzek", "followers_url": "https://api.github.com/users/tomwanzek/followers", "following_url": "https://api.github.com/users/tomwanzek/following{/other_user}", "gists_url": "https://api.github.com/users/tomwanzek/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomwanzek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomwanzek/subscriptions", "organizations_url": "https://api.github.com/users/tomwanzek/orgs", "repos_url": "https://api.github.com/users/tomwanzek/repos", "events_url": "https://api.github.com/users/tomwanzek/events{/privacy}", "received_events_url": "https://api.github.com/users/tomwanzek/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-08T23:56:29Z", "updated_at": "2017-03-08T23:56:29Z", "author_association": "NONE", "body": "The issue replicates for me when using the Windows/GPU build 105 on the [Shakespeare RNN Repo](https://github.com/martin-gorner/tensorflow-rnn-shakespeare).\r\n\r\nWhen running the code with the Win 1.0.0/GPU Release, there is no issue."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285221482", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285221482", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 285221482, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTIyMTQ4Mg==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-09T01:03:35Z", "updated_at": "2017-03-09T01:03:35Z", "author_association": "CONTRIBUTOR", "body": "That repo looks like it's targeted at tf 1.0, not intermediate releases.\n\nOn Mar 8, 2017 3:56 PM, \"Tom Wanzek\" <notifications@github.com> wrote:\n\n> The issue replicates for me when using the Windows/GPU build 105 on the Shakespeare\n> RNN Repo <https://github.com/martin-gorner/tensorflow-rnn-shakespeare>.\n>\n> When running the code with the Win 1.0.0/GPU Release, there is no issue.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285209555>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim5ansaL1KN51T4nCaqLnqw2QHN4Wks5rj0BBgaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285240438", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285240438", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 285240438, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTI0MDQzOA==", "user": {"login": "doncat99", "id": 4565981, "node_id": "MDQ6VXNlcjQ1NjU5ODE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4565981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doncat99", "html_url": "https://github.com/doncat99", "followers_url": "https://api.github.com/users/doncat99/followers", "following_url": "https://api.github.com/users/doncat99/following{/other_user}", "gists_url": "https://api.github.com/users/doncat99/gists{/gist_id}", "starred_url": "https://api.github.com/users/doncat99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doncat99/subscriptions", "organizations_url": "https://api.github.com/users/doncat99/orgs", "repos_url": "https://api.github.com/users/doncat99/repos", "events_url": "https://api.github.com/users/doncat99/events{/privacy}", "received_events_url": "https://api.github.com/users/doncat99/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-09T02:58:15Z", "updated_at": "2017-03-09T02:58:15Z", "author_association": "NONE", "body": "@tongda , I am using the Release Version of Tensorflow 1.0, working on MacOS in cpu mode. I will switch to the master branch to see if it work by adding the \"reuse\" parameter, thanks."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285245122", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285245122", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 285245122, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTI0NTEyMg==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-09T03:34:20Z", "updated_at": "2017-03-09T03:34:20Z", "author_association": "CONTRIBUTOR", "body": "doncat99: if you do, please ensure your code queries the tensorflow version\nand raises a flag if the version is lower than the master branch version.\n you may need to check against:\n\nfrom tensorflow.core import versions\nversions.GIT_VERSION\n\nOn Wed, Mar 8, 2017 at 6:58 PM, doncat99 <notifications@github.com> wrote:\n\n> @tongda <https://github.com/tongda> , I am using the Release Version of\n> Tensorflow 1.0, working on MacOS in cpu mode. I will switch to the master\n> branch to see if it work by adding the \"reuse\" parameter, thanks.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285240438>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim66cU9e16lgD-2D0QLGcQCiHbV0zks5rj2rbgaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285702372", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285702372", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 285702372, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTcwMjM3Mg==", "user": {"login": "tomwanzek", "id": 16323903, "node_id": "MDQ6VXNlcjE2MzIzOTAz", "avatar_url": "https://avatars1.githubusercontent.com/u/16323903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomwanzek", "html_url": "https://github.com/tomwanzek", "followers_url": "https://api.github.com/users/tomwanzek/followers", "following_url": "https://api.github.com/users/tomwanzek/following{/other_user}", "gists_url": "https://api.github.com/users/tomwanzek/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomwanzek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomwanzek/subscriptions", "organizations_url": "https://api.github.com/users/tomwanzek/orgs", "repos_url": "https://api.github.com/users/tomwanzek/repos", "events_url": "https://api.github.com/users/tomwanzek/events{/privacy}", "received_events_url": "https://api.github.com/users/tomwanzek/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-10T15:43:51Z", "updated_at": "2017-03-10T15:43:51Z", "author_association": "NONE", "body": "@ebrevdo So what would be the suggested changes to the Shakepeare RNN to allow it to work with the intermediate stable release?\r\n\r\nHere is the key architectural section of the code, which now fails with build#105:\r\n```python\r\n#\r\n# the model (see FAQ in README.md)\r\n#\r\nlr = tf.placeholder(tf.float32, name='lr')  # learning rate\r\npkeep = tf.placeholder(tf.float32, name='pkeep')  # dropout parameter\r\nbatchsize = tf.placeholder(tf.int32, name='batchsize')\r\n\r\n# inputs\r\nX = tf.placeholder(tf.uint8, [None, None], name='X')    # [ BATCHSIZE, SEQLEN ]\r\nXo = tf.one_hot(X, ALPHASIZE, 1.0, 0.0)                 # [ BATCHSIZE, SEQLEN, ALPHASIZE ]\r\n# expected outputs = same sequence shifted by 1 since we are trying to predict the next character\r\nY_ = tf.placeholder(tf.uint8, [None, None], name='Y_')  # [ BATCHSIZE, SEQLEN ]\r\nYo_ = tf.one_hot(Y_, ALPHASIZE, 1.0, 0.0)               # [ BATCHSIZE, SEQLEN, ALPHASIZE ]\r\n# input state\r\nHin = tf.placeholder(tf.float32, [None, INTERNALSIZE*NLAYERS], name='Hin')  # [ BATCHSIZE, INTERNALSIZE * NLAYERS]\r\n\r\n# using a NLAYERS=3 layers of GRU cells, unrolled SEQLEN=30 times\r\n# dynamic_rnn infers SEQLEN from the size of the inputs Xo\r\n\r\nonecell = rnn.GRUCell(INTERNALSIZE)\r\ndropcell = rnn.DropoutWrapper(onecell, input_keep_prob=pkeep)\r\nmulticell = rnn.MultiRNNCell([dropcell for _ in range(NLAYERS)], state_is_tuple=False)\r\nmulticell = rnn.DropoutWrapper(multicell, output_keep_prob=pkeep)\r\nYr, H = tf.nn.dynamic_rnn(multicell, Xo, dtype=tf.float32, initial_state=Hin)\r\n# Yr: [ BATCHSIZE, SEQLEN, INTERNALSIZE ]\r\n# H:  [ BATCHSIZE, INTERNALSIZE*NLAYERS ] # this is the last state in the sequence\r\n```\r\nI do not seem to find any documentation regarding a `reuse` flag?\r\n\r\nThanks in advance."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/286647614", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-286647614", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 286647614, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjY0NzYxNA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-15T05:51:03Z", "updated_at": "2017-03-15T05:51:03Z", "author_association": "CONTRIBUTOR", "body": "Use:\n\nmulticell = rnn.MultiRNNCell([rnn.DropoutWrapper(rnn.GRUCell(INTERNALSIZE),\ninput_keep_prob=pkeep) for _ in range(NLAYERS)], state_is_tuple=False)\n\n\nWhich creates a separate grucell object for each layer.\n\n\nOn Mar 10, 2017 7:44 AM, \"Tom Wanzek\" <notifications@github.com> wrote:\n\n> @ebrevdo <https://github.com/ebrevdo> So what would be the suggested\n> changes to the Shakepeare RNN to allow it to work with the intermediate\n> stable release?\n>\n> Here is the key architectural section of the code, which now fails with\n> build#105:\n>\n> ## the model (see FAQ in README.md)#\n> lr = tf.placeholder(tf.float32, name='lr')  # learning rate\n> pkeep = tf.placeholder(tf.float32, name='pkeep')  # dropout parameter\n> batchsize = tf.placeholder(tf.int32, name='batchsize')\n> # inputs\n> X = tf.placeholder(tf.uint8, [None, None], name='X')    # [ BATCHSIZE, SEQLEN ]\n> Xo = tf.one_hot(X, ALPHASIZE, 1.0, 0.0)                 # [ BATCHSIZE, SEQLEN, ALPHASIZE ]# expected outputs = same sequence shifted by 1 since we are trying to predict the next character\n> Y_ = tf.placeholder(tf.uint8, [None, None], name='Y_')  # [ BATCHSIZE, SEQLEN ]\n> Yo_ = tf.one_hot(Y_, ALPHASIZE, 1.0, 0.0)               # [ BATCHSIZE, SEQLEN, ALPHASIZE ]# input state\n> Hin = tf.placeholder(tf.float32, [None, INTERNALSIZE*NLAYERS], name='Hin')  # [ BATCHSIZE, INTERNALSIZE * NLAYERS]\n> # using a NLAYERS=3 layers of GRU cells, unrolled SEQLEN=30 times# dynamic_rnn infers SEQLEN from the size of the inputs Xo\n>\n> onecell = rnn.GRUCell(INTERNALSIZE)\n> dropcell = rnn.DropoutWrapper(onecell, input_keep_prob=pkeep)\n> multicell = rnn.MultiRNNCell([dropcell for _ in range(NLAYERS)], state_is_tuple=False)\n> multicell = rnn.DropoutWrapper(multicell, output_keep_prob=pkeep)\n> Yr, H = tf.nn.dynamic_rnn(multicell, Xo, dtype=tf.float32, initial_state=Hin)# Yr: [ BATCHSIZE, SEQLEN, INTERNALSIZE ]# H:  [ BATCHSIZE, INTERNALSIZE*NLAYERS ] # this is the last state in the sequence\n>\n> I do not seem to find any documentation regarding a reuse flag?\n>\n> Thanks in advance.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-285702372>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim6MOOCbx3RJEJe8PQBDXGVIXTGPmks5rkW_jgaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/286758168", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-286758168", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 286758168, "node_id": "MDEyOklzc3VlQ29tbWVudDI4Njc1ODE2OA==", "user": {"login": "BSVogler", "id": 801818, "node_id": "MDQ6VXNlcjgwMTgxOA==", "avatar_url": "https://avatars2.githubusercontent.com/u/801818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BSVogler", "html_url": "https://github.com/BSVogler", "followers_url": "https://api.github.com/users/BSVogler/followers", "following_url": "https://api.github.com/users/BSVogler/following{/other_user}", "gists_url": "https://api.github.com/users/BSVogler/gists{/gist_id}", "starred_url": "https://api.github.com/users/BSVogler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BSVogler/subscriptions", "organizations_url": "https://api.github.com/users/BSVogler/orgs", "repos_url": "https://api.github.com/users/BSVogler/repos", "events_url": "https://api.github.com/users/BSVogler/events{/privacy}", "received_events_url": "https://api.github.com/users/BSVogler/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-15T14:27:30Z", "updated_at": "2017-03-15T14:27:30Z", "author_association": "NONE", "body": "I don't understand why I am getting this error with the [seq2seq tutorial model](https://github.com/tensorflow/models/blob/master/tutorials/rnn/translate/seq2seq_model.py):\r\n```python\r\ncell = tf.contrib.rnn.MultiRNNCell([single_cell() for _ in range(num_layers)])\r\n```\r\n[Source](https://github.com/tensorflow/models/blob/master/tutorials/rnn/translate/seq2seq_model.py#L129)\r\n\r\nwhere the cell is created with\r\n```python\r\ndef single_cell():\r\n    return tf.contrib.rnn.GRUCell(size)\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/286794006", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-286794006", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 286794006, "node_id": "MDEyOklzc3VlQ29tbWVudDI4Njc5NDAwNg==", "user": {"login": "tomwanzek", "id": 16323903, "node_id": "MDQ6VXNlcjE2MzIzOTAz", "avatar_url": "https://avatars1.githubusercontent.com/u/16323903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomwanzek", "html_url": "https://github.com/tomwanzek", "followers_url": "https://api.github.com/users/tomwanzek/followers", "following_url": "https://api.github.com/users/tomwanzek/following{/other_user}", "gists_url": "https://api.github.com/users/tomwanzek/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomwanzek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomwanzek/subscriptions", "organizations_url": "https://api.github.com/users/tomwanzek/orgs", "repos_url": "https://api.github.com/users/tomwanzek/repos", "events_url": "https://api.github.com/users/tomwanzek/events{/privacy}", "received_events_url": "https://api.github.com/users/tomwanzek/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-15T16:15:09Z", "updated_at": "2017-03-15T16:15:09Z", "author_association": "NONE", "body": "@ebrevdo Thanks for getting back to this issue. Unfortunately, the suggested change leaves matters as they are, with the aforementioned error. Given the above comment regarding the **seq2seq tutorial**, I suspect we are all in the same boat?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/286954580", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-286954580", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 286954580, "node_id": "MDEyOklzc3VlQ29tbWVudDI4Njk1NDU4MA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-16T04:25:17Z", "updated_at": "2017-03-16T04:25:17Z", "author_association": "CONTRIBUTOR", "body": "Are you sure it's the exact same error?  Please copy and paste it here."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/287056906", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-287056906", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 287056906, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA1NjkwNg==", "user": {"login": "tomwanzek", "id": 16323903, "node_id": "MDQ6VXNlcjE2MzIzOTAz", "avatar_url": "https://avatars1.githubusercontent.com/u/16323903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomwanzek", "html_url": "https://github.com/tomwanzek", "followers_url": "https://api.github.com/users/tomwanzek/followers", "following_url": "https://api.github.com/users/tomwanzek/following{/other_user}", "gists_url": "https://api.github.com/users/tomwanzek/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomwanzek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomwanzek/subscriptions", "organizations_url": "https://api.github.com/users/tomwanzek/orgs", "repos_url": "https://api.github.com/users/tomwanzek/repos", "events_url": "https://api.github.com/users/tomwanzek/events{/privacy}", "received_events_url": "https://api.github.com/users/tomwanzek/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-16T13:30:24Z", "updated_at": "2017-03-16T13:30:24Z", "author_association": "NONE", "body": "My bad, I just went through the change process to the relevant code again (from scratch) and re-ran it as proposed. The error has indeed been removed and the Old Bard is hallucinating just fine now \ud83d\udc4d \r\n\r\nSo, thx, not sure where I went wrong yesterday, but it was clearly on me."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/287257629", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-287257629", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 287257629, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzI1NzYyOQ==", "user": {"login": "bingfengyiren", "id": 13459577, "node_id": "MDQ6VXNlcjEzNDU5NTc3", "avatar_url": "https://avatars3.githubusercontent.com/u/13459577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bingfengyiren", "html_url": "https://github.com/bingfengyiren", "followers_url": "https://api.github.com/users/bingfengyiren/followers", "following_url": "https://api.github.com/users/bingfengyiren/following{/other_user}", "gists_url": "https://api.github.com/users/bingfengyiren/gists{/gist_id}", "starred_url": "https://api.github.com/users/bingfengyiren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bingfengyiren/subscriptions", "organizations_url": "https://api.github.com/users/bingfengyiren/orgs", "repos_url": "https://api.github.com/users/bingfengyiren/repos", "events_url": "https://api.github.com/users/bingfengyiren/events{/privacy}", "received_events_url": "https://api.github.com/users/bingfengyiren/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-17T03:29:06Z", "updated_at": "2017-03-17T03:29:06Z", "author_association": "NONE", "body": "I met the same problem when using the Release Version of Tensorflow 1.0 and working on MacOS in cpu mode.Even if add the \"reuse\" parameter\r\n```\r\ndef cell():\r\n    return tf.contrib.rnn.BasicLSTMCell(rnn_size,state_is_tuple=True,reuse=tf.get_variable_scope().reuse)\r\n\r\nmuticell = tf.contrib.rnn.MultiRNNCell([cell for _ in range(num_layers)], state_is_tuple=True)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/287270517", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-287270517", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 287270517, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzI3MDUxNw==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-17T05:28:33Z", "updated_at": "2017-03-17T05:28:33Z", "author_association": "CONTRIBUTOR", "body": "your multicell looks wrong... you should be using \"cell() for _ in\nrange(...)\"\n\nOn Thu, Mar 16, 2017 at 8:29 PM, cuiming <notifications@github.com> wrote:\n\n> I met the same problem when using the Release Version of Tensorflow 1.0\n> and working on MacOS in cpu mode.Even if add the \"reuse\" parameter\n>\n> def cell():\n>     return tf.contrib.rnn.BasicLSTMCell(rnn_size,state_is_tuple=True,reuse=tf.get_variable_scope().reuse)\n>\n> muticell = tf.contrib.rnn.MultiRNNCell([cell for _ in range(num_layers)], state_is_tuple=True)\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-287257629>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim3A6JQr8ptRKrdiDW_kgNRIFkHGlks5rmf4WgaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/289303485", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-289303485", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 289303485, "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTMwMzQ4NQ==", "user": {"login": "bowu", "id": 725765, "node_id": "MDQ6VXNlcjcyNTc2NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/725765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bowu", "html_url": "https://github.com/bowu", "followers_url": "https://api.github.com/users/bowu/followers", "following_url": "https://api.github.com/users/bowu/following{/other_user}", "gists_url": "https://api.github.com/users/bowu/gists{/gist_id}", "starred_url": "https://api.github.com/users/bowu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bowu/subscriptions", "organizations_url": "https://api.github.com/users/bowu/orgs", "repos_url": "https://api.github.com/users/bowu/repos", "events_url": "https://api.github.com/users/bowu/events{/privacy}", "received_events_url": "https://api.github.com/users/bowu/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-26T18:15:16Z", "updated_at": "2017-03-26T18:21:31Z", "author_association": "NONE", "body": "I was trying to run the translate example: python2.7 translate.py --data_dir data/ --train_dir train/ --size=256 --num_layers=2 --steps_per_checkpoint=50\r\n\r\nIt seems the way to use MultiRNNCell is correct:\r\ncell = tf.contrib.rnn.MultiRNNCell([single_cell() for _ in range(num_layers)])\r\n\r\nBut I got the same error:\r\nValueError: Attempt to reuse RNNCell <tensorflow.contrib.rnn.python.ops.core_rnn_cell_impl.GRUCell object at 0x7fba0683de90> with a different variable scope than its first use.  First use of cell was with scope 'embedding_attention_seq2seq/embedding_attention_decoder/attention_decoder/multi_rnn_cell/cell_0/gru_cell', this attempt is with scope 'embedding_attention_seq2seq/rnn/multi_rnn_cell/cell_0/gru_cell'.  Please create a new instance of the cell if you would like it to use a different set of weights.  If before you were using: MultiRNNCell([GRUCell(...)] * num_layers), change to: MultiRNNCell([GRUCell(...) for _ in range(num_layers)]).  If before you were using the same cell instance as both the forward and reverse cell of a bidirectional RNN, simply create two instances (one for forward, one for reverse).  In May 2017, we will start transitioning this cell's behavior to use existing stored weights, if any, when it is called with scope=None (which can lead to silent model degradation, so this error will remain until then.)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/290160776", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-290160776", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 290160776, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDE2MDc3Ng==", "user": {"login": "robmsylvester", "id": 3009901, "node_id": "MDQ6VXNlcjMwMDk5MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3009901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robmsylvester", "html_url": "https://github.com/robmsylvester", "followers_url": "https://api.github.com/users/robmsylvester/followers", "following_url": "https://api.github.com/users/robmsylvester/following{/other_user}", "gists_url": "https://api.github.com/users/robmsylvester/gists{/gist_id}", "starred_url": "https://api.github.com/users/robmsylvester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robmsylvester/subscriptions", "organizations_url": "https://api.github.com/users/robmsylvester/orgs", "repos_url": "https://api.github.com/users/robmsylvester/repos", "events_url": "https://api.github.com/users/robmsylvester/events{/privacy}", "received_events_url": "https://api.github.com/users/robmsylvester/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-29T17:21:44Z", "updated_at": "2017-03-29T18:56:22Z", "author_association": "NONE", "body": "@bowu - did you have any luck with this? if you haven't tried it yet, reinstall tensorflow from the latest source. there were some changes to some of the core_rnn files, among a few others. works for me now."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/290289037", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-290289037", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 290289037, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDI4OTAzNw==", "user": {"login": "oxwsds", "id": 2883580, "node_id": "MDQ6VXNlcjI4ODM1ODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2883580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oxwsds", "html_url": "https://github.com/oxwsds", "followers_url": "https://api.github.com/users/oxwsds/followers", "following_url": "https://api.github.com/users/oxwsds/following{/other_user}", "gists_url": "https://api.github.com/users/oxwsds/gists{/gist_id}", "starred_url": "https://api.github.com/users/oxwsds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oxwsds/subscriptions", "organizations_url": "https://api.github.com/users/oxwsds/orgs", "repos_url": "https://api.github.com/users/oxwsds/repos", "events_url": "https://api.github.com/users/oxwsds/events{/privacy}", "received_events_url": "https://api.github.com/users/oxwsds/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-30T03:05:00Z", "updated_at": "2017-03-30T03:27:40Z", "author_association": "NONE", "body": "@robmsylvester I reinstall tensorflow from the latest source, still the same error. I was on branch master and the latest commit is `commit 2a4811054a9e6b83e1f5a2705a92aab50e151b13`. What's the latest commit when you build your repo?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/291283786", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-291283786", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 291283786, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTI4Mzc4Ng==", "user": {"login": "prashantserai", "id": 10653125, "node_id": "MDQ6VXNlcjEwNjUzMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/10653125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantserai", "html_url": "https://github.com/prashantserai", "followers_url": "https://api.github.com/users/prashantserai/followers", "following_url": "https://api.github.com/users/prashantserai/following{/other_user}", "gists_url": "https://api.github.com/users/prashantserai/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantserai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantserai/subscriptions", "organizations_url": "https://api.github.com/users/prashantserai/orgs", "repos_url": "https://api.github.com/users/prashantserai/repos", "events_url": "https://api.github.com/users/prashantserai/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantserai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-03T21:46:37Z", "updated_at": "2017-04-03T21:46:37Z", "author_association": "NONE", "body": "Hi, I am using Tensorflow r1.0 using GPU built using source. I am trying to follow the unmodified Seq2Seq translation tutorial, but I'm getting the same error. i.e.\r\n\r\n> ValueError: Attempt to reuse RNNCell <tensorflow.contrib.rnn.python.ops.core_rnn_cell_impl.GRUCell object at 0x7f0fb51ebb00> with a different variable scope than its first use.  First use of cell was with scope 'embedding_attention_seq2seq/embedding_attention_decoder/attention_decoder/multi_rnn_cell/cell_0/gru_cell', this attempt is with scope 'embedding_attention_seq2seq/rnn/multi_rnn_cell/cell_0/gru_cell'.....\r\n\r\nThe relevant portion of the code in my seq2seq_model.py is:\r\n```\r\n # Create the internal multi-layer cell for our RNN.\r\n    def single_cell():\r\n      return tf.contrib.rnn.GRUCell(size)\r\n    if use_lstm:\r\n      def single_cell():\r\n        return tf.contrib.rnn.BasicLSTMCell(size)\r\n    cell = single_cell()\r\n    if num_layers > 1:\r\n      cell = tf.contrib.rnn.MultiRNNCell([single_cell() for _ in range(num_layers)])\r\n```\r\n\r\nWhat can I do to solve the problem?\r\n\r\nadding \"reuse=tf.get_variable_scope().reuse\" to the call where the GRUCell is created doesn't help.\r\n\r\nThanks a ton!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/291310731", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-291310731", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 291310731, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTMxMDczMQ==", "user": {"login": "robmsylvester", "id": 3009901, "node_id": "MDQ6VXNlcjMwMDk5MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3009901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robmsylvester", "html_url": "https://github.com/robmsylvester", "followers_url": "https://api.github.com/users/robmsylvester/followers", "following_url": "https://api.github.com/users/robmsylvester/following{/other_user}", "gists_url": "https://api.github.com/users/robmsylvester/gists{/gist_id}", "starred_url": "https://api.github.com/users/robmsylvester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robmsylvester/subscriptions", "organizations_url": "https://api.github.com/users/robmsylvester/orgs", "repos_url": "https://api.github.com/users/robmsylvester/repos", "events_url": "https://api.github.com/users/robmsylvester/events{/privacy}", "received_events_url": "https://api.github.com/users/robmsylvester/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-03T23:18:43Z", "updated_at": "2017-04-03T23:18:43Z", "author_association": "NONE", "body": "@prashantserai - see what happens if you remove the MultiRNNCell line from above, effectively making your network just one layer. Does it work then? It might be a bug somewhere in MultiRNNCell. I've read about that somewhere recently, probably on stack overflow.\r\n\r\nIf you implement the stacked lstm/gru yourself, you don't get this error, and you can implement the same functionality (actually more, because you're free to do whatever you want with bidirectional architectures, weird residual and skip connections, etc.)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/291503656", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-291503656", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 291503656, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTUwMzY1Ng==", "user": {"login": "prashantserai", "id": 10653125, "node_id": "MDQ6VXNlcjEwNjUzMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/10653125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantserai", "html_url": "https://github.com/prashantserai", "followers_url": "https://api.github.com/users/prashantserai/followers", "following_url": "https://api.github.com/users/prashantserai/following{/other_user}", "gists_url": "https://api.github.com/users/prashantserai/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantserai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantserai/subscriptions", "organizations_url": "https://api.github.com/users/prashantserai/orgs", "repos_url": "https://api.github.com/users/prashantserai/repos", "events_url": "https://api.github.com/users/prashantserai/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantserai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-04T13:43:33Z", "updated_at": "2017-04-04T13:43:33Z", "author_association": "NONE", "body": "@robmsylvester The same error persisted even when I tried with num_layers=1 which should effectively skip that line. Any other ideas? Thanks for the input."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/291582020", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-291582020", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 291582020, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTU4MjAyMA==", "user": {"login": "robmsylvester", "id": 3009901, "node_id": "MDQ6VXNlcjMwMDk5MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3009901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robmsylvester", "html_url": "https://github.com/robmsylvester", "followers_url": "https://api.github.com/users/robmsylvester/followers", "following_url": "https://api.github.com/users/robmsylvester/following{/other_user}", "gists_url": "https://api.github.com/users/robmsylvester/gists{/gist_id}", "starred_url": "https://api.github.com/users/robmsylvester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robmsylvester/subscriptions", "organizations_url": "https://api.github.com/users/robmsylvester/orgs", "repos_url": "https://api.github.com/users/robmsylvester/repos", "events_url": "https://api.github.com/users/robmsylvester/events{/privacy}", "received_events_url": "https://api.github.com/users/robmsylvester/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-04T17:59:13Z", "updated_at": "2017-04-04T17:59:13Z", "author_association": "NONE", "body": "Hmmm. One thing that stands out to me is in the referenced legacy seq2seq file:\r\n\r\n`encoder_cell = copy.deepcopy(cell)`\r\n\r\nThis line appears to be used because the same architecture is used on both the encoder and decoder side. They make a copy of the cell, then pass the cell argument along to the attention decoder embedding function, then to the attention decoder itself. \r\n\r\nWhat happens if you explicitly create the encoder cell AND the decoder cell in your seq2seq model file and pass both along to the legacy library file, making the small adjustments to the functions and their arguments?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/291591076", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-291591076", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 291591076, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTU5MTA3Ng==", "user": {"login": "iamgroot42", "id": 10141323, "node_id": "MDQ6VXNlcjEwMTQxMzIz", "avatar_url": "https://avatars1.githubusercontent.com/u/10141323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iamgroot42", "html_url": "https://github.com/iamgroot42", "followers_url": "https://api.github.com/users/iamgroot42/followers", "following_url": "https://api.github.com/users/iamgroot42/following{/other_user}", "gists_url": "https://api.github.com/users/iamgroot42/gists{/gist_id}", "starred_url": "https://api.github.com/users/iamgroot42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iamgroot42/subscriptions", "organizations_url": "https://api.github.com/users/iamgroot42/orgs", "repos_url": "https://api.github.com/users/iamgroot42/repos", "events_url": "https://api.github.com/users/iamgroot42/events{/privacy}", "received_events_url": "https://api.github.com/users/iamgroot42/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-04T18:30:33Z", "updated_at": "2017-04-04T18:30:33Z", "author_association": "NONE", "body": "@robmsylvester  shouldn't making changes in the scopes of the cells work? It's working for the other two examples as well. In my opinion, this would be a very ugly workaround; a cleaner solution must exist; maybe we are missing something? ( I got the same error on the seq2seq tutorial as well, tried all of the above solutions)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/291593289", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-291593289", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 291593289, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTU5MzI4OQ==", "user": {"login": "robmsylvester", "id": 3009901, "node_id": "MDQ6VXNlcjMwMDk5MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3009901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robmsylvester", "html_url": "https://github.com/robmsylvester", "followers_url": "https://api.github.com/users/robmsylvester/followers", "following_url": "https://api.github.com/users/robmsylvester/following{/other_user}", "gists_url": "https://api.github.com/users/robmsylvester/gists{/gist_id}", "starred_url": "https://api.github.com/users/robmsylvester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robmsylvester/subscriptions", "organizations_url": "https://api.github.com/users/robmsylvester/orgs", "repos_url": "https://api.github.com/users/robmsylvester/repos", "events_url": "https://api.github.com/users/robmsylvester/events{/privacy}", "received_events_url": "https://api.github.com/users/robmsylvester/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-04T18:38:34Z", "updated_at": "2017-04-04T18:38:34Z", "author_association": "NONE", "body": "@iamgroot42 - Yeah, that 'solution' is admittedly very ugly, but more so just trying to hunt down where an issue might be. I'll play with it in a few hours and see if I can track something down."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292024279", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292024279", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292024279, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjAyNDI3OQ==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-05T23:16:55Z", "updated_at": "2017-04-05T23:16:55Z", "author_association": "CONTRIBUTOR", "body": "In fact, the copy.deepcopy is there because these are legacy functions and\nwe don't have the resources to maintain/update them.  If you'd like to\nintroduce a backwards-compatible change that allows the user to provide a\nsecond cell for the decoding step, and if it's None then to fallback on the\ndeepcopy, then I would be happy to review the PR.  Keep in mind it would\nhave to be a backwards compatible change.\n\nOn Tue, Apr 4, 2017 at 11:38 AM, Rob Sylvester <notifications@github.com>\nwrote:\n\n> @iamgroot42 <https://github.com/iamgroot42> - Yeah, that 'solution' is\n> admittedly very ugly, but more so just trying to hunt down where an issue\n> might be. I'll play with it in a few hours and see if I can track something\n> down.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-291593289>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim1QHTDhOC_zT6cKtmUFPOit5Yjn7ks5rso5CgaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292026855", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292026855", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292026855, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjAyNjg1NQ==", "user": {"login": "robmsylvester", "id": 3009901, "node_id": "MDQ6VXNlcjMwMDk5MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3009901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robmsylvester", "html_url": "https://github.com/robmsylvester", "followers_url": "https://api.github.com/users/robmsylvester/followers", "following_url": "https://api.github.com/users/robmsylvester/following{/other_user}", "gists_url": "https://api.github.com/users/robmsylvester/gists{/gist_id}", "starred_url": "https://api.github.com/users/robmsylvester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robmsylvester/subscriptions", "organizations_url": "https://api.github.com/users/robmsylvester/orgs", "repos_url": "https://api.github.com/users/robmsylvester/repos", "events_url": "https://api.github.com/users/robmsylvester/events{/privacy}", "received_events_url": "https://api.github.com/users/robmsylvester/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-05T23:32:50Z", "updated_at": "2017-04-05T23:32:50Z", "author_association": "NONE", "body": "@ebrevdo - I'll think about it. I do have a translator that works pretty similar to this one but creates cells through a separate class that allows for inserting bidirectional layers where you want, residuals where you want, merging inputs with concat vs. sum, and a few other things. I think I could migrate my class over to this tutorial pretty easily by using static RNN's. I'll let you know."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292035634", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292035634", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292035634, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjAzNTYzNA==", "user": {"login": "prashantserai", "id": 10653125, "node_id": "MDQ6VXNlcjEwNjUzMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/10653125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantserai", "html_url": "https://github.com/prashantserai", "followers_url": "https://api.github.com/users/prashantserai/followers", "following_url": "https://api.github.com/users/prashantserai/following{/other_user}", "gists_url": "https://api.github.com/users/prashantserai/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantserai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantserai/subscriptions", "organizations_url": "https://api.github.com/users/prashantserai/orgs", "repos_url": "https://api.github.com/users/prashantserai/repos", "events_url": "https://api.github.com/users/prashantserai/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantserai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-06T00:32:18Z", "updated_at": "2017-04-06T00:32:40Z", "author_association": "NONE", "body": "@ebrevdo i am running Tensorflow r1.0 (tensorflow-1.0.1-cp36-cp36m-linux_x86_64) on Red Hat and have the latest version of the translation tutorial from Github.. is there a way you know to make this work currently?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292063709", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292063709", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292063709, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjA2MzcwOQ==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-06T04:08:26Z", "updated_at": "2017-04-06T04:08:26Z", "author_association": "CONTRIBUTOR", "body": "It's unfortunate that the translation tutorial does not work with TF 1.0.  We should fix that.  @lukaszkaiser can you take a look?  We're working on a new tutorial but it's still a few weeks off and will require a nightly version of TensorFlow (or TF 1.1 or 1.2) to work."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292063843", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292063843", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292063843, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjA2Mzg0Mw==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-06T04:09:40Z", "updated_at": "2017-04-06T04:09:48Z", "author_association": "CONTRIBUTOR", "body": "(lukasz; it's hard for me to identify from the various comments which part of the tutorial is faulty in TF 1.0.  any chance you could identify the line and i can help get it working?)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292068985", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292068985", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292068985, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjA2ODk4NQ==", "user": {"login": "iamgroot42", "id": 10141323, "node_id": "MDQ6VXNlcjEwMTQxMzIz", "avatar_url": "https://avatars1.githubusercontent.com/u/10141323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iamgroot42", "html_url": "https://github.com/iamgroot42", "followers_url": "https://api.github.com/users/iamgroot42/followers", "following_url": "https://api.github.com/users/iamgroot42/following{/other_user}", "gists_url": "https://api.github.com/users/iamgroot42/gists{/gist_id}", "starred_url": "https://api.github.com/users/iamgroot42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iamgroot42/subscriptions", "organizations_url": "https://api.github.com/users/iamgroot42/orgs", "repos_url": "https://api.github.com/users/iamgroot42/repos", "events_url": "https://api.github.com/users/iamgroot42/events{/privacy}", "received_events_url": "https://api.github.com/users/iamgroot42/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-06T04:56:36Z", "updated_at": "2017-04-06T04:56:36Z", "author_association": "NONE", "body": "@ebrevdo  It's [this ](https://github.com/tensorflow/models/tree/master/tutorials/rnn/translate) tutorial. The error is in [this](https://github.com/tensorflow/models/blob/master/tutorials/rnn/translate/seq2seq_model.py#L122) cluster of lines. The cells passed here are used for both the backward and forward phase of the legacy seq2seq model, which throws an error because of same cells being used with different scopes."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292069513", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292069513", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292069513, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjA2OTUxMw==", "user": {"login": "lukaszkaiser", "id": 684901, "node_id": "MDQ6VXNlcjY4NDkwMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/684901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaszkaiser", "html_url": "https://github.com/lukaszkaiser", "followers_url": "https://api.github.com/users/lukaszkaiser/followers", "following_url": "https://api.github.com/users/lukaszkaiser/following{/other_user}", "gists_url": "https://api.github.com/users/lukaszkaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaszkaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaszkaiser/subscriptions", "organizations_url": "https://api.github.com/users/lukaszkaiser/orgs", "repos_url": "https://api.github.com/users/lukaszkaiser/repos", "events_url": "https://api.github.com/users/lukaszkaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaszkaiser/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-06T05:01:35Z", "updated_at": "2017-04-06T05:01:35Z", "author_association": "MEMBER", "body": "@iamgroot42 do you want to make a PR with the needed changes? That would be great, I currently don't have the cycles to do that myself. Thanks!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292169659", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292169659", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292169659, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjE2OTY1OQ==", "user": {"login": "oxwsds", "id": 2883580, "node_id": "MDQ6VXNlcjI4ODM1ODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2883580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oxwsds", "html_url": "https://github.com/oxwsds", "followers_url": "https://api.github.com/users/oxwsds/followers", "following_url": "https://api.github.com/users/oxwsds/following{/other_user}", "gists_url": "https://api.github.com/users/oxwsds/gists{/gist_id}", "starred_url": "https://api.github.com/users/oxwsds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oxwsds/subscriptions", "organizations_url": "https://api.github.com/users/oxwsds/orgs", "repos_url": "https://api.github.com/users/oxwsds/repos", "events_url": "https://api.github.com/users/oxwsds/events{/privacy}", "received_events_url": "https://api.github.com/users/oxwsds/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-06T13:11:53Z", "updated_at": "2017-04-06T13:11:53Z", "author_association": "NONE", "body": "I noticed that the TF 1.0  works fine with the newest version of translation tutorial if compiled from the source on branch remotes/origin/r1.0\r\n```\r\n$ git clone https://github.com/tensorflow/tensorflow\r\n$ cd tensorflow\r\n$ git checkout remotes/origin/r1.0\r\n```\r\nthen build and install TensorFlow, it works fine.\r\n\r\nOn branch remotes/origin/r1.1 it has the \"different variable scope\" error. \r\nI modified the code as @robmsylvester suggested\r\n> What happens if you explicitly create the encoder cell AND the decoder cell in your seq2seq model file and pass both along to the legacy library file, making the small adjustments to the functions and their arguments?\r\n\r\nand it works for me now."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292719929", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292719929", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292719929, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjcxOTkyOQ==", "user": {"login": "prashantserai", "id": 10653125, "node_id": "MDQ6VXNlcjEwNjUzMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/10653125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantserai", "html_url": "https://github.com/prashantserai", "followers_url": "https://api.github.com/users/prashantserai/followers", "following_url": "https://api.github.com/users/prashantserai/following{/other_user}", "gists_url": "https://api.github.com/users/prashantserai/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantserai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantserai/subscriptions", "organizations_url": "https://api.github.com/users/prashantserai/orgs", "repos_url": "https://api.github.com/users/prashantserai/repos", "events_url": "https://api.github.com/users/prashantserai/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantserai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-08T14:00:37Z", "updated_at": "2017-04-08T14:00:37Z", "author_association": "NONE", "body": "@oxwsds the Tensorflow I'm using is 1.0.1 so maybe that's having an error..\r\n\r\nI had tried what @robmsylvester suggested then actually.. and the training had begun (2 days 13 hours done now).. it fails during decoding though with the error:\r\n```\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 883, in embedding_attention_seq2seq\r\n    initial_state_attention=initial_state_attention)\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 787, in embedding_attention_decoder\r\n    initial_state_attention=initial_state_attention)\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 686, in attention_decoder\r\n    cell_output, state = cell(x, state)\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 796, in __call__\r\n    % (len(self.state_size), state))\r\nValueError: Expected state to be a tuple of length 3, but received: Tensor(\"model_with_buckets/embedding_attention_seq2seq/rnn/gru_cell_4/add:0\", shape=(?, 1024), dtype=float32)\r\n\r\n```\r\nDid you try decoding?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292881312", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292881312", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292881312, "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjg4MTMxMg==", "user": {"login": "oxwsds", "id": 2883580, "node_id": "MDQ6VXNlcjI4ODM1ODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2883580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oxwsds", "html_url": "https://github.com/oxwsds", "followers_url": "https://api.github.com/users/oxwsds/followers", "following_url": "https://api.github.com/users/oxwsds/following{/other_user}", "gists_url": "https://api.github.com/users/oxwsds/gists{/gist_id}", "starred_url": "https://api.github.com/users/oxwsds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oxwsds/subscriptions", "organizations_url": "https://api.github.com/users/oxwsds/orgs", "repos_url": "https://api.github.com/users/oxwsds/repos", "events_url": "https://api.github.com/users/oxwsds/events{/privacy}", "received_events_url": "https://api.github.com/users/oxwsds/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-10T08:20:50Z", "updated_at": "2017-04-10T08:20:50Z", "author_association": "NONE", "body": "@prashantserai Don't exactly know, but what you met seems to be another issue. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292890465", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292890465", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292890465, "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjg5MDQ2NQ==", "user": {"login": "robmsylvester", "id": 3009901, "node_id": "MDQ6VXNlcjMwMDk5MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3009901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robmsylvester", "html_url": "https://github.com/robmsylvester", "followers_url": "https://api.github.com/users/robmsylvester/followers", "following_url": "https://api.github.com/users/robmsylvester/following{/other_user}", "gists_url": "https://api.github.com/users/robmsylvester/gists{/gist_id}", "starred_url": "https://api.github.com/users/robmsylvester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robmsylvester/subscriptions", "organizations_url": "https://api.github.com/users/robmsylvester/orgs", "repos_url": "https://api.github.com/users/robmsylvester/repos", "events_url": "https://api.github.com/users/robmsylvester/events{/privacy}", "received_events_url": "https://api.github.com/users/robmsylvester/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-10T09:00:44Z", "updated_at": "2017-04-10T09:01:34Z", "author_association": "NONE", "body": "@prashantserai If it fails only when you decode, perhaps it has something to do with using a batch size of one? Does the model still train if you lower the batch size to one during training?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292985821", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292985821", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292985821, "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjk4NTgyMQ==", "user": {"login": "soloice", "id": 8534653, "node_id": "MDQ6VXNlcjg1MzQ2NTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8534653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soloice", "html_url": "https://github.com/soloice", "followers_url": "https://api.github.com/users/soloice/followers", "following_url": "https://api.github.com/users/soloice/following{/other_user}", "gists_url": "https://api.github.com/users/soloice/gists{/gist_id}", "starred_url": "https://api.github.com/users/soloice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soloice/subscriptions", "organizations_url": "https://api.github.com/users/soloice/orgs", "repos_url": "https://api.github.com/users/soloice/repos", "events_url": "https://api.github.com/users/soloice/events{/privacy}", "received_events_url": "https://api.github.com/users/soloice/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-10T15:30:41Z", "updated_at": "2017-04-10T15:30:41Z", "author_association": "CONTRIBUTOR", "body": "@bowu Same error here. Mac OX Sierra, TensorFlow 1.1.0-rc1, Python 2.7.10 & Python 3.6.1."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292988096", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-292988096", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 292988096, "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjk4ODA5Ng==", "user": {"login": "prashantserai", "id": 10653125, "node_id": "MDQ6VXNlcjEwNjUzMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/10653125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantserai", "html_url": "https://github.com/prashantserai", "followers_url": "https://api.github.com/users/prashantserai/followers", "following_url": "https://api.github.com/users/prashantserai/following{/other_user}", "gists_url": "https://api.github.com/users/prashantserai/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantserai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantserai/subscriptions", "organizations_url": "https://api.github.com/users/prashantserai/orgs", "repos_url": "https://api.github.com/users/prashantserai/repos", "events_url": "https://api.github.com/users/prashantserai/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantserai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-10T15:38:20Z", "updated_at": "2017-04-10T15:38:20Z", "author_association": "NONE", "body": "@robmsylvester it did train successfully with a batch size of one too, but failed during decoding in the same way or similar way.. here's a full traceback.. the reason I was thinking of this as a connected error was because of the reference to seq2seq_f (which was one of the modified functions) (the #prashant comment from my code to signify a modified line is part of the trace)\r\n\r\n```\r\n2017-04-10 11:32:27.447042: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 0 with properties: \r\nname: GeForce GTX 780 Ti\r\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.928\r\npciBusID 0000:42:00.0\r\nTotal memory: 2.95GiB\r\nFree memory: 2.88GiB\r\n2017-04-10 11:32:27.447094: I tensorflow/core/common_runtime/gpu/gpu_device.cc:908] DMA: 0 \r\n2017-04-10 11:32:27.447102: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 0:   Y \r\n2017-04-10 11:32:27.447118: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 780 Ti, pci bus id: 0000:42:00.0)\r\nTraceback (most recent call last):\r\n  File \"translate.py\", line 322, in <module>\r\n    tf.app.run()\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"translate.py\", line 317, in main\r\n    decode()\r\n  File \"translate.py\", line 248, in decode\r\n    model = create_model(sess, True)\r\n  File \"translate.py\", line 136, in create_model\r\n    dtype=dtype)\r\n  File \"/data/data6/scratch/serai/models/tutorials/rnn/translate/seq2seq_model.py\", line 168, in __init__\r\n    softmax_loss_function=softmax_loss_function)\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1203, in model_with_buckets\r\n    decoder_inputs[:bucket[1]])\r\n  File \"/data/data6/scratch/serai/models/tutorials/rnn/translate/seq2seq_model.py\", line 167, in <lambda>\r\n    self.target_weights, buckets, lambda x, y: seq2seq_f(x, y, True),\r\n  File \"/data/data6/scratch/serai/models/tutorials/rnn/translate/seq2seq_model.py\", line 144, in seq2seq_f\r\n    dtype=dtype) #prashant\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 883, in embedding_attention_seq2seq\r\n    initial_state_attention=initial_state_attention)\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 787, in embedding_attention_decoder\r\n    initial_state_attention=initial_state_attention)\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 686, in attention_decoder\r\n    cell_output, state = cell(x, state)\r\n  File \"/homes/3/serai/.conda/envs/tensorflow_r1.0_gpu/lib/python3.6/site-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 796, in __call__\r\n    % (len(self.state_size), state))\r\nValueError: Expected state to be a tuple of length 3, but received: Tensor(\"model_with_buckets/embedding_attention_seq2seq/rnn/gru_cell_4/add:0\", shape=(?, 1024), dtype=float32)\r\n```\r\n\r\n@oxwsds does your opinion change on the basis of the full trace above?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293135659", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-293135659", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 293135659, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzEzNTY1OQ==", "user": {"login": "oxwsds", "id": 2883580, "node_id": "MDQ6VXNlcjI4ODM1ODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2883580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oxwsds", "html_url": "https://github.com/oxwsds", "followers_url": "https://api.github.com/users/oxwsds/followers", "following_url": "https://api.github.com/users/oxwsds/following{/other_user}", "gists_url": "https://api.github.com/users/oxwsds/gists{/gist_id}", "starred_url": "https://api.github.com/users/oxwsds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oxwsds/subscriptions", "organizations_url": "https://api.github.com/users/oxwsds/orgs", "repos_url": "https://api.github.com/users/oxwsds/repos", "events_url": "https://api.github.com/users/oxwsds/events{/privacy}", "received_events_url": "https://api.github.com/users/oxwsds/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-11T02:56:25Z", "updated_at": "2017-04-11T02:56:49Z", "author_association": "NONE", "body": "@prashantserai I tried decoding and it works fine. I just simply add a `encoder_cell` arg to function `tf.contrib.legacy_seq2seq.embedding_attention_seq2seq` and in `translate/seq2seq_model.py` create the cell and pass it to the function, which were called in function `seq2seq_f`. How did you change your code?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293143828", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-293143828", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 293143828, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzE0MzgyOA==", "user": {"login": "prashantserai", "id": 10653125, "node_id": "MDQ6VXNlcjEwNjUzMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/10653125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantserai", "html_url": "https://github.com/prashantserai", "followers_url": "https://api.github.com/users/prashantserai/followers", "following_url": "https://api.github.com/users/prashantserai/following{/other_user}", "gists_url": "https://api.github.com/users/prashantserai/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantserai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantserai/subscriptions", "organizations_url": "https://api.github.com/users/prashantserai/orgs", "repos_url": "https://api.github.com/users/prashantserai/repos", "events_url": "https://api.github.com/users/prashantserai/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantserai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-11T04:04:23Z", "updated_at": "2017-04-11T22:57:04Z", "author_association": "NONE", "body": "@oxwsds @robmsylvester @ebrevdo \r\nI finally have something that's working now (I mean, results for my single layer 256 unit network are kind of appalling, but that's probably just because the network is ultra light weight and I didn't tune params AT ALL)\r\nThank you so much everyone...!!!!!\r\n\r\n_Here's my thoughts at the end of this:_\r\n\r\n@oxwsds comment **that the tutorial (in it's current form) works without any need for modification when Tensorflow is compiled from the branch remotes/origin/r1.0 was TRUE**. Although, the sad bit was that the version of Tensorflow I had for which modifications within Tensorflow code were needed, and the version in remotes/origin/r1.0 were both identically labelled.\r\n\r\n@robmsylvester 's fix in the comment (copied below) DID WORK for my version of Tensorflow where the Tutorial didn't work out of the box (and should work for TF 1.1 too I guess). It is slightly messy to implement, but I could do it, which is saying something :-P\r\nThe error in my last two comments before this was due to my mistake. Like a dummy, I was specifying the layers and hidden units parameters only during training, I was leaving the code to use defaults during decoding. **(this portion of the tutorial could be slightly more dummy proof: https://www.tensorflow.org/tutorials/seq2seq#lets_run_it )**\r\n\r\n> Hmmm. One thing that stands out to me is in the referenced legacy seq2seq file:\r\n> \r\n> encoder_cell = copy.deepcopy(cell)\r\n> \r\n> This line appears to be used because the same architecture is used on both the encoder and decoder side. They make a copy of the cell, then pass the cell argument along to the attention decoder embedding function, then to the attention decoder itself.\r\n> \r\n> What happens if you explicitly create the encoder cell AND the decoder cell in your seq2seq model file and pass both along to the legacy library file, making the small adjustments to the functions and their arguments?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293363847", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-293363847", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 293363847, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzM2Mzg0Nw==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-11T18:46:33Z", "updated_at": "2017-04-11T18:46:33Z", "author_association": "CONTRIBUTOR", "body": "Thanks for the feedback!  Seems there's something different between the TF\non pypi and at that tag? Gunhan, is that possible?\n\nOn Mon, Apr 10, 2017 at 9:05 PM, prashantserai <notifications@github.com>\nwrote:\n\n> @oxwsds <https://github.com/oxwsds> @robmsylvester\n> <https://github.com/robmsylvester> @ebrevdo <https://github.com/ebrevdo>\n> I finally have something that's working now (I mean, results for my single\n> layer 256 unit network are kind of appalling, but that's probably just\n> because the network is ultra light weight and I didn't tune params AT ALL)\n>\n> Here's my bottomline:\n>\n> @oxwsds <https://github.com/oxwsds> comment *that the tutorial (in it's\n> current form) works without any need for modification when Tensorflow is\n> compiled from the branch remotes/origin/r1.0 was TRUE*. The sad bit\n> although being that the version of Tensorflow I had for which modifications\n> within Tensorflow code were needed, and the version in remotes/origin/r1.0\n> were both identically labelled.\n>\n> @robmsylvester <https://github.com/robmsylvester> 's fix in the comment\n> (copied below) DID WORK for my version of Tensorflow where the Tutorial\n> didn't work out of the box (and should work for TF 1.1 too I guess). It is\n> slightly messy to implement, but I could do it, which is saying something\n> :-P\n> The error in my last two comments before this was due to my mistake. Like\n> a dummy, I was specifying the layers and hidden units parameters only\n> during training, I was leaving the code to use defaults during decoding. *(this\n> portion of the tutorial is could be slightly more dummy proof:\n> https://www.tensorflow.org/tutorials/seq2seq#lets_run_it\n> <https://www.tensorflow.org/tutorials/seq2seq#lets_run_it> )*\n>\n> Hmmm. One thing that stands out to me is in the referenced legacy seq2seq\n> file:\n>\n> encoder_cell = copy.deepcopy(cell)\n>\n> This line appears to be used because the same architecture is used on both\n> the encoder and decoder side. They make a copy of the cell, then pass the\n> cell argument along to the attention decoder embedding function, then to\n> the attention decoder itself.\n>\n> What happens if you explicitly create the encoder cell AND the decoder\n> cell in your seq2seq model file and pass both along to the legacy library\n> file, making the small adjustments to the functions and their arguments?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-293143828>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtimxvcfFnbWbpj7aUs3BUjwGEFj6p5ks5ruvvygaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293849052", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-293849052", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 293849052, "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mzg0OTA1Mg==", "user": {"login": "pltrdy", "id": 6375843, "node_id": "MDQ6VXNlcjYzNzU4NDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/6375843?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pltrdy", "html_url": "https://github.com/pltrdy", "followers_url": "https://api.github.com/users/pltrdy/followers", "following_url": "https://api.github.com/users/pltrdy/following{/other_user}", "gists_url": "https://api.github.com/users/pltrdy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pltrdy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pltrdy/subscriptions", "organizations_url": "https://api.github.com/users/pltrdy/orgs", "repos_url": "https://api.github.com/users/pltrdy/repos", "events_url": "https://api.github.com/users/pltrdy/events{/privacy}", "received_events_url": "https://api.github.com/users/pltrdy/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-13T10:11:20Z", "updated_at": "2017-04-18T09:47:57Z", "author_association": "NONE", "body": "For information I had this issue while trying to stack LSTM cells:\r\nMy orginial code was:\r\n```\r\n    lstm_cell = tf.nn.rnn_cell.BasicLSTMCell(hidden_size, forget_bias=0.0, state_is_tuple=True)\r\n    if is_training and keep_prob < 1:\r\n      lstm_cell = tf.nn.rnn_cell.DropoutWrapper(\r\n          lstm_cell, output_keep_prob=keep_prob)\r\n    cell = tf.nn.rnn_cell.MultiRNNCell([lstm_cell] * num_layers, state_is_tuple=True)\r\n```\r\n\r\nThen, with the following code, creating the model was ok, but I couldn't share the variable with another model. (for instance if you create a train_model and a valid_model supposed to share tensors, it will fail)\r\n```\r\n    lstm_creator = lambda: tf.contrib.rnn.BasicLSTMCell(\r\n                                        hidden_size, \r\n                                        forget_bias=0.0, state_is_tuple=True)\r\n    if is_training and keep_prob < 1:\r\n      cell_creator = lambda:tf.contrib.rnn.DropoutWrapper(\r\n          lstm_creator(), output_keep_prob=keep_prob)\r\n    else:\r\n      cell_creator = lstm_creator\r\n\r\n    cell = tf.contrib.rnn.MultiRNNCell([cell_creator() for _ in range(num_layers)], state_is_tuple=True)\r\n\r\n```\r\n\r\nSo finally I used `lstm_creator` to be the function like `lstm_cell` in [tensorflow/models/tutorials/rnn/ptb/ptb_word_lm.py#L112](https://github.com/tensorflow/models/blob/master/tutorials/rnn/ptb/ptb_word_lm.py#L112). I now have:\r\n```\r\ndef lstm_cell():\r\n      # With the latest TensorFlow source code (as of Mar 27, 2017),\r\n      # the BasicLSTMCell will need a reuse parameter which is unfortunately not\r\n      # defined in TensorFlow 1.0. To maintain backwards compatibility, we add\r\n      # an argument check here:\r\n      if 'reuse' in inspect.getargspec(\r\n          tf.contrib.rnn.BasicLSTMCell.__init__).args:\r\n        return tf.contrib.rnn.BasicLSTMCell(\r\n            size, forget_bias=0.0, state_is_tuple=True,\r\n            reuse=tf.get_variable_scope().reuse)\r\n      else:\r\n        return tf.contrib.rnn.BasicLSTMCell(\r\n            size, forget_bias=0.0, state_is_tuple=True)\r\n    attn_cell = lstm_cell\r\n    \r\n    lstm_creator = lstm_cell\r\n    if is_training and keep_prob < 1:\r\n      cell_creator = lambda:tf.contrib.rnn.DropoutWrapper(\r\n          lstm_creator(), output_keep_prob=keep_prob)\r\n    else:\r\n      cell_creator = lstm_creator\r\n\r\n    cell = tf.contrib.rnn.MultiRNNCell([cell_creator() for _ in range(num_layers)], state_is_tuple=True)\r\n```\r\n\r\nIt is now fully working"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/294376020", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-294376020", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 294376020, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDM3NjAyMA==", "user": {"login": "aep", "id": 136926, "node_id": "MDQ6VXNlcjEzNjkyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/136926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aep", "html_url": "https://github.com/aep", "followers_url": "https://api.github.com/users/aep/followers", "following_url": "https://api.github.com/users/aep/following{/other_user}", "gists_url": "https://api.github.com/users/aep/gists{/gist_id}", "starred_url": "https://api.github.com/users/aep/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aep/subscriptions", "organizations_url": "https://api.github.com/users/aep/orgs", "repos_url": "https://api.github.com/users/aep/repos", "events_url": "https://api.github.com/users/aep/events{/privacy}", "received_events_url": "https://api.github.com/users/aep/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-16T21:42:34Z", "updated_at": "2017-04-16T21:42:34Z", "author_association": "NONE", "body": "trying to get this thing running, which results in the same error: \r\n\r\nhttps://gist.github.com/danijar/c7ec9a30052127c7a1ad169eeb83f159#file-blog_tensorflow_sequence_classification-py-L38\r\n\r\n\r\n@pltrdy 's solution didn't do it for me oddly. I'm getting\r\n\r\n```\r\nValueError: Variable rnn/multi_rnn_cell/cell_0/basic_lstm_cell/weights does not exist, or was not created with tf.get_variable(). Did you mean to set reuse=None in VarScope?\r\n```\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/294753493", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-294753493", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 294753493, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDc1MzQ5Mw==", "user": {"login": "pltrdy", "id": 6375843, "node_id": "MDQ6VXNlcjYzNzU4NDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/6375843?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pltrdy", "html_url": "https://github.com/pltrdy", "followers_url": "https://api.github.com/users/pltrdy/followers", "following_url": "https://api.github.com/users/pltrdy/following{/other_user}", "gists_url": "https://api.github.com/users/pltrdy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pltrdy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pltrdy/subscriptions", "organizations_url": "https://api.github.com/users/pltrdy/orgs", "repos_url": "https://api.github.com/users/pltrdy/repos", "events_url": "https://api.github.com/users/pltrdy/events{/privacy}", "received_events_url": "https://api.github.com/users/pltrdy/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-18T09:48:42Z", "updated_at": "2017-04-18T09:48:42Z", "author_association": "NONE", "body": "@aep did you use the function of https://github.com/tensorflow/models/blob/master/tutorials/rnn/ptb/ptb_word_lm.py#L112 I mention at the end of my post (now edited to be more clear)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/297888598", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-297888598", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 297888598, "node_id": "MDEyOklzc3VlQ29tbWVudDI5Nzg4ODU5OA==", "user": {"login": "Tshzzz", "id": 16899081, "node_id": "MDQ6VXNlcjE2ODk5MDgx", "avatar_url": "https://avatars1.githubusercontent.com/u/16899081?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tshzzz", "html_url": "https://github.com/Tshzzz", "followers_url": "https://api.github.com/users/Tshzzz/followers", "following_url": "https://api.github.com/users/Tshzzz/following{/other_user}", "gists_url": "https://api.github.com/users/Tshzzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tshzzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tshzzz/subscriptions", "organizations_url": "https://api.github.com/users/Tshzzz/orgs", "repos_url": "https://api.github.com/users/Tshzzz/repos", "events_url": "https://api.github.com/users/Tshzzz/events{/privacy}", "received_events_url": "https://api.github.com/users/Tshzzz/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-28T02:12:32Z", "updated_at": "2017-04-28T02:12:32Z", "author_association": "NONE", "body": "    cells=[]\r\n    for _ in range(15):\r\n        cell = create_lstm_cell(config)\r\n        cells.append(cell)\r\n    lsmt_layers = rnn.MultiRNNCell(cells)\r\nit solved my problem"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/297927043", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-297927043", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 297927043, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NzkyNzA0Mw==", "user": {"login": "dsoiM", "id": 26181887, "node_id": "MDQ6VXNlcjI2MTgxODg3", "avatar_url": "https://avatars2.githubusercontent.com/u/26181887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsoiM", "html_url": "https://github.com/dsoiM", "followers_url": "https://api.github.com/users/dsoiM/followers", "following_url": "https://api.github.com/users/dsoiM/following{/other_user}", "gists_url": "https://api.github.com/users/dsoiM/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsoiM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsoiM/subscriptions", "organizations_url": "https://api.github.com/users/dsoiM/orgs", "repos_url": "https://api.github.com/users/dsoiM/repos", "events_url": "https://api.github.com/users/dsoiM/events{/privacy}", "received_events_url": "https://api.github.com/users/dsoiM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-28T07:21:09Z", "updated_at": "2017-04-28T07:33:17Z", "author_association": "NONE", "body": "Managed to fix this issue by installing older version of Tensorflow:\r\n`pip install -Iv tensorflow==1.0`\r\n\r\nI was receiving the error when executing the seq2seq tutorial\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298350307", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-298350307", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 298350307, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODM1MDMwNw==", "user": {"login": "kyteague", "id": 189102, "node_id": "MDQ6VXNlcjE4OTEwMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/189102?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyteague", "html_url": "https://github.com/kyteague", "followers_url": "https://api.github.com/users/kyteague/followers", "following_url": "https://api.github.com/users/kyteague/following{/other_user}", "gists_url": "https://api.github.com/users/kyteague/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyteague/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyteague/subscriptions", "organizations_url": "https://api.github.com/users/kyteague/orgs", "repos_url": "https://api.github.com/users/kyteague/repos", "events_url": "https://api.github.com/users/kyteague/events{/privacy}", "received_events_url": "https://api.github.com/users/kyteague/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-01T15:06:56Z", "updated_at": "2017-05-01T15:06:56Z", "author_association": "NONE", "body": "In regards to what @ebrevdo said, I think the solution is not to fix the legacy seq2seq code, but to update the tutorial to use the `contrib.seq2seq` package instead, which is actively maintained.  It is quite demoralizing when the first tensorflow program you ever run spits out a bunch of errors.  If I have some time this week, I'll submit a PR.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298389208", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-298389208", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 298389208, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODM4OTIwOA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-01T18:03:33Z", "updated_at": "2017-05-01T18:03:33Z", "author_association": "CONTRIBUTOR", "body": "We're working on a new seq2seq tutorial. We had hoped to release by end of\nlast month but are getting delayed.  It will use the new API.\n\nOn May 1, 2017 8:07 AM, \"Kyle Teague\" <notifications@github.com> wrote:\n\n> In regards to what @ebrevdo <https://github.com/ebrevdo> said, I think\n> the solution is not to fix the legacy seq2seq code, but to update the\n> tutorial to use the contrib.seq2seq package instead, which is actively\n> maintained. It is quite demoralizing when the first tensorflow program you\n> ever run spits out a bunch of errors. If I have some time this week, I'll\n> submit a PR.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-298350307>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim587xZx9Gi4-yXmwccSum8_Trc1oks5r1fUogaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/299366774", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-299366774", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 299366774, "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTM2Njc3NA==", "user": {"login": "njuzrs", "id": 25944478, "node_id": "MDQ6VXNlcjI1OTQ0NDc4", "avatar_url": "https://avatars3.githubusercontent.com/u/25944478?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njuzrs", "html_url": "https://github.com/njuzrs", "followers_url": "https://api.github.com/users/njuzrs/followers", "following_url": "https://api.github.com/users/njuzrs/following{/other_user}", "gists_url": "https://api.github.com/users/njuzrs/gists{/gist_id}", "starred_url": "https://api.github.com/users/njuzrs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njuzrs/subscriptions", "organizations_url": "https://api.github.com/users/njuzrs/orgs", "repos_url": "https://api.github.com/users/njuzrs/repos", "events_url": "https://api.github.com/users/njuzrs/events{/privacy}", "received_events_url": "https://api.github.com/users/njuzrs/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-05T04:16:16Z", "updated_at": "2017-05-05T04:16:16Z", "author_association": "NONE", "body": "@ebrevdo I meet the same error when running the sequence_to_sequence model on the tensorflow1.1 website. And I have try to use 'reuse' parameter but failed. Could you tell me when the new seq2seq tutorial will be released?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/299485034", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-299485034", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 299485034, "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTQ4NTAzNA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-05T14:47:33Z", "updated_at": "2017-05-05T14:47:33Z", "author_association": "CONTRIBUTOR", "body": "Looks like at the same time as tf 1.2, since we will rely on some new\nfeatures of that release.\n\nOn May 4, 2017 9:16 PM, \"njuzrs\" <notifications@github.com> wrote:\n\n> @ebrevdo <https://github.com/ebrevdo> I meet the same error when running\n> the sequence_to_sequence model on the tensorflow1.1 website. And I have try\n> to use 'reuse' parameter but failed. Could you tell me when the new seq2seq\n> tutorial will be released?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-299366774>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim8_kFTM7-SsXQAA-Ar0dfhHMGT0Zks5r2qKngaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/299807656", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-299807656", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 299807656, "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTgwNzY1Ng==", "user": {"login": "PratsBhatt", "id": 15447437, "node_id": "MDQ6VXNlcjE1NDQ3NDM3", "avatar_url": "https://avatars3.githubusercontent.com/u/15447437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PratsBhatt", "html_url": "https://github.com/PratsBhatt", "followers_url": "https://api.github.com/users/PratsBhatt/followers", "following_url": "https://api.github.com/users/PratsBhatt/following{/other_user}", "gists_url": "https://api.github.com/users/PratsBhatt/gists{/gist_id}", "starred_url": "https://api.github.com/users/PratsBhatt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PratsBhatt/subscriptions", "organizations_url": "https://api.github.com/users/PratsBhatt/orgs", "repos_url": "https://api.github.com/users/PratsBhatt/repos", "events_url": "https://api.github.com/users/PratsBhatt/events{/privacy}", "received_events_url": "https://api.github.com/users/PratsBhatt/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-08T08:40:15Z", "updated_at": "2017-05-08T08:40:15Z", "author_association": "NONE", "body": "@ebrevdo I am as well facing the same issue and unable to progress with seq2seq. It will be really helpful if you could let us/me know what is a probable date for a new tutorial.\r\nThanks a lot for your help.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300056243", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-300056243", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 300056243, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDA1NjI0Mw==", "user": {"login": "tanmayb123", "id": 9329669, "node_id": "MDQ6VXNlcjkzMjk2Njk=", "avatar_url": "https://avatars2.githubusercontent.com/u/9329669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanmayb123", "html_url": "https://github.com/tanmayb123", "followers_url": "https://api.github.com/users/tanmayb123/followers", "following_url": "https://api.github.com/users/tanmayb123/following{/other_user}", "gists_url": "https://api.github.com/users/tanmayb123/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanmayb123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanmayb123/subscriptions", "organizations_url": "https://api.github.com/users/tanmayb123/orgs", "repos_url": "https://api.github.com/users/tanmayb123/repos", "events_url": "https://api.github.com/users/tanmayb123/events{/privacy}", "received_events_url": "https://api.github.com/users/tanmayb123/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-09T04:10:11Z", "updated_at": "2017-05-09T04:10:11Z", "author_association": "NONE", "body": "Installing using `pip install tensorflow==1.0` (Tensorflow 1.0) is working for me (translate tutorial)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300075219", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-300075219", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 300075219, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDA3NTIxOQ==", "user": {"login": "PratsBhatt", "id": 15447437, "node_id": "MDQ6VXNlcjE1NDQ3NDM3", "avatar_url": "https://avatars3.githubusercontent.com/u/15447437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PratsBhatt", "html_url": "https://github.com/PratsBhatt", "followers_url": "https://api.github.com/users/PratsBhatt/followers", "following_url": "https://api.github.com/users/PratsBhatt/following{/other_user}", "gists_url": "https://api.github.com/users/PratsBhatt/gists{/gist_id}", "starred_url": "https://api.github.com/users/PratsBhatt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PratsBhatt/subscriptions", "organizations_url": "https://api.github.com/users/PratsBhatt/orgs", "repos_url": "https://api.github.com/users/PratsBhatt/repos", "events_url": "https://api.github.com/users/PratsBhatt/events{/privacy}", "received_events_url": "https://api.github.com/users/PratsBhatt/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-09T06:40:42Z", "updated_at": "2017-05-09T06:40:42Z", "author_association": "NONE", "body": "I have version 1.1.0-rc2."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/301544658", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-301544658", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 301544658, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTU0NDY1OA==", "user": {"login": "mmmmming18", "id": 22080886, "node_id": "MDQ6VXNlcjIyMDgwODg2", "avatar_url": "https://avatars0.githubusercontent.com/u/22080886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmmmming18", "html_url": "https://github.com/mmmmming18", "followers_url": "https://api.github.com/users/mmmmming18/followers", "following_url": "https://api.github.com/users/mmmmming18/following{/other_user}", "gists_url": "https://api.github.com/users/mmmmming18/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmmmming18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmmmming18/subscriptions", "organizations_url": "https://api.github.com/users/mmmmming18/orgs", "repos_url": "https://api.github.com/users/mmmmming18/repos", "events_url": "https://api.github.com/users/mmmmming18/events{/privacy}", "received_events_url": "https://api.github.com/users/mmmmming18/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-15T17:28:28Z", "updated_at": "2017-05-15T17:28:28Z", "author_association": "NONE", "body": "TF1.2 will solve this problem? Please help me how to continue training the model. TF 1.0 works but doesn't have devicewrapper api for multiple GPUs."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/302775899", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-302775899", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 302775899, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjc3NTg5OQ==", "user": {"login": "thomasqjohns", "id": 8973377, "node_id": "MDQ6VXNlcjg5NzMzNzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/8973377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasqjohns", "html_url": "https://github.com/thomasqjohns", "followers_url": "https://api.github.com/users/thomasqjohns/followers", "following_url": "https://api.github.com/users/thomasqjohns/following{/other_user}", "gists_url": "https://api.github.com/users/thomasqjohns/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasqjohns/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasqjohns/subscriptions", "organizations_url": "https://api.github.com/users/thomasqjohns/orgs", "repos_url": "https://api.github.com/users/thomasqjohns/repos", "events_url": "https://api.github.com/users/thomasqjohns/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasqjohns/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-19T18:21:42Z", "updated_at": "2017-05-19T18:22:01Z", "author_association": "NONE", "body": "Having the same problem with tensor flow 1.1. Still working on a solution "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/302837078", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-302837078", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 302837078, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjgzNzA3OA==", "user": {"login": "jtubert", "id": 677913, "node_id": "MDQ6VXNlcjY3NzkxMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/677913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtubert", "html_url": "https://github.com/jtubert", "followers_url": "https://api.github.com/users/jtubert/followers", "following_url": "https://api.github.com/users/jtubert/following{/other_user}", "gists_url": "https://api.github.com/users/jtubert/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtubert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtubert/subscriptions", "organizations_url": "https://api.github.com/users/jtubert/orgs", "repos_url": "https://api.github.com/users/jtubert/repos", "events_url": "https://api.github.com/users/jtubert/events{/privacy}", "received_events_url": "https://api.github.com/users/jtubert/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-20T00:14:26Z", "updated_at": "2017-05-20T00:14:47Z", "author_association": "NONE", "body": "I tried several things, at the end I was able to use tensorflow 1.1 but had to make these changes: (based on Tshzzz above)\r\n\r\nRemove this:\r\n`multicell = rnn.MultiRNNCell([dropcell]*NLAYERS, state_is_tuple=False)`\r\n\r\nAnd add this:\r\ncells=[]\r\nfor _ in range(NLAYERS):\r\n    cell = rnn.DropoutWrapper(tf.contrib.rnn.GRUCell(INTERNALSIZE), input_keep_prob=pkeep)\r\n    cells.append(cell)\r\nmulticell = rnn.MultiRNNCell(cells, state_is_tuple=False)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/302844002", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-302844002", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 302844002, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjg0NDAwMg==", "user": {"login": "prashantserai", "id": 10653125, "node_id": "MDQ6VXNlcjEwNjUzMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/10653125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantserai", "html_url": "https://github.com/prashantserai", "followers_url": "https://api.github.com/users/prashantserai/followers", "following_url": "https://api.github.com/users/prashantserai/following{/other_user}", "gists_url": "https://api.github.com/users/prashantserai/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantserai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantserai/subscriptions", "organizations_url": "https://api.github.com/users/prashantserai/orgs", "repos_url": "https://api.github.com/users/prashantserai/repos", "events_url": "https://api.github.com/users/prashantserai/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantserai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-20T02:02:16Z", "updated_at": "2017-05-20T02:02:16Z", "author_association": "NONE", "body": "@ebrevdo Congratulations, TF 1.2 just got released - was the new tutorial also released somewhere or is it being released anytime soon?\r\n\r\nThanks"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/302879298", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-302879298", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 302879298, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjg3OTI5OA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-20T15:17:52Z", "updated_at": "2017-05-20T15:17:52Z", "author_association": "CONTRIBUTOR", "body": "We'll plan to have an announcement when it's released. Working on it.\n\nOn May 19, 2017 7:02 PM, \"prashantserai\" <notifications@github.com> wrote:\n\n> @ebrevdo <https://github.com/ebrevdo> Congratulations, TF 1.2 just got\n> released - was the new tutorial also released somewhere or is it being\n> released anytime soon?\n>\n> Thanks\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-302844002>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim0RWDzNCXk-bIjKSyHLvgFxUvq2lks5r7km7gaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/303801026", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-303801026", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 303801026, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzgwMTAyNg==", "user": {"login": "ajaanbaahu", "id": 7212076, "node_id": "MDQ6VXNlcjcyMTIwNzY=", "avatar_url": "https://avatars3.githubusercontent.com/u/7212076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajaanbaahu", "html_url": "https://github.com/ajaanbaahu", "followers_url": "https://api.github.com/users/ajaanbaahu/followers", "following_url": "https://api.github.com/users/ajaanbaahu/following{/other_user}", "gists_url": "https://api.github.com/users/ajaanbaahu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajaanbaahu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajaanbaahu/subscriptions", "organizations_url": "https://api.github.com/users/ajaanbaahu/orgs", "repos_url": "https://api.github.com/users/ajaanbaahu/repos", "events_url": "https://api.github.com/users/ajaanbaahu/events{/privacy}", "received_events_url": "https://api.github.com/users/ajaanbaahu/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-24T17:51:17Z", "updated_at": "2017-05-24T17:51:17Z", "author_association": "NONE", "body": "For anyone using tensorflow-gpu==1.1.0  and getting this error, switching to 1.0.0 via pip install tensorflow-gpu==1.0.0 is not going to fix the problem, at least didn't work for me.\r\n\r\nI ran into this issue on both mac and ubuntu and compiling from source worked both times. So:\r\npip install https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.0.0-cp34-cp34m-linux_x86_64.whl"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/303914579", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-303914579", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 303914579, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzkxNDU3OQ==", "user": {"login": "mmmmming18", "id": 22080886, "node_id": "MDQ6VXNlcjIyMDgwODg2", "avatar_url": "https://avatars0.githubusercontent.com/u/22080886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmmmming18", "html_url": "https://github.com/mmmmming18", "followers_url": "https://api.github.com/users/mmmmming18/followers", "following_url": "https://api.github.com/users/mmmmming18/following{/other_user}", "gists_url": "https://api.github.com/users/mmmmming18/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmmmming18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmmmming18/subscriptions", "organizations_url": "https://api.github.com/users/mmmmming18/orgs", "repos_url": "https://api.github.com/users/mmmmming18/repos", "events_url": "https://api.github.com/users/mmmmming18/events{/privacy}", "received_events_url": "https://api.github.com/users/mmmmming18/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-25T03:44:51Z", "updated_at": "2017-05-25T03:44:51Z", "author_association": "NONE", "body": "@ajaanbaahu Still waiting for tf1.2 new seq2seq tutorial."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/304205997", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-304205997", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 304205997, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDIwNTk5Nw==", "user": {"login": "saching270", "id": 20928700, "node_id": "MDQ6VXNlcjIwOTI4NzAw", "avatar_url": "https://avatars0.githubusercontent.com/u/20928700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saching270", "html_url": "https://github.com/saching270", "followers_url": "https://api.github.com/users/saching270/followers", "following_url": "https://api.github.com/users/saching270/following{/other_user}", "gists_url": "https://api.github.com/users/saching270/gists{/gist_id}", "starred_url": "https://api.github.com/users/saching270/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saching270/subscriptions", "organizations_url": "https://api.github.com/users/saching270/orgs", "repos_url": "https://api.github.com/users/saching270/repos", "events_url": "https://api.github.com/users/saching270/events{/privacy}", "received_events_url": "https://api.github.com/users/saching270/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-26T06:48:21Z", "updated_at": "2017-05-26T06:48:21Z", "author_association": "NONE", "body": "It worked for me using `pip install tensorflow==1.0`."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/304235440", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-304235440", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 304235440, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDIzNTQ0MA==", "user": {"login": "Vimos", "id": 2136700, "node_id": "MDQ6VXNlcjIxMzY3MDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/2136700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vimos", "html_url": "https://github.com/Vimos", "followers_url": "https://api.github.com/users/Vimos/followers", "following_url": "https://api.github.com/users/Vimos/following{/other_user}", "gists_url": "https://api.github.com/users/Vimos/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vimos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vimos/subscriptions", "organizations_url": "https://api.github.com/users/Vimos/orgs", "repos_url": "https://api.github.com/users/Vimos/repos", "events_url": "https://api.github.com/users/Vimos/events{/privacy}", "received_events_url": "https://api.github.com/users/Vimos/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-26T09:25:00Z", "updated_at": "2017-05-26T09:26:34Z", "author_association": "NONE", "body": "For tf r1.2, got deepcopy error. As listed in [sequence to sequence model error #1050](https://github.com/tensorflow/models/issues/1050)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/304566959", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-304566959", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 304566959, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDU2Njk1OQ==", "user": {"login": "SunnerLi", "id": 11500871, "node_id": "MDQ6VXNlcjExNTAwODcx", "avatar_url": "https://avatars0.githubusercontent.com/u/11500871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SunnerLi", "html_url": "https://github.com/SunnerLi", "followers_url": "https://api.github.com/users/SunnerLi/followers", "following_url": "https://api.github.com/users/SunnerLi/following{/other_user}", "gists_url": "https://api.github.com/users/SunnerLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/SunnerLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SunnerLi/subscriptions", "organizations_url": "https://api.github.com/users/SunnerLi/orgs", "repos_url": "https://api.github.com/users/SunnerLi/repos", "events_url": "https://api.github.com/users/SunnerLi/events{/privacy}", "received_events_url": "https://api.github.com/users/SunnerLi/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-29T03:52:35Z", "updated_at": "2017-05-29T03:52:58Z", "author_association": "NONE", "body": "As the rookie, I raise some of my opinion.\r\nThe following code will make this similar mistake occure:\r\n(Piece of my code)\r\n```python\r\nlstm_cell = self.LSTMCell(self.num_hidden)\r\nlstm_entity = tf.contrib.rnn.DropoutWrapper(lstm_cell, output_keep_prob=0.5)\r\nlayer = tf.contrib.rnn.MultiRNNCell([lstm_entity] * self.num_layer)\r\n__, _ = tf.nn.dynamic_rnn(layer, self.data, dtype=tf.float64)\r\n```\r\nThe error dump as the following:\r\n```\r\nTraceback (most recent call last):\r\n  File \"IntentNet.py\", line 71, in <module>\r\n    net = Net(data, target, 5, 1)\r\n  File \"IntentNet.py\", line 45, in __init__\r\n    __, _ = tf.nn.dynamic_rnn(layer, self.data, dtype=tf.float64)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 553, in dynamic_rnn\r\n    dtype=dtype)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 720, in _dynamic_rnn_loop\r\n    swap_memory=swap_memory)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2623, in while_loop\r\n    result = context.BuildLoop(cond, body, loop_vars, shape_invariants)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2456, in BuildLoop\r\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2406, in _BuildLoop\r\n    body_result = body(*packed_vars_for_body)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 705, in _time_step\r\n    (output, new_state) = call_cell()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 691, in <lambda>\r\n    call_cell = lambda: cell(input_t, state)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 953, in __call__\r\n    cur_inp, new_state = cell(cur_inp, cur_state)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 713, in __call__\r\n    output, new_state = self._cell(inputs, state, scope)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 235, in __call__\r\n    with _checked_scope(self, scope or \"basic_lstm_cell\", reuse=self._reuse):\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 77, in _checked_scope\r\n    type(cell).__name__))\r\nValueError: Attempt to reuse RNNCell <tensorflow.contrib.rnn.python.ops.core_rnn_cell_impl.BasicLSTMCell object at 0x7fe4fc7bd150> with a different variable scope than its first use.  First use of cell was with scope 'rnn/multi_rnn_cell/cell_0/basic_lstm_cell', this attempt is with scope 'rnn/multi_rnn_cell/cell_1/basic_lstm_cell'.  Please create a new instance of the cell if you would like it to use a different set of weights.  If before you were using: MultiRNNCell([BasicLSTMCell(...)] * num_layers), change to: MultiRNNCell([BasicLSTMCell(...) for _ in range(num_layers)]).  If before you were using the same cell instance as both the forward and reverse cell of a bidirectional RNN, simply create two instances (one for forward, one for reverse).  In May 2017, we will start transitioning this cell's behavior to use existing stored weights, if any, when it is called with scope=None (which can lead to silent model degradation, so this error will remain until then.)\r\n```\r\n\r\nBut after I do the revision, It can work.\r\n```python\r\n\"\"\"\r\nlstm_cell = self.LSTMCell(self.num_hidden)\r\nlstm_entity = tf.contrib.rnn.DropoutWrapper(lstm_cell, output_keep_prob=0.5)\r\nlayer = tf.contrib.rnn.MultiRNNCell([lstm_entity] * self.num_layer)\r\n\"\"\"\r\nlayer = []\r\nfor i in range(self.num_layer):\r\n    lstm_cell = self.LSTMCell(self.num_hidden)\r\n    lstm_entity = tf.contrib.rnn.DropoutWrapper(lstm_cell, output_keep_prob=0.5)\r\n    layer.append(lstm_entity)\r\nlayer = tf.contrib.rnn.MultiRNNCell(layer)\r\n__, _ = tf.nn.dynamic_rnn(layer, self.data, dtype=tf.float64)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/305672569", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-305672569", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 305672569, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTY3MjU2OQ==", "user": {"login": "philipperemy", "id": 4516927, "node_id": "MDQ6VXNlcjQ1MTY5Mjc=", "avatar_url": "https://avatars1.githubusercontent.com/u/4516927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philipperemy", "html_url": "https://github.com/philipperemy", "followers_url": "https://api.github.com/users/philipperemy/followers", "following_url": "https://api.github.com/users/philipperemy/following{/other_user}", "gists_url": "https://api.github.com/users/philipperemy/gists{/gist_id}", "starred_url": "https://api.github.com/users/philipperemy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philipperemy/subscriptions", "organizations_url": "https://api.github.com/users/philipperemy/orgs", "repos_url": "https://api.github.com/users/philipperemy/repos", "events_url": "https://api.github.com/users/philipperemy/events{/privacy}", "received_events_url": "https://api.github.com/users/philipperemy/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-02T02:29:57Z", "updated_at": "2017-06-02T02:30:36Z", "author_association": "NONE", "body": "None of those workarounds worked for me with Tensorflow 1.1\r\n\r\nI'm using `seq2seq` model with `MultiRNNCell` cells.\r\n\r\nI had to reverse back to 1.0.1: `pip3 install tensorflow==1.0`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/306556654", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-306556654", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 306556654, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjU1NjY1NA==", "user": {"login": "rileyedmunds", "id": 16725448, "node_id": "MDQ6VXNlcjE2NzI1NDQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/16725448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rileyedmunds", "html_url": "https://github.com/rileyedmunds", "followers_url": "https://api.github.com/users/rileyedmunds/followers", "following_url": "https://api.github.com/users/rileyedmunds/following{/other_user}", "gists_url": "https://api.github.com/users/rileyedmunds/gists{/gist_id}", "starred_url": "https://api.github.com/users/rileyedmunds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rileyedmunds/subscriptions", "organizations_url": "https://api.github.com/users/rileyedmunds/orgs", "repos_url": "https://api.github.com/users/rileyedmunds/repos", "events_url": "https://api.github.com/users/rileyedmunds/events{/privacy}", "received_events_url": "https://api.github.com/users/rileyedmunds/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-06T17:20:20Z", "updated_at": "2017-06-06T17:20:49Z", "author_association": "NONE", "body": "Anyone have these issues when working with legacy_seq2seq.rnn_decoder()? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/306693622", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-306693622", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 306693622, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjY5MzYyMg==", "user": {"login": "supermeatboy82", "id": 20217387, "node_id": "MDQ6VXNlcjIwMjE3Mzg3", "avatar_url": "https://avatars0.githubusercontent.com/u/20217387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/supermeatboy82", "html_url": "https://github.com/supermeatboy82", "followers_url": "https://api.github.com/users/supermeatboy82/followers", "following_url": "https://api.github.com/users/supermeatboy82/following{/other_user}", "gists_url": "https://api.github.com/users/supermeatboy82/gists{/gist_id}", "starred_url": "https://api.github.com/users/supermeatboy82/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/supermeatboy82/subscriptions", "organizations_url": "https://api.github.com/users/supermeatboy82/orgs", "repos_url": "https://api.github.com/users/supermeatboy82/repos", "events_url": "https://api.github.com/users/supermeatboy82/events{/privacy}", "received_events_url": "https://api.github.com/users/supermeatboy82/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-07T05:50:50Z", "updated_at": "2017-06-07T05:51:29Z", "author_association": "NONE", "body": "@oxwsds As you said, I change input args cell of tf.contrib.legacy_seq2seq.embedding_attention_seq2seq to two different cell {encoder_cells, decoder_cells}. Finally, I get seq2seq model worked.  After 73200 setps, I get perplexity 5.54.\r\nThen I run decode part, \r\n >> Who is the president of the United States?\r\nQui est le pr\u00e9sident des \u00c9tats-Unis ?\r\n\r\nProblem solved.  Thanks."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/308729142", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-308729142", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 308729142, "node_id": "MDEyOklzc3VlQ29tbWVudDMwODcyOTE0Mg==", "user": {"login": "ypruan", "id": 20205901, "node_id": "MDQ6VXNlcjIwMjA1OTAx", "avatar_url": "https://avatars1.githubusercontent.com/u/20205901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ypruan", "html_url": "https://github.com/ypruan", "followers_url": "https://api.github.com/users/ypruan/followers", "following_url": "https://api.github.com/users/ypruan/following{/other_user}", "gists_url": "https://api.github.com/users/ypruan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ypruan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ypruan/subscriptions", "organizations_url": "https://api.github.com/users/ypruan/orgs", "repos_url": "https://api.github.com/users/ypruan/repos", "events_url": "https://api.github.com/users/ypruan/events{/privacy}", "received_events_url": "https://api.github.com/users/ypruan/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-15T13:28:28Z", "updated_at": "2017-06-15T13:28:28Z", "author_association": "NONE", "body": "@doncat99 \r\nIt seems that `copy.deepcopy(cell)`  in `seq2seq.py`  doesn't make effect.\r\nSo I change the related part in `seq2seq_model.py` to \r\n\r\n```\r\nif num_layers > 1:\r\n      cell_enc = tf.contrib.rnn.MultiRNNCell([single_cell() for _ in range(num_layers)])\r\n      cell_dec = tf.contrib.rnn.MultiRNNCell([single_cell() for _ in range(num_layers)])\r\n\r\n    # The seq2seq function: we use embedding for the input and attention.\r\n    def seq2seq_f(encoder_inputs, decoder_inputs, do_decode):\r\n      return seq2seq.embedding_attention_seq2seq(\r\n          encoder_inputs,\r\n          decoder_inputs,\r\n          cell_enc,\r\n          cell_dec,\r\n          num_encoder_symbols=source_vocab_size,\r\n          num_decoder_symbols=target_vocab_size,\r\n          embedding_size=size,\r\n          output_projection=output_projection,\r\n          feed_previous=do_decode,\r\n          dtype=dtype)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/309395852", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-309395852", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 309395852, "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTM5NTg1Mg==", "user": {"login": "martinambition", "id": 11517121, "node_id": "MDQ6VXNlcjExNTE3MTIx", "avatar_url": "https://avatars2.githubusercontent.com/u/11517121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinambition", "html_url": "https://github.com/martinambition", "followers_url": "https://api.github.com/users/martinambition/followers", "following_url": "https://api.github.com/users/martinambition/following{/other_user}", "gists_url": "https://api.github.com/users/martinambition/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinambition/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinambition/subscriptions", "organizations_url": "https://api.github.com/users/martinambition/orgs", "repos_url": "https://api.github.com/users/martinambition/repos", "events_url": "https://api.github.com/users/martinambition/events{/privacy}", "received_events_url": "https://api.github.com/users/martinambition/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-19T10:04:31Z", "updated_at": "2017-06-19T10:04:31Z", "author_association": "NONE", "body": "@supermeatboy82 , Could you share your code?\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/310064260", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-310064260", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 310064260, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDA2NDI2MA==", "user": {"login": "cpury", "id": 1777905, "node_id": "MDQ6VXNlcjE3Nzc5MDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1777905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpury", "html_url": "https://github.com/cpury", "followers_url": "https://api.github.com/users/cpury/followers", "following_url": "https://api.github.com/users/cpury/following{/other_user}", "gists_url": "https://api.github.com/users/cpury/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpury/subscriptions", "organizations_url": "https://api.github.com/users/cpury/orgs", "repos_url": "https://api.github.com/users/cpury/repos", "events_url": "https://api.github.com/users/cpury/events{/privacy}", "received_events_url": "https://api.github.com/users/cpury/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-21T12:32:48Z", "updated_at": "2017-06-21T13:33:22Z", "author_association": "NONE", "body": "Upgrading to Tensorflow 1.2.0 and generating the cells in a loop instead of list multiplication fixed this for me."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/310248991", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-310248991", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 310248991, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDI0ODk5MQ==", "user": {"login": "syw2014", "id": 6802806, "node_id": "MDQ6VXNlcjY4MDI4MDY=", "avatar_url": "https://avatars2.githubusercontent.com/u/6802806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syw2014", "html_url": "https://github.com/syw2014", "followers_url": "https://api.github.com/users/syw2014/followers", "following_url": "https://api.github.com/users/syw2014/following{/other_user}", "gists_url": "https://api.github.com/users/syw2014/gists{/gist_id}", "starred_url": "https://api.github.com/users/syw2014/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syw2014/subscriptions", "organizations_url": "https://api.github.com/users/syw2014/orgs", "repos_url": "https://api.github.com/users/syw2014/repos", "events_url": "https://api.github.com/users/syw2014/events{/privacy}", "received_events_url": "https://api.github.com/users/syw2014/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-22T01:21:13Z", "updated_at": "2017-06-22T01:21:13Z", "author_association": "NONE", "body": "Got the error with TF1.2 when running translate.py, details:\r\nname: GeForce GTX 1080 Ti\r\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.582\r\npciBusID 0000:02:00.0\r\nTotal memory: 10.91GiB\r\nFree memory: 10.76GiB\r\n2017-06-22 09:15:04.485252: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 \r\n2017-06-22 09:15:04.485256: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y \r\n2017-06-22 09:15:04.485265: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:02:00.0)\r\nCreating 3 layers of 1024 units.\r\nTraceback (most recent call last):\r\n  File \"translate.py\", line 322, in <module>\r\n    tf.app.run()\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"translate.py\", line 319, in main\r\n    train()\r\n  File \"translate.py\", line 178, in train\r\n    model = create_model(sess, False)\r\n  File \"translate.py\", line 136, in create_model\r\n    dtype=dtype)\r\n  File \"/data/research/github/dl/tensorflow/tensorflow/models/tutorials/rnn/translate/seq2seq_model.py\", line 179, in __init__\r\n    softmax_loss_function=softmax_loss_function)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1206, in model_with_buckets\r\n    decoder_inputs[:bucket[1]])\r\n  File \"/data/research/github/dl/tensorflow/tensorflow/models/tutorials/rnn/translate/seq2seq_model.py\", line 178, in <lambda>\r\n    lambda x, y: seq2seq_f(x, y, False),\r\n  File \"/data/research/github/dl/tensorflow/tensorflow/models/tutorials/rnn/translate/seq2seq_model.py\", line 142, in seq2seq_f\r\n    dtype=dtype)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 848, in embedding_attention_seq2seq\r\n    encoder_cell = copy.deepcopy(cell)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 174, in deepcopy\r\n    y = copier(memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 476, in __deepcopy__\r\n    setattr(result, k, copy.deepcopy(v, memo))\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 237, in _deepcopy_tuple\r\n    y.append(deepcopy(a, memo))\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/lscm/opt/anaconda2/lib/python2.7/copy.py\", line 343, in _reconstruct\r\n    y.__dict__.update(state)\r\nAttributeError: 'NoneType' object has no attribute 'update'\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/310561836", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-310561836", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 310561836, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDU2MTgzNg==", "user": {"login": "Miopas", "id": 10841135, "node_id": "MDQ6VXNlcjEwODQxMTM1", "avatar_url": "https://avatars3.githubusercontent.com/u/10841135?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Miopas", "html_url": "https://github.com/Miopas", "followers_url": "https://api.github.com/users/Miopas/followers", "following_url": "https://api.github.com/users/Miopas/following{/other_user}", "gists_url": "https://api.github.com/users/Miopas/gists{/gist_id}", "starred_url": "https://api.github.com/users/Miopas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Miopas/subscriptions", "organizations_url": "https://api.github.com/users/Miopas/orgs", "repos_url": "https://api.github.com/users/Miopas/repos", "events_url": "https://api.github.com/users/Miopas/events{/privacy}", "received_events_url": "https://api.github.com/users/Miopas/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-23T03:30:15Z", "updated_at": "2017-06-23T03:30:15Z", "author_association": "NONE", "body": "I also met the error caused by `copy.deepcopy(cell)` in `embedding_attention_seq2seq()` when running `self_test()` in the translate model in tutorial. \r\nI tried to change the codes in `seq2seq_f()` in `Seq2SeqModel` as follows:\r\n\r\n```\r\n    def seq2seq_f(encoder_inputs, decoder_inputs, do_decode=False):\r\n        tmp_cell = copy.deepcopy(cell) #new\r\n        return tf.contrib.legacy_seq2seq.embedding_attention_seq2seq(\r\n            encoder_inputs,\r\n            decoder_inputs,\r\n            tmp_cell, #new\r\n            num_encoder_symbols=source_vocab_size,\r\n            num_decoder_symbols=target_vocab_size,\r\n            embedding_size=size,\r\n            output_projection=output_projection,\r\n            feed_previous=do_decode,\r\n            dtype=dtype)\r\n```\r\nThen there is no error now.\r\nBUT as a rookie I don't know whether the codes here work as before and it seems the changes make the model run slower.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/310617684", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-310617684", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 310617684, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDYxNzY4NA==", "user": {"login": "PratsBhatt", "id": 15447437, "node_id": "MDQ6VXNlcjE1NDQ3NDM3", "avatar_url": "https://avatars3.githubusercontent.com/u/15447437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PratsBhatt", "html_url": "https://github.com/PratsBhatt", "followers_url": "https://api.github.com/users/PratsBhatt/followers", "following_url": "https://api.github.com/users/PratsBhatt/following{/other_user}", "gists_url": "https://api.github.com/users/PratsBhatt/gists{/gist_id}", "starred_url": "https://api.github.com/users/PratsBhatt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PratsBhatt/subscriptions", "organizations_url": "https://api.github.com/users/PratsBhatt/orgs", "repos_url": "https://api.github.com/users/PratsBhatt/repos", "events_url": "https://api.github.com/users/PratsBhatt/events{/privacy}", "received_events_url": "https://api.github.com/users/PratsBhatt/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-23T09:22:58Z", "updated_at": "2017-06-23T09:22:58Z", "author_association": "NONE", "body": "I would like to update everyone that I downgraded the tensorflow to 1.0.0 (tensorflow-GPU) and it is working for me. The models are performing as expected. I assume that the CPU version of 1.0.0 should function as expected? Or?.\r\nThanks :)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/310916577", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-310916577", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 310916577, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDkxNjU3Nw==", "user": {"login": "fabiofumarola", "id": 1550672, "node_id": "MDQ6VXNlcjE1NTA2NzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1550672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabiofumarola", "html_url": "https://github.com/fabiofumarola", "followers_url": "https://api.github.com/users/fabiofumarola/followers", "following_url": "https://api.github.com/users/fabiofumarola/following{/other_user}", "gists_url": "https://api.github.com/users/fabiofumarola/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabiofumarola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabiofumarola/subscriptions", "organizations_url": "https://api.github.com/users/fabiofumarola/orgs", "repos_url": "https://api.github.com/users/fabiofumarola/repos", "events_url": "https://api.github.com/users/fabiofumarola/events{/privacy}", "received_events_url": "https://api.github.com/users/fabiofumarola/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-25T17:37:25Z", "updated_at": "2017-06-25T17:37:25Z", "author_association": "NONE", "body": "Hi guys, I don't know if you're still interested on it, but I found that the problem is related to the operation of copying the cell passed as params to the `embedding_attention_seq2seq` function. This is because the same cell definition is used both for encoder and decoder. I think the tutorial is deprecated since it uses a seq2seq model with bucketing in contrast to a dynamic seq2seq. But, I'm pasting a modified function that works. The function is updated in the file `tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py`.\r\n\r\nthanks,\r\nFabio\r\n\r\n```!python\r\ndef embedding_attention_seq2seq(encoder_inputs,\r\n                                decoder_inputs,\r\n                                enc_cell,\r\n                                dec_cell,\r\n                                num_encoder_symbols,\r\n                                num_decoder_symbols,\r\n                                embedding_size,\r\n                                num_heads=1,\r\n                                output_projection=None,\r\n                                feed_previous=False,\r\n                                dtype=None,\r\n                                scope=None,\r\n                                initial_state_attention=False):\r\n  \"\"\"Embedding sequence-to-sequence model with attention.\r\n\r\n  This model first embeds encoder_inputs by a newly created embedding (of shape\r\n  [num_encoder_symbols x input_size]). Then it runs an RNN to encode\r\n  embedded encoder_inputs into a state vector. It keeps the outputs of this\r\n  RNN at every step to use for attention later. Next, it embeds decoder_inputs\r\n  by another newly created embedding (of shape [num_decoder_symbols x\r\n  input_size]). Then it runs attention decoder, initialized with the last\r\n  encoder state, on embedded decoder_inputs and attending to encoder outputs.\r\n\r\n  Warning: when output_projection is None, the size of the attention vectors\r\n  and variables will be made proportional to num_decoder_symbols, can be large.\r\n\r\n  Args:\r\n    encoder_inputs: A list of 1D int32 Tensors of shape [batch_size].\r\n    decoder_inputs: A list of 1D int32 Tensors of shape [batch_size].\r\n    cell: tf.nn.rnn_cell.RNNCell defining the cell function and size.\r\n    num_encoder_symbols: Integer; number of symbols on the encoder side.\r\n    num_decoder_symbols: Integer; number of symbols on the decoder side.\r\n    embedding_size: Integer, the length of the embedding vector for each symbol.\r\n    num_heads: Number of attention heads that read from attention_states.\r\n    output_projection: None or a pair (W, B) of output projection weights and\r\n      biases; W has shape [output_size x num_decoder_symbols] and B has\r\n      shape [num_decoder_symbols]; if provided and feed_previous=True, each\r\n      fed previous output will first be multiplied by W and added B.\r\n    feed_previous: Boolean or scalar Boolean Tensor; if True, only the first\r\n      of decoder_inputs will be used (the \"GO\" symbol), and all other decoder\r\n      inputs will be taken from previous outputs (as in embedding_rnn_decoder).\r\n      If False, decoder_inputs are used as given (the standard decoder case).\r\n    dtype: The dtype of the initial RNN state (default: tf.float32).\r\n    scope: VariableScope for the created subgraph; defaults to\r\n      \"embedding_attention_seq2seq\".\r\n    initial_state_attention: If False (default), initial attentions are zero.\r\n      If True, initialize the attentions from the initial state and attention\r\n      states.\r\n\r\n  Returns:\r\n    A tuple of the form (outputs, state), where:\r\n      outputs: A list of the same length as decoder_inputs of 2D Tensors with\r\n        shape [batch_size x num_decoder_symbols] containing the generated\r\n        outputs.\r\n      state: The state of each decoder cell at the final time-step.\r\n        It is a 2D Tensor of shape [batch_size x cell.state_size].\r\n  \"\"\"\r\n  with variable_scope.variable_scope(\r\n      scope or \"embedding_attention_seq2seq\", dtype=dtype) as scope:\r\n    dtype = scope.dtype\r\n    # Encoder.\r\n\r\n    encoder_cell = enc_cell\r\n\r\n    encoder_cell = core_rnn_cell.EmbeddingWrapper(\r\n        encoder_cell,\r\n        embedding_classes=num_encoder_symbols,\r\n        embedding_size=embedding_size)\r\n    encoder_outputs, encoder_state = rnn.static_rnn(\r\n        encoder_cell, encoder_inputs, dtype=dtype)\r\n\r\n    # First calculate a concatenation of encoder outputs to put attention on.\r\n    top_states = [\r\n        array_ops.reshape(e, [-1, 1, encoder_cell.output_size]) for e in encoder_outputs\r\n    ]\r\n    attention_states = array_ops.concat(top_states, 1)\r\n\r\n    # Decoder.\r\n    output_size = None\r\n    if output_projection is None:\r\n      dec_cell = core_rnn_cell.OutputProjectionWrapper(dec_cell, num_decoder_symbols)\r\n      output_size = num_decoder_symbols\r\n\r\n    if isinstance(feed_previous, bool):\r\n      return embedding_attention_decoder(\r\n          decoder_inputs,\r\n          encoder_state,\r\n          attention_states,\r\n          dec_cell,\r\n          num_decoder_symbols,\r\n          embedding_size,\r\n          num_heads=num_heads,\r\n          output_size=output_size,\r\n          output_projection=output_projection,\r\n          feed_previous=feed_previous,\r\n          initial_state_attention=initial_state_attention)\r\n\r\n    # If feed_previous is a Tensor, we construct 2 graphs and use cond.\r\n    def decoder(feed_previous_bool):\r\n      reuse = None if feed_previous_bool else True\r\n      with variable_scope.variable_scope(\r\n          variable_scope.get_variable_scope(), reuse=reuse):\r\n        outputs, state = embedding_attention_decoder(\r\n            decoder_inputs,\r\n            encoder_state,\r\n            attention_states,\r\n            dec_cell,\r\n            num_decoder_symbols,\r\n            embedding_size,\r\n            num_heads=num_heads,\r\n            output_size=output_size,\r\n            output_projection=output_projection,\r\n            feed_previous=feed_previous_bool,\r\n            update_embedding_for_previous=False,\r\n            initial_state_attention=initial_state_attention)\r\n        state_list = [state]\r\n        if nest.is_sequence(state):\r\n          state_list = nest.flatten(state)\r\n        return outputs + state_list\r\n\r\n    outputs_and_state = control_flow_ops.cond(feed_previous,\r\n                                              lambda: decoder(True),\r\n                                              lambda: decoder(False))\r\n    outputs_len = len(decoder_inputs)  # Outputs length same as decoder inputs.\r\n    state_list = outputs_and_state[outputs_len:]\r\n    state = state_list[0]\r\n    if nest.is_sequence(encoder_state):\r\n      state = nest.pack_sequence_as(\r\n          structure=encoder_state, flat_sequence=state_list)\r\n    return outputs_and_state[:outputs_len], state\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/311003867", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-311003867", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 311003867, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTAwMzg2Nw==", "user": {"login": "PratsBhatt", "id": 15447437, "node_id": "MDQ6VXNlcjE1NDQ3NDM3", "avatar_url": "https://avatars3.githubusercontent.com/u/15447437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PratsBhatt", "html_url": "https://github.com/PratsBhatt", "followers_url": "https://api.github.com/users/PratsBhatt/followers", "following_url": "https://api.github.com/users/PratsBhatt/following{/other_user}", "gists_url": "https://api.github.com/users/PratsBhatt/gists{/gist_id}", "starred_url": "https://api.github.com/users/PratsBhatt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PratsBhatt/subscriptions", "organizations_url": "https://api.github.com/users/PratsBhatt/orgs", "repos_url": "https://api.github.com/users/PratsBhatt/repos", "events_url": "https://api.github.com/users/PratsBhatt/events{/privacy}", "received_events_url": "https://api.github.com/users/PratsBhatt/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-26T09:05:53Z", "updated_at": "2017-06-26T09:05:53Z", "author_association": "NONE", "body": "@fabiofumarola Thank you for the function. Looks really helpful. I also saw that the tutorial is deprecated. I am still waiting for an official tutorial release. Looks like you have used the new api. Do you have any code that can be looked up to start coding on the new api?\r\nAny help is well appreciated. Thank you once again :)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/311189512", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-311189512", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 311189512, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTE4OTUxMg==", "user": {"login": "w268wang", "id": 5669068, "node_id": "MDQ6VXNlcjU2NjkwNjg=", "avatar_url": "https://avatars3.githubusercontent.com/u/5669068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/w268wang", "html_url": "https://github.com/w268wang", "followers_url": "https://api.github.com/users/w268wang/followers", "following_url": "https://api.github.com/users/w268wang/following{/other_user}", "gists_url": "https://api.github.com/users/w268wang/gists{/gist_id}", "starred_url": "https://api.github.com/users/w268wang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/w268wang/subscriptions", "organizations_url": "https://api.github.com/users/w268wang/orgs", "repos_url": "https://api.github.com/users/w268wang/repos", "events_url": "https://api.github.com/users/w268wang/events{/privacy}", "received_events_url": "https://api.github.com/users/w268wang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-26T21:37:35Z", "updated_at": "2017-06-26T21:37:35Z", "author_association": "NONE", "body": "@syw2014 Did you fix your issue?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/311222741", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-311222741", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 311222741, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTIyMjc0MQ==", "user": {"login": "syw2014", "id": 6802806, "node_id": "MDQ6VXNlcjY4MDI4MDY=", "avatar_url": "https://avatars2.githubusercontent.com/u/6802806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syw2014", "html_url": "https://github.com/syw2014", "followers_url": "https://api.github.com/users/syw2014/followers", "following_url": "https://api.github.com/users/syw2014/following{/other_user}", "gists_url": "https://api.github.com/users/syw2014/gists{/gist_id}", "starred_url": "https://api.github.com/users/syw2014/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syw2014/subscriptions", "organizations_url": "https://api.github.com/users/syw2014/orgs", "repos_url": "https://api.github.com/users/syw2014/repos", "events_url": "https://api.github.com/users/syw2014/events{/privacy}", "received_events_url": "https://api.github.com/users/syw2014/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-27T00:59:36Z", "updated_at": "2017-06-27T00:59:36Z", "author_association": "NONE", "body": "@w268wang not yet, still waiting for other solutions, but  comments  of @Miopas may  have a try, and I am trying the solution of @fabiofumarola "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312500996", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312500996", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312500996, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjUwMDk5Ng==", "user": {"login": "sachinh35", "id": 21972708, "node_id": "MDQ6VXNlcjIxOTcyNzA4", "avatar_url": "https://avatars2.githubusercontent.com/u/21972708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sachinh35", "html_url": "https://github.com/sachinh35", "followers_url": "https://api.github.com/users/sachinh35/followers", "following_url": "https://api.github.com/users/sachinh35/following{/other_user}", "gists_url": "https://api.github.com/users/sachinh35/gists{/gist_id}", "starred_url": "https://api.github.com/users/sachinh35/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sachinh35/subscriptions", "organizations_url": "https://api.github.com/users/sachinh35/orgs", "repos_url": "https://api.github.com/users/sachinh35/repos", "events_url": "https://api.github.com/users/sachinh35/events{/privacy}", "received_events_url": "https://api.github.com/users/sachinh35/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-02T16:13:43Z", "updated_at": "2017-07-02T16:17:30Z", "author_association": "NONE", "body": "it says `TypeError: embedding_attention_seq2seq() missing 1 required positional argument: 'dec_cell' `\r\nafter using the update that @fabiofumarola posted. Can you guys please help me?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312502758", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312502758", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312502758, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjUwMjc1OA==", "user": {"login": "fabiofumarola", "id": 1550672, "node_id": "MDQ6VXNlcjE1NTA2NzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1550672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabiofumarola", "html_url": "https://github.com/fabiofumarola", "followers_url": "https://api.github.com/users/fabiofumarola/followers", "following_url": "https://api.github.com/users/fabiofumarola/following{/other_user}", "gists_url": "https://api.github.com/users/fabiofumarola/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabiofumarola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabiofumarola/subscriptions", "organizations_url": "https://api.github.com/users/fabiofumarola/orgs", "repos_url": "https://api.github.com/users/fabiofumarola/repos", "events_url": "https://api.github.com/users/fabiofumarola/events{/privacy}", "received_events_url": "https://api.github.com/users/fabiofumarola/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-02T16:42:44Z", "updated_at": "2017-07-02T16:42:44Z", "author_association": "NONE", "body": "Yes because the update I have proposed require you to change the\nembedding_attention_seq2seq Function. If you go to the source file in you\ntensorflow release you can change the method definition you re self.\n\nOn Sun, 2 Jul 2017 at 18:15, sachinh35 <notifications@github.com> trote\n\n> it says TypeError: embedding_attention_seq2seq() missing 1 required\n> positional argument: 'dec_cell'\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312500996>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABepUEc3W8m5CVDQGnCLu4dcJVFwwLDZks5sJ8IOgaJpZM4MWl4f>\n> .\n>\n-- \nSent from Gmail Mobile\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312503106", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312503106", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312503106, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjUwMzEwNg==", "user": {"login": "sachinh35", "id": 21972708, "node_id": "MDQ6VXNlcjIxOTcyNzA4", "avatar_url": "https://avatars2.githubusercontent.com/u/21972708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sachinh35", "html_url": "https://github.com/sachinh35", "followers_url": "https://api.github.com/users/sachinh35/followers", "following_url": "https://api.github.com/users/sachinh35/following{/other_user}", "gists_url": "https://api.github.com/users/sachinh35/gists{/gist_id}", "starred_url": "https://api.github.com/users/sachinh35/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sachinh35/subscriptions", "organizations_url": "https://api.github.com/users/sachinh35/orgs", "repos_url": "https://api.github.com/users/sachinh35/repos", "events_url": "https://api.github.com/users/sachinh35/events{/privacy}", "received_events_url": "https://api.github.com/users/sachinh35/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-02T16:49:12Z", "updated_at": "2017-07-02T16:49:12Z", "author_association": "NONE", "body": "Yes i did the same thing. I changed the function in seq2seq.py file in the tensorflow release. Still i am getting the same error. Is there one more argument to the function?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312510116", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312510116", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312510116, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjUxMDExNg==", "user": {"login": "fabiofumarola", "id": 1550672, "node_id": "MDQ6VXNlcjE1NTA2NzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1550672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabiofumarola", "html_url": "https://github.com/fabiofumarola", "followers_url": "https://api.github.com/users/fabiofumarola/followers", "following_url": "https://api.github.com/users/fabiofumarola/following{/other_user}", "gists_url": "https://api.github.com/users/fabiofumarola/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabiofumarola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabiofumarola/subscriptions", "organizations_url": "https://api.github.com/users/fabiofumarola/orgs", "repos_url": "https://api.github.com/users/fabiofumarola/repos", "events_url": "https://api.github.com/users/fabiofumarola/events{/privacy}", "received_events_url": "https://api.github.com/users/fabiofumarola/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-02T18:55:56Z", "updated_at": "2017-07-02T18:55:56Z", "author_association": "NONE", "body": "Yes, now in you code you need to specify to rnn_cells. One for the encoder\nand another for the decoder.\n\nOn Sun, 2 Jul 2017 at 20:54, fabio fumarola <fabiofumarola@gmail.com> wrote:\n\n> Yes\n>\n> On Sun, 2 Jul 2017 at 18:50, sachinh35 <notifications@github.com> wrote:\n>\n>> Yes i did the same thing. I changed the function in seq2seq.py file in\n>> the tensorflow release. Still i am getting the same error. Is there one\n>> more argument to the function?\n>>\n>> \u2014\n>> You are receiving this because you were mentioned.\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312503106>,\n>> or mute the thread\n>> <https://github.com/notifications/unsubscribe-auth/ABepUOXTQC_mzLuhcwW0iZRVkLmmr8yIks5sJ8pugaJpZM4MWl4f>\n>> .\n>>\n> --\nSent from Gmail Mobile\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312679587", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312679587", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312679587, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjY3OTU4Nw==", "user": {"login": "sachinh35", "id": 21972708, "node_id": "MDQ6VXNlcjIxOTcyNzA4", "avatar_url": "https://avatars2.githubusercontent.com/u/21972708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sachinh35", "html_url": "https://github.com/sachinh35", "followers_url": "https://api.github.com/users/sachinh35/followers", "following_url": "https://api.github.com/users/sachinh35/following{/other_user}", "gists_url": "https://api.github.com/users/sachinh35/gists{/gist_id}", "starred_url": "https://api.github.com/users/sachinh35/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sachinh35/subscriptions", "organizations_url": "https://api.github.com/users/sachinh35/orgs", "repos_url": "https://api.github.com/users/sachinh35/repos", "events_url": "https://api.github.com/users/sachinh35/events{/privacy}", "received_events_url": "https://api.github.com/users/sachinh35/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-03T15:45:37Z", "updated_at": "2017-07-03T15:48:12Z", "author_association": "NONE", "body": "I am totally new to this. Maybe this a pretty basic question but could you tell what argument to be passed as the decoder cell in this code? I am trying to develop the seq2seq as shown in the tensorflow tutorial using own dataset. \r\n\r\n`\r\nfrom __future__ import absolute_import\r\nfrom __future__ import division\r\nfrom __future__ import print_function\r\n\r\nimport random\r\n\r\nimport numpy as np\r\nfrom six.moves import xrange  # pylint: disable=redefined-builtin\r\nimport tensorflow as tf\r\n\r\nimport data_utils\r\n\r\n\r\nclass Seq2SeqModel(object):\r\n  def __init__(self,\r\n               source_vocab_size,\r\n               target_vocab_size,\r\n               buckets,\r\n               size,\r\n               num_layers,\r\n               max_gradient_norm,\r\n               batch_size,\r\n               learning_rate,\r\n               learning_rate_decay_factor,\r\n               use_lstm=False,\r\n               num_samples=512,\r\n               forward_only=False,\r\n               dtype=tf.float32):\r\n   \r\n    self.source_vocab_size = source_vocab_size\r\n    self.target_vocab_size = target_vocab_size\r\n    self.buckets = buckets\r\n    self.batch_size = batch_size\r\n    self.learning_rate = tf.Variable(\r\n        float(learning_rate), trainable=False, dtype=dtype)\r\n    self.learning_rate_decay_op = self.learning_rate.assign(\r\n        self.learning_rate * learning_rate_decay_factor)\r\n    self.global_step = tf.Variable(0, trainable=False)\r\n\r\n    \r\n    output_projection = None\r\n    softmax_loss_function = None\r\n    \r\n    if num_samples > 0 and num_samples < self.target_vocab_size:\r\n      w_t = tf.get_variable(\"proj_w\", [self.target_vocab_size, size], dtype=dtype)\r\n      w = tf.transpose(w_t)\r\n      b = tf.get_variable(\"proj_b\", [self.target_vocab_size], dtype=dtype)\r\n      output_projection = (w, b)\r\n\r\n      def sampled_loss(labels, inputs):\r\n        labels = tf.reshape(labels, [-1, 1])\r\n        \r\n        local_w_t = tf.cast(w_t, tf.float32)\r\n        local_b = tf.cast(b, tf.float32)\r\n        local_inputs = tf.cast(inputs, tf.float32)\r\n        return tf.cast(\r\n            tf.nn.sampled_softmax_loss(local_w_t, local_b, local_inputs, labels,\r\n                                       num_samples, self.target_vocab_size),\r\n            dtype)\r\n      softmax_loss_function = sampled_loss\r\n\r\n    \r\n    def single_cell():\r\n      return tf.nn.rnn_cell.GRUCell(size)\r\n    if use_lstm:\r\n      def single_cell():\r\n        return tf.nn.rnn_cell.BasicLSTMCell(size)\r\n    cell = single_cell()\r\n    if num_layers > 1:\r\n      cell = tf.nn.rnn_cell.MultiRNNCell([single_cell() for _ in range(num_layers)])\r\n\r\n   \r\n    def seq2seq_f(encoder_inputs, decoder_inputs, do_decode):\r\n      return tf.contrib.legacy_seq2seq.embedding_attention_seq2seq(\r\n          encoder_inputs,\r\n          decoder_inputs,\r\n          cell,\r\n          num_encoder_symbols=source_vocab_size,\r\n          num_decoder_symbols=target_vocab_size,\r\n          embedding_size=size,\r\n          output_projection=output_projection,\r\n          feed_previous=do_decode,\r\n          dtype=dtype)\r\n\r\n    \r\n    self.encoder_inputs = []\r\n    self.decoder_inputs = []\r\n    self.target_weights = []\r\n    for i in xrange(buckets[-1][0]):  # Last bucket is the biggest one.\r\n      self.encoder_inputs.append(tf.placeholder(tf.int32, shape=[None],\r\n                                                name=\"encoder{0}\".format(i)))\r\n    for i in xrange(buckets[-1][1] + 1):\r\n      self.decoder_inputs.append(tf.placeholder(tf.int32, shape=[None],\r\n                                                name=\"decoder{0}\".format(i)))\r\n      self.target_weights.append(tf.placeholder(dtype, shape=[None],\r\n                                                name=\"weight{0}\".format(i)))\r\n\r\n    # Our targets are decoder inputs shifted by one.\r\n    targets = [self.decoder_inputs[i + 1]\r\n               for i in xrange(len(self.decoder_inputs) - 1)]\r\n\r\n    # Training outputs and losses.\r\n    if forward_only:\r\n      self.outputs, self.losses = tf.contrib.legacy_seq2seq.model_with_buckets(\r\n          self.encoder_inputs, self.decoder_inputs, targets,\r\n          self.target_weights, buckets, lambda x, y: seq2seq_f(x, y, True),\r\n          softmax_loss_function=softmax_loss_function)\r\n      # If we use output projection, we need to project outputs for decoding.\r\n      if output_projection is not None:\r\n        for b in xrange(len(buckets)):\r\n          self.outputs[b] = [\r\n              tf.matmul(output, output_projection[0]) + output_projection[1]\r\n              for output in self.outputs[b]\r\n          ]\r\n    else:\r\n      self.outputs, self.losses = tf.contrib.legacy_seq2seq.model_with_buckets(\r\n          self.encoder_inputs, self.decoder_inputs, targets,\r\n          self.target_weights, buckets,\r\n          lambda x, y: seq2seq_f(x, y, False),\r\n          softmax_loss_function=softmax_loss_function)\r\n\r\n    # Gradients and SGD update operation for training the model.\r\n    params = tf.trainable_variables()\r\n    if not forward_only:\r\n      self.gradient_norms = []\r\n      self.updates = []\r\n      opt = tf.train.GradientDescentOptimizer(self.learning_rate)\r\n      for b in xrange(len(buckets)):\r\n        gradients = tf.gradients(self.losses[b], params)\r\n        clipped_gradients, norm = tf.clip_by_global_norm(gradients,\r\n                                                         max_gradient_norm)\r\n        self.gradient_norms.append(norm)\r\n        self.updates.append(opt.apply_gradients(\r\n            zip(clipped_gradients, params), global_step=self.global_step))\r\n\r\n    self.saver = tf.train.Saver(tf.global_variables())\r\n\r\n  def step(self, session, encoder_inputs, decoder_inputs, target_weights,\r\n           bucket_id, forward_only):\r\n   \r\n    # Check if the sizes match.\r\n    encoder_size, decoder_size = self.buckets[bucket_id]\r\n    if len(encoder_inputs) != encoder_size:\r\n      raise ValueError(\"Encoder length must be equal to the one in bucket,\"\r\n                       \" %d != %d.\" % (len(encoder_inputs), encoder_size))\r\n    if len(decoder_inputs) != decoder_size:\r\n      raise ValueError(\"Decoder length must be equal to the one in bucket,\"\r\n                       \" %d != %d.\" % (len(decoder_inputs), decoder_size))\r\n    if len(target_weights) != decoder_size:\r\n      raise ValueError(\"Weights length must be equal to the one in bucket,\"\r\n                       \" %d != %d.\" % (len(target_weights), decoder_size))\r\n\r\n    # Input feed: encoder inputs, decoder inputs, target_weights, as provided.\r\n    input_feed = {}\r\n    for l in xrange(encoder_size):\r\n      input_feed[self.encoder_inputs[l].name] = encoder_inputs[l]\r\n    for l in xrange(decoder_size):\r\n      input_feed[self.decoder_inputs[l].name] = decoder_inputs[l]\r\n      input_feed[self.target_weights[l].name] = target_weights[l]\r\n\r\n    # Since our targets are decoder inputs shifted by one, we need one more.\r\n    last_target = self.decoder_inputs[decoder_size].name\r\n    input_feed[last_target] = np.zeros([self.batch_size], dtype=np.int32)\r\n\r\n    # Output feed: depends on whether we do a backward step or not.\r\n    if not forward_only:\r\n      output_feed = [self.updates[bucket_id],  # Update Op that does SGD.\r\n                     self.gradient_norms[bucket_id],  # Gradient norm.\r\n                     self.losses[bucket_id]]  # Loss for this batch.\r\n    else:\r\n      output_feed = [self.losses[bucket_id]]  # Loss for this batch.\r\n      for l in xrange(decoder_size):  # Output logits.\r\n        output_feed.append(self.outputs[bucket_id][l])\r\n\r\n    outputs = session.run(output_feed, input_feed)\r\n    if not forward_only:\r\n      return outputs[1], outputs[2], None  # Gradient norm, loss, no outputs.\r\n    else:\r\n      return None, outputs[0], outputs[1:]  # No gradient norm, loss, outputs.\r\n\r\n  def get_batch(self, data, bucket_id):\r\n   \r\n    encoder_size, decoder_size = self.buckets[bucket_id]\r\n    encoder_inputs, decoder_inputs = [], []\r\n\r\n    # Get a random batch of encoder and decoder inputs from data,\r\n    # pad them if needed, reverse encoder inputs and add GO to decoder.\r\n    for _ in xrange(self.batch_size):\r\n      encoder_input, decoder_input = random.choice(data[bucket_id])\r\n\r\n      # Encoder inputs are padded and then reversed.\r\n      encoder_pad = [data_utils.PAD_ID] * (encoder_size - len(encoder_input))\r\n      encoder_inputs.append(list(reversed(encoder_input + encoder_pad)))\r\n\r\n      # Decoder inputs get an extra \"GO\" symbol, and are padded then.\r\n      decoder_pad_size = decoder_size - len(decoder_input) - 1\r\n      decoder_inputs.append([data_utils.GO_ID] + decoder_input +\r\n                            [data_utils.PAD_ID] * decoder_pad_size)\r\n\r\n    # Now we create batch-major vectors from the data selected above.\r\n    batch_encoder_inputs, batch_decoder_inputs, batch_weights = [], [], []\r\n\r\n    # Batch encoder inputs are just re-indexed encoder_inputs.\r\n    for length_idx in xrange(encoder_size):\r\n      batch_encoder_inputs.append(\r\n          np.array([encoder_inputs[batch_idx][length_idx]\r\n                    for batch_idx in xrange(self.batch_size)], dtype=np.int32))\r\n\r\n    # Batch decoder inputs are re-indexed decoder_inputs, we create weights.\r\n    for length_idx in xrange(decoder_size):\r\n      batch_decoder_inputs.append(\r\n          np.array([decoder_inputs[batch_idx][length_idx]\r\n                    for batch_idx in xrange(self.batch_size)], dtype=np.int32))\r\n\r\n      # Create target_weights to be 0 for targets that are padding.\r\n      batch_weight = np.ones(self.batch_size, dtype=np.float32)\r\n      for batch_idx in xrange(self.batch_size):\r\n        # We set weight to 0 if the corresponding target is a PAD symbol.\r\n        # The corresponding target is decoder_input shifted by 1 forward.\r\n        if length_idx < decoder_size - 1:\r\n          target = decoder_inputs[batch_idx][length_idx + 1]\r\n        if length_idx == decoder_size - 1 or target == data_utils.PAD_ID:\r\n          batch_weight[batch_idx] = 0.0\r\n      batch_weights.append(batch_weight)\r\n    return batch_encoder_inputs, batch_decoder_inputs, batch_weights`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312683879", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312683879", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312683879, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjY4Mzg3OQ==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-03T16:04:53Z", "updated_at": "2017-07-03T16:04:53Z", "author_association": "CONTRIBUTOR", "body": "This is a good question for stack overflow.\n\nOn Jul 3, 2017 8:46 AM, \"sachinh35\" <notifications@github.com> wrote:\n\n> I am totally new to this. Maybe this a pretty basic question but could you\n> tell what argument to be passed as the decoder cell in this code? I am\n> trying to develop the seq2seq as shown in the tensorflow tutorial using own\n> dataset.\n> `# Copyright 2015 The TensorFlow Authors. All Rights Reserved.\n> Licensed under the Apache License, Version 2.0 (the \"License\"); you may\n> not use this file except in compliance with the License. You may obtain a\n> copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless\n> required by applicable law or agreed to in writing, software distributed\n> under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES\n> OR CONDITIONS OF ANY KIND, either express or implied. See the License for\n> the specific language governing permissions and limitations under the\n> License. ============================================================\n> ==================\n>\n> \"\"\"Sequence-to-sequence model with an attention mechanism.\"\"\"\n>\n> from *future* import absolute_import\n> from *future* import division\n> from *future* import print_function\n>\n> import random\n>\n> import numpy as np\n> from six.moves import xrange # pylint: disable=redefined-builtin\n> import tensorflow as tf\n>\n> import data_utils\n>\n> class Seq2SeqModel(object):\n> \"\"\"Sequence-to-sequence model with attention and for multiple buckets.\n>\n> This class implements a multi-layer recurrent neural network as encoder,\n> and an attention-based decoder. This is the same as the model described in\n> this paper: http://arxiv.org/abs/1412.7449 - please look there for\n> details,\n> or into the seq2seq library for complete model implementation.\n> This class also allows to use GRU cells in addition to LSTM cells, and\n> sampled softmax to handle large output vocabulary size. A single-layer\n> version of this model, but with bi-directional encoder, was presented in\n> http://arxiv.org/abs/1409.0473\n> and sampled softmax is described in Section 3 of the following paper.\n> http://arxiv.org/abs/1412.2007\n> \"\"\"\n>\n> def *init*(self,\n> source_vocab_size,\n> target_vocab_size,\n> buckets,\n> size,\n> num_layers,\n> max_gradient_norm,\n> batch_size,\n> learning_rate,\n> learning_rate_decay_factor,\n> use_lstm=False,\n> num_samples=512,\n> forward_only=False,\n> dtype=tf.float32):\n> \"\"\"Create the model.\n>\n> Args:\n>   source_vocab_size: size of the source vocabulary.\n>   target_vocab_size: size of the target vocabulary.\n>   buckets: a list of pairs (I, O), where I specifies maximum input length\n>     that will be processed in that bucket, and O specifies maximum output\n>     length. Training instances that have inputs longer than I or outputs\n>     longer than O will be pushed to the next bucket and padded accordingly.\n>     We assume that the list is sorted, e.g., [(2, 4), (8, 16)].\n>   size: number of units in each layer of the model.\n>   num_layers: number of layers in the model.\n>   max_gradient_norm: gradients will be clipped to maximally this norm.\n>   batch_size: the size of the batches used during training;\n>     the model construction is independent of batch_size, so it can be\n>     changed after initialization if this is convenient, e.g., for decoding.\n>   learning_rate: learning rate to start with.\n>   learning_rate_decay_factor: decay learning rate by this much when needed.\n>   use_lstm: if true, we use LSTM cells instead of GRU cells.\n>   num_samples: number of samples for sampled softmax.\n>   forward_only: if set, we do not construct the backward pass in the model.\n>   dtype: the data type to use to store internal variables.\n> \"\"\"\n> self.source_vocab_size = source_vocab_size\n> self.target_vocab_size = target_vocab_size\n> self.buckets = buckets\n> self.batch_size = batch_size\n> self.learning_rate = tf.Variable(\n>     float(learning_rate), trainable=False, dtype=dtype)\n> self.learning_rate_decay_op = self.learning_rate.assign(\n>     self.learning_rate * learning_rate_decay_factor)\n> self.global_step = tf.Variable(0, trainable=False)\n>\n> # If we use sampled softmax, we need an output projection.\n> output_projection = None\n> softmax_loss_function = None\n> # Sampled softmax only makes sense if we sample less than vocabulary size.\n> if num_samples > 0 and num_samples < self.target_vocab_size:\n>   w_t = tf.get_variable(\"proj_w\", [self.target_vocab_size, size], dtype=dtype)\n>   w = tf.transpose(w_t)\n>   b = tf.get_variable(\"proj_b\", [self.target_vocab_size], dtype=dtype)\n>   output_projection = (w, b)\n>\n>   def sampled_loss(labels, inputs):\n>     labels = tf.reshape(labels, [-1, 1])\n>     # We need to compute the sampled_softmax_loss using 32bit floats to\n>     # avoid numerical instabilities.\n>     local_w_t = tf.cast(w_t, tf.float32)\n>     local_b = tf.cast(b, tf.float32)\n>     local_inputs = tf.cast(inputs, tf.float32)\n>     return tf.cast(\n>         tf.nn.sampled_softmax_loss(local_w_t, local_b, local_inputs, labels,\n>                                    num_samples, self.target_vocab_size),\n>         dtype)\n>   softmax_loss_function = sampled_loss\n>\n> # Create the internal multi-layer cell for our RNN.\n> def single_cell():\n>   return tf.nn.rnn_cell.GRUCell(size)\n> if use_lstm:\n>   def single_cell():\n>     return tf.nn.rnn_cell.BasicLSTMCell(size)\n> cell = single_cell()\n> if num_layers > 1:\n>   cell = tf.nn.rnn_cell.MultiRNNCell([single_cell() for _ in range(num_layers)])\n>\n> # The seq2seq function: we use embedding for the input and attention.\n> def seq2seq_f(encoder_inputs, decoder_inputs, do_decode):\n>   return tf.contrib.legacy_seq2seq.embedding_attention_seq2seq(\n>       encoder_inputs,\n>       decoder_inputs,\n>       cell,\n>       num_encoder_symbols=source_vocab_size,\n>       num_decoder_symbols=target_vocab_size,\n>       embedding_size=size,\n>       output_projection=output_projection,\n>       feed_previous=do_decode,\n>       dtype=dtype)\n>\n> # Feeds for inputs.\n> self.encoder_inputs = []\n> self.decoder_inputs = []\n> self.target_weights = []\n> for i in xrange(buckets[-1][0]):  # Last bucket is the biggest one.\n>   self.encoder_inputs.append(tf.placeholder(tf.int32, shape=[None],\n>                                             name=\"encoder{0}\".format(i)))\n> for i in xrange(buckets[-1][1] + 1):\n>   self.decoder_inputs.append(tf.placeholder(tf.int32, shape=[None],\n>                                             name=\"decoder{0}\".format(i)))\n>   self.target_weights.append(tf.placeholder(dtype, shape=[None],\n>                                             name=\"weight{0}\".format(i)))\n>\n> # Our targets are decoder inputs shifted by one.\n> targets = [self.decoder_inputs[i + 1]\n>            for i in xrange(len(self.decoder_inputs) - 1)]\n>\n> # Training outputs and losses.\n> if forward_only:\n>   self.outputs, self.losses = tf.contrib.legacy_seq2seq.model_with_buckets(\n>       self.encoder_inputs, self.decoder_inputs, targets,\n>       self.target_weights, buckets, lambda x, y: seq2seq_f(x, y, True),\n>       softmax_loss_function=softmax_loss_function)\n>   # If we use output projection, we need to project outputs for decoding.\n>   if output_projection is not None:\n>     for b in xrange(len(buckets)):\n>       self.outputs[b] = [\n>           tf.matmul(output, output_projection[0]) + output_projection[1]\n>           for output in self.outputs[b]\n>       ]\n> else:\n>   self.outputs, self.losses = tf.contrib.legacy_seq2seq.model_with_buckets(\n>       self.encoder_inputs, self.decoder_inputs, targets,\n>       self.target_weights, buckets,\n>       lambda x, y: seq2seq_f(x, y, False),\n>       softmax_loss_function=softmax_loss_function)\n>\n> # Gradients and SGD update operation for training the model.\n> params = tf.trainable_variables()\n> if not forward_only:\n>   self.gradient_norms = []\n>   self.updates = []\n>   opt = tf.train.GradientDescentOptimizer(self.learning_rate)\n>   for b in xrange(len(buckets)):\n>     gradients = tf.gradients(self.losses[b], params)\n>     clipped_gradients, norm = tf.clip_by_global_norm(gradients,\n>                                                      max_gradient_norm)\n>     self.gradient_norms.append(norm)\n>     self.updates.append(opt.apply_gradients(\n>         zip(clipped_gradients, params), global_step=self.global_step))\n>\n> self.saver = tf.train.Saver(tf.global_variables())\n>\n> def step(self, session, encoder_inputs, decoder_inputs, target_weights,\n> bucket_id, forward_only):\n> \"\"\"Run a step of the model feeding the given inputs.\n>\n> Args:\n>   session: tensorflow session to use.\n>   encoder_inputs: list of numpy int vectors to feed as encoder inputs.\n>   decoder_inputs: list of numpy int vectors to feed as decoder inputs.\n>   target_weights: list of numpy float vectors to feed as target weights.\n>   bucket_id: which bucket of the model to use.\n>   forward_only: whether to do the backward step or only forward.\n>\n> Returns:\n>   A triple consisting of gradient norm (or None if we did not do backward),\n>   average perplexity, and the outputs.\n>\n> Raises:\n>   ValueError: if length of encoder_inputs, decoder_inputs, or\n>     target_weights disagrees with bucket size for the specified bucket_id.\n> \"\"\"\n> # Check if the sizes match.\n> encoder_size, decoder_size = self.buckets[bucket_id]\n> if len(encoder_inputs) != encoder_size:\n>   raise ValueError(\"Encoder length must be equal to the one in bucket,\"\n>                    \" %d != %d.\" % (len(encoder_inputs), encoder_size))\n> if len(decoder_inputs) != decoder_size:\n>   raise ValueError(\"Decoder length must be equal to the one in bucket,\"\n>                    \" %d != %d.\" % (len(decoder_inputs), decoder_size))\n> if len(target_weights) != decoder_size:\n>   raise ValueError(\"Weights length must be equal to the one in bucket,\"\n>                    \" %d != %d.\" % (len(target_weights), decoder_size))\n>\n> # Input feed: encoder inputs, decoder inputs, target_weights, as provided.\n> input_feed = {}\n> for l in xrange(encoder_size):\n>   input_feed[self.encoder_inputs[l].name] = encoder_inputs[l]\n> for l in xrange(decoder_size):\n>   input_feed[self.decoder_inputs[l].name] = decoder_inputs[l]\n>   input_feed[self.target_weights[l].name] = target_weights[l]\n>\n> # Since our targets are decoder inputs shifted by one, we need one more.\n> last_target = self.decoder_inputs[decoder_size].name\n> input_feed[last_target] = np.zeros([self.batch_size], dtype=np.int32)\n>\n> # Output feed: depends on whether we do a backward step or not.\n> if not forward_only:\n>   output_feed = [self.updates[bucket_id],  # Update Op that does SGD.\n>                  self.gradient_norms[bucket_id],  # Gradient norm.\n>                  self.losses[bucket_id]]  # Loss for this batch.\n> else:\n>   output_feed = [self.losses[bucket_id]]  # Loss for this batch.\n>   for l in xrange(decoder_size):  # Output logits.\n>     output_feed.append(self.outputs[bucket_id][l])\n>\n> outputs = session.run(output_feed, input_feed)\n> if not forward_only:\n>   return outputs[1], outputs[2], None  # Gradient norm, loss, no outputs.\n> else:\n>   return None, outputs[0], outputs[1:]  # No gradient norm, loss, outputs.\n>\n> def get_batch(self, data, bucket_id):\n> \"\"\"Get a random batch of data from the specified bucket, prepare for step.\n>\n> To feed data in step(..) it must be a list of batch-major vectors, while\n> data here contains single length-major cases. So the main logic of this\n> function is to re-index data cases to be in the proper format for feeding.\n>\n> Args:\n>   data: a tuple of size len(self.buckets) in which each element contains\n>     lists of pairs of input and output data that we use to create a batch.\n>   bucket_id: integer, which bucket to get the batch for.\n>\n> Returns:\n>   The triple (encoder_inputs, decoder_inputs, target_weights) for\n>   the constructed batch that has the proper format to call step(...) later.\n> \"\"\"\n> encoder_size, decoder_size = self.buckets[bucket_id]\n> encoder_inputs, decoder_inputs = [], []\n>\n> # Get a random batch of encoder and decoder inputs from data,\n> # pad them if needed, reverse encoder inputs and add GO to decoder.\n> for _ in xrange(self.batch_size):\n>   encoder_input, decoder_input = random.choice(data[bucket_id])\n>\n>   # Encoder inputs are padded and then reversed.\n>   encoder_pad = [data_utils.PAD_ID] * (encoder_size - len(encoder_input))\n>   encoder_inputs.append(list(reversed(encoder_input + encoder_pad)))\n>\n>   # Decoder inputs get an extra \"GO\" symbol, and are padded then.\n>   decoder_pad_size = decoder_size - len(decoder_input) - 1\n>   decoder_inputs.append([data_utils.GO_ID] + decoder_input +\n>                         [data_utils.PAD_ID] * decoder_pad_size)\n>\n> # Now we create batch-major vectors from the data selected above.\n> batch_encoder_inputs, batch_decoder_inputs, batch_weights = [], [], []\n>\n> # Batch encoder inputs are just re-indexed encoder_inputs.\n> for length_idx in xrange(encoder_size):\n>   batch_encoder_inputs.append(\n>       np.array([encoder_inputs[batch_idx][length_idx]\n>                 for batch_idx in xrange(self.batch_size)], dtype=np.int32))\n>\n> # Batch decoder inputs are re-indexed decoder_inputs, we create weights.\n> for length_idx in xrange(decoder_size):\n>   batch_decoder_inputs.append(\n>       np.array([decoder_inputs[batch_idx][length_idx]\n>                 for batch_idx in xrange(self.batch_size)], dtype=np.int32))\n>\n>   # Create target_weights to be 0 for targets that are padding.\n>   batch_weight = np.ones(self.batch_size, dtype=np.float32)\n>   for batch_idx in xrange(self.batch_size):\n>     # We set weight to 0 if the corresponding target is a PAD symbol.\n>     # The corresponding target is decoder_input shifted by 1 forward.\n>     if length_idx < decoder_size - 1:\n>       target = decoder_inputs[batch_idx][length_idx + 1]\n>     if length_idx == decoder_size - 1 or target == data_utils.PAD_ID:\n>       batch_weight[batch_idx] = 0.0\n>   batch_weights.append(batch_weight)\n> return batch_encoder_inputs, batch_decoder_inputs, batch_weights`\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312679587>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim0l5UMHHtbL1sz7meXserV8NVS7cks5sKQzXgaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312693179", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312693179", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312693179, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjY5MzE3OQ==", "user": {"login": "sachinh35", "id": 21972708, "node_id": "MDQ6VXNlcjIxOTcyNzA4", "avatar_url": "https://avatars2.githubusercontent.com/u/21972708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sachinh35", "html_url": "https://github.com/sachinh35", "followers_url": "https://api.github.com/users/sachinh35/followers", "following_url": "https://api.github.com/users/sachinh35/following{/other_user}", "gists_url": "https://api.github.com/users/sachinh35/gists{/gist_id}", "starred_url": "https://api.github.com/users/sachinh35/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sachinh35/subscriptions", "organizations_url": "https://api.github.com/users/sachinh35/orgs", "repos_url": "https://api.github.com/users/sachinh35/repos", "events_url": "https://api.github.com/users/sachinh35/events{/privacy}", "received_events_url": "https://api.github.com/users/sachinh35/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-03T16:53:12Z", "updated_at": "2017-07-03T16:53:12Z", "author_association": "NONE", "body": "Okay! thanks though! :)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312695937", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312695937", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312695937, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjY5NTkzNw==", "user": {"login": "PratsBhatt", "id": 15447437, "node_id": "MDQ6VXNlcjE1NDQ3NDM3", "avatar_url": "https://avatars3.githubusercontent.com/u/15447437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PratsBhatt", "html_url": "https://github.com/PratsBhatt", "followers_url": "https://api.github.com/users/PratsBhatt/followers", "following_url": "https://api.github.com/users/PratsBhatt/following{/other_user}", "gists_url": "https://api.github.com/users/PratsBhatt/gists{/gist_id}", "starred_url": "https://api.github.com/users/PratsBhatt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PratsBhatt/subscriptions", "organizations_url": "https://api.github.com/users/PratsBhatt/orgs", "repos_url": "https://api.github.com/users/PratsBhatt/repos", "events_url": "https://api.github.com/users/PratsBhatt/events{/privacy}", "received_events_url": "https://api.github.com/users/PratsBhatt/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-03T17:08:09Z", "updated_at": "2017-07-03T17:08:09Z", "author_association": "NONE", "body": "@ebrevdo  is there any update on when the new tutorial of seq2seq using new api will come out?\r\nThank you. Amazing work!.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312697274", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312697274", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312697274, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjY5NzI3NA==", "user": {"login": "prashantserai", "id": 10653125, "node_id": "MDQ6VXNlcjEwNjUzMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/10653125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantserai", "html_url": "https://github.com/prashantserai", "followers_url": "https://api.github.com/users/prashantserai/followers", "following_url": "https://api.github.com/users/prashantserai/following{/other_user}", "gists_url": "https://api.github.com/users/prashantserai/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantserai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantserai/subscriptions", "organizations_url": "https://api.github.com/users/prashantserai/orgs", "repos_url": "https://api.github.com/users/prashantserai/repos", "events_url": "https://api.github.com/users/prashantserai/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantserai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-03T17:15:43Z", "updated_at": "2017-07-03T17:15:59Z", "author_association": "NONE", "body": "yeah waiting for the new tutorial... would be great to know if it's planned to be released anytime soon.. @ebrevdo \r\n\r\ntried to take code in the kernel tests and retrofit the beam search with the legacy seq2seq, but it was challenging..."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312699024", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312699024", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 312699024, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjY5OTAyNA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-03T17:25:53Z", "updated_at": "2017-07-03T17:25:53Z", "author_association": "CONTRIBUTOR", "body": "We're hoping for this coming week!\n\nOn Jul 3, 2017 10:16 AM, \"prashantserai\" <notifications@github.com> wrote:\n\n> yeah waiting for the new tutorial... would be great to know if it's\n> planned to be released anytime soon.. @ebrevdo\n> <https://github.com/ebrevdo>\n>\n> tried to take code in the kernel tests and retrofit the beam search with\n> the legacy seq2seq, but it seemed challenging...\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-312697274>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim45-HTuQrIRDhphqqHjqkKOKTe53ks5sKSHYgaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/316611307", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-316611307", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 316611307, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjYxMTMwNw==", "user": {"login": "tshi1983", "id": 9923157, "node_id": "MDQ6VXNlcjk5MjMxNTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9923157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tshi1983", "html_url": "https://github.com/tshi1983", "followers_url": "https://api.github.com/users/tshi1983/followers", "following_url": "https://api.github.com/users/tshi1983/following{/other_user}", "gists_url": "https://api.github.com/users/tshi1983/gists{/gist_id}", "starred_url": "https://api.github.com/users/tshi1983/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tshi1983/subscriptions", "organizations_url": "https://api.github.com/users/tshi1983/orgs", "repos_url": "https://api.github.com/users/tshi1983/repos", "events_url": "https://api.github.com/users/tshi1983/events{/privacy}", "received_events_url": "https://api.github.com/users/tshi1983/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-20T06:39:42Z", "updated_at": "2017-07-20T06:39:42Z", "author_association": "NONE", "body": "Hi guys,\r\n\r\nAny update to this issue, I'm experiencing the same on tensorflow 1.1-gpu for mac os x"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/317418942", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-317418942", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 317418942, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzQxODk0Mg==", "user": {"login": "selinachenxi", "id": 11745508, "node_id": "MDQ6VXNlcjExNzQ1NTA4", "avatar_url": "https://avatars0.githubusercontent.com/u/11745508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/selinachenxi", "html_url": "https://github.com/selinachenxi", "followers_url": "https://api.github.com/users/selinachenxi/followers", "following_url": "https://api.github.com/users/selinachenxi/following{/other_user}", "gists_url": "https://api.github.com/users/selinachenxi/gists{/gist_id}", "starred_url": "https://api.github.com/users/selinachenxi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/selinachenxi/subscriptions", "organizations_url": "https://api.github.com/users/selinachenxi/orgs", "repos_url": "https://api.github.com/users/selinachenxi/repos", "events_url": "https://api.github.com/users/selinachenxi/events{/privacy}", "received_events_url": "https://api.github.com/users/selinachenxi/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-24T13:15:49Z", "updated_at": "2017-07-24T13:15:49Z", "author_association": "NONE", "body": "@tshi1983 \r\nI got the same problem with tensorflow 1.1-gpu for ubuntu. \r\nI upgrade to tf 1.2. It still doesn't work. \r\nThen I change the function embedding_attention_seq2seq in file \r\ntensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\r\nto the one as @fabiofumarola suggested above. \r\nNow it starts training. I haven't tested decoding yet. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/318981134", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-318981134", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 318981134, "node_id": "MDEyOklzc3VlQ29tbWVudDMxODk4MTEzNA==", "user": {"login": "huxuanlai", "id": 5986163, "node_id": "MDQ6VXNlcjU5ODYxNjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/5986163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huxuanlai", "html_url": "https://github.com/huxuanlai", "followers_url": "https://api.github.com/users/huxuanlai/followers", "following_url": "https://api.github.com/users/huxuanlai/following{/other_user}", "gists_url": "https://api.github.com/users/huxuanlai/gists{/gist_id}", "starred_url": "https://api.github.com/users/huxuanlai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huxuanlai/subscriptions", "organizations_url": "https://api.github.com/users/huxuanlai/orgs", "repos_url": "https://api.github.com/users/huxuanlai/repos", "events_url": "https://api.github.com/users/huxuanlai/events{/privacy}", "received_events_url": "https://api.github.com/users/huxuanlai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-31T06:36:59Z", "updated_at": "2017-07-31T06:36:59Z", "author_association": "NONE", "body": "Move the code on cell definition into seq2seq_f:\r\n\r\n```\r\ndef seq2seq_f(encoder_inputs, decoder_inputs, do_decode):\r\n      def single_cell():\r\n        return tf.contrib.rnn.GRUCell(size)\r\n      if use_lstm:\r\n        def single_cell():\r\n          return tf.contrib.rnn.BasicLSTMCell(size)\r\n      cell = single_cell()\r\n      if num_layers > 1:\r\n        cell = tf.contrib.rnn.MultiRNNCell([single_cell() for _ in range(num_layers)])\r\n      return tf.contrib.legacy_seq2seq.embedding_attention_seq2seq(\r\n\t  ...\r\n\t  )\r\n```\r\nThen \"python translate.py --data_dir data/ --train_dir checkpoint/ --size=256 --num_layers=2 --steps_per_checkpoint=50\" can work.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/319045451", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-319045451", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 319045451, "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTA0NTQ1MQ==", "user": {"login": "a111xushuai", "id": 11973548, "node_id": "MDQ6VXNlcjExOTczNTQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/11973548?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a111xushuai", "html_url": "https://github.com/a111xushuai", "followers_url": "https://api.github.com/users/a111xushuai/followers", "following_url": "https://api.github.com/users/a111xushuai/following{/other_user}", "gists_url": "https://api.github.com/users/a111xushuai/gists{/gist_id}", "starred_url": "https://api.github.com/users/a111xushuai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a111xushuai/subscriptions", "organizations_url": "https://api.github.com/users/a111xushuai/orgs", "repos_url": "https://api.github.com/users/a111xushuai/repos", "events_url": "https://api.github.com/users/a111xushuai/events{/privacy}", "received_events_url": "https://api.github.com/users/a111xushuai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-31T11:50:23Z", "updated_at": "2017-07-31T11:50:23Z", "author_association": "NONE", "body": "@huxuanlai it works! At least it's training now, thx!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320456087", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-320456087", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 320456087, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDQ1NjA4Nw==", "user": {"login": "btchncamaro", "id": 25159725, "node_id": "MDQ6VXNlcjI1MTU5NzI1", "avatar_url": "https://avatars2.githubusercontent.com/u/25159725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/btchncamaro", "html_url": "https://github.com/btchncamaro", "followers_url": "https://api.github.com/users/btchncamaro/followers", "following_url": "https://api.github.com/users/btchncamaro/following{/other_user}", "gists_url": "https://api.github.com/users/btchncamaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/btchncamaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/btchncamaro/subscriptions", "organizations_url": "https://api.github.com/users/btchncamaro/orgs", "repos_url": "https://api.github.com/users/btchncamaro/repos", "events_url": "https://api.github.com/users/btchncamaro/events{/privacy}", "received_events_url": "https://api.github.com/users/btchncamaro/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-05T17:23:24Z", "updated_at": "2017-08-05T17:23:24Z", "author_association": "NONE", "body": "@huxuanlai Works for me as well.  "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/321665433", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-321665433", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 321665433, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTY2NTQzMw==", "user": {"login": "jkarimi91", "id": 8411317, "node_id": "MDQ6VXNlcjg0MTEzMTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8411317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkarimi91", "html_url": "https://github.com/jkarimi91", "followers_url": "https://api.github.com/users/jkarimi91/followers", "following_url": "https://api.github.com/users/jkarimi91/following{/other_user}", "gists_url": "https://api.github.com/users/jkarimi91/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkarimi91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkarimi91/subscriptions", "organizations_url": "https://api.github.com/users/jkarimi91/orgs", "repos_url": "https://api.github.com/users/jkarimi91/repos", "events_url": "https://api.github.com/users/jkarimi91/events{/privacy}", "received_events_url": "https://api.github.com/users/jkarimi91/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-10T20:33:28Z", "updated_at": "2017-08-10T20:47:30Z", "author_association": "NONE", "body": "I am receiving the same `AttributeError: 'NoneType' object has no attribute 'update'` but with `tf.contrib.legacy_seq2seq.model_with_buckets`. I am running tf 1.2.1 (GPU)  on ubuntu 16.04 lts.\r\n\r\nThis only seems to occur when I have more than 1 bucket.\r\n\r\nfull traceback:\r\n```\r\nTraceback (most recent call last):\r\n  File \"chatbot.py\", line 262, in <module>\r\n    main()\r\n  File \"chatbot.py\", line 257, in main\r\n    train()\r\n  File \"chatbot.py\", line 138, in train\r\n    model.build_graph()\r\n  File \"/home/jkarimi91/Projects/cs20/code/hw/a3/model.py\", line 134, in build_graph\r\n    self._create_loss()\r\n  File \"/home/jkarimi91/Projects/cs20/code/hw/a3/model.py\", line 102, in _create_loss\r\n    softmax_loss_function=self.softmax_loss_function)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1206, in model_with_buckets\r\n    decoder_inputs[:bucket[1]])\r\n  File \"/home/jkarimi91/Projects/cs20/code/hw/a3/model.py\", line 101, in <lambda>\r\n    lambda x, y: _seq2seq_f(x, y, False),\r\n  File \"/home/jkarimi91/Projects/cs20/code/hw/a3/model.py\", line 76, in _seq2seq_f\r\n    feed_previous=do_decode)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 848, in embedding_attention_seq2seq\r\n    encoder_cell = copy.deepcopy(cell)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 174, in deepcopy\r\n    y = copier(memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 476, in __deepcopy__\r\n    setattr(result, k, copy.deepcopy(v, memo))\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 237, in _deepcopy_tuple\r\n    y.append(deepcopy(a, memo))\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/home/jkarimi91/Apps/anaconda2/envs/tf/lib/python2.7/copy.py\", line 343, in _reconstruct\r\n    y.__dict__.update(state)\r\nAttributeError: 'NoneType' object has no attribute 'update'\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/322635459", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-322635459", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 322635459, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjYzNTQ1OQ==", "user": {"login": "LevineHuang", "id": 19391116, "node_id": "MDQ6VXNlcjE5MzkxMTE2", "avatar_url": "https://avatars1.githubusercontent.com/u/19391116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LevineHuang", "html_url": "https://github.com/LevineHuang", "followers_url": "https://api.github.com/users/LevineHuang/followers", "following_url": "https://api.github.com/users/LevineHuang/following{/other_user}", "gists_url": "https://api.github.com/users/LevineHuang/gists{/gist_id}", "starred_url": "https://api.github.com/users/LevineHuang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LevineHuang/subscriptions", "organizations_url": "https://api.github.com/users/LevineHuang/orgs", "repos_url": "https://api.github.com/users/LevineHuang/repos", "events_url": "https://api.github.com/users/LevineHuang/events{/privacy}", "received_events_url": "https://api.github.com/users/LevineHuang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-16T01:23:30Z", "updated_at": "2017-08-16T01:38:24Z", "author_association": "CONTRIBUTOR", "body": "@Tshzzz @jtubert \r\nthx, your solution worked for me. My tf verstion is 1.1.0.\r\n\r\nI changed from:\r\n```python\r\n    lstm_cell = tf.contrib.rnn.BasicLSTMCell(HIDDEN_SIZE, state_is_tuple=True)\r\n    cell = tf.contrib.rnn.MultiRNNCell([lstm_cell() for _ in range(NUM_LAYERS)])\r\n    output, _ = tf.nn.dynamic_rnn(cell, X, dtype=tf.float32)  \r\n```\r\nto:\r\n```python\r\n    cells=[]\r\n    for _ in range(NUM_LAYERS):\r\n        cell = tf.contrib.rnn.BasicLSTMCell(HIDDEN_SIZE, state_is_tuple=True)\r\n        cells.append(cell)\r\n    multicell = tf.contrib.rnn.MultiRNNCell(cells, state_is_tuple=True)\r\n    output, _ = tf.nn.dynamic_rnn(multicell, X, dtype=tf.float32)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/323378125", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-323378125", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 323378125, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzM3ODEyNQ==", "user": {"login": "saurabhvyas", "id": 6899784, "node_id": "MDQ6VXNlcjY4OTk3ODQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/6899784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saurabhvyas", "html_url": "https://github.com/saurabhvyas", "followers_url": "https://api.github.com/users/saurabhvyas/followers", "following_url": "https://api.github.com/users/saurabhvyas/following{/other_user}", "gists_url": "https://api.github.com/users/saurabhvyas/gists{/gist_id}", "starred_url": "https://api.github.com/users/saurabhvyas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saurabhvyas/subscriptions", "organizations_url": "https://api.github.com/users/saurabhvyas/orgs", "repos_url": "https://api.github.com/users/saurabhvyas/repos", "events_url": "https://api.github.com/users/saurabhvyas/events{/privacy}", "received_events_url": "https://api.github.com/users/saurabhvyas/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-18T15:03:01Z", "updated_at": "2017-08-18T15:03:01Z", "author_association": "NONE", "body": "This is still not fixed , tried all possible solutions , ones mentioned in this thread and stackoverflow , it doesn't work with tensorflow 1.3 or 1.2 or 1.1 "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/323439646", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-323439646", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 323439646, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzQzOTY0Ng==", "user": {"login": "comsian106", "id": 27868903, "node_id": "MDQ6VXNlcjI3ODY4OTAz", "avatar_url": "https://avatars0.githubusercontent.com/u/27868903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comsian106", "html_url": "https://github.com/comsian106", "followers_url": "https://api.github.com/users/comsian106/followers", "following_url": "https://api.github.com/users/comsian106/following{/other_user}", "gists_url": "https://api.github.com/users/comsian106/gists{/gist_id}", "starred_url": "https://api.github.com/users/comsian106/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comsian106/subscriptions", "organizations_url": "https://api.github.com/users/comsian106/orgs", "repos_url": "https://api.github.com/users/comsian106/repos", "events_url": "https://api.github.com/users/comsian106/events{/privacy}", "received_events_url": "https://api.github.com/users/comsian106/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-18T19:21:17Z", "updated_at": "2017-08-18T19:30:03Z", "author_association": "NONE", "body": "I'm facing this error:\r\n```TypeError: embedding_attention_seq2seq() missing 1 required positional argument: 'dec_cell' ```\r\n\r\nThe error points to this function in seq2seq_model.py which is line 142 in seq2seq_model.py:\r\n\r\n  ```def seq2seq_f(encoder_inputs, decoder_inputs, do_decode):\r\n      return tf.contrib.legacy_seq2seq.embedding_attention_seq2seq(\r\n          encoder_inputs,\r\n          decoder_inputs,\r\n          cell,\r\n          num_encoder_symbols=source_vocab_size,\r\n          num_decoder_symbols=target_vocab_size,\r\n          embedding_size=size,\r\n          output_projection=output_projection,\r\n          feed_previous=do_decode,\r\n          dtype=dtype) \r\n```\r\n\r\n\r\nAnyone who came across with this error and managed  to solve this, please help me correct this issue."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/324818266", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-324818266", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 324818266, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDgxODI2Ng==", "user": {"login": "ybdx", "id": 10512833, "node_id": "MDQ6VXNlcjEwNTEyODMz", "avatar_url": "https://avatars0.githubusercontent.com/u/10512833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ybdx", "html_url": "https://github.com/ybdx", "followers_url": "https://api.github.com/users/ybdx/followers", "following_url": "https://api.github.com/users/ybdx/following{/other_user}", "gists_url": "https://api.github.com/users/ybdx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ybdx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ybdx/subscriptions", "organizations_url": "https://api.github.com/users/ybdx/orgs", "repos_url": "https://api.github.com/users/ybdx/repos", "events_url": "https://api.github.com/users/ybdx/events{/privacy}", "received_events_url": "https://api.github.com/users/ybdx/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-25T04:01:25Z", "updated_at": "2017-08-25T04:01:25Z", "author_association": "NONE", "body": "ValueError: Attempt to reuse RNNCell <tensorflow.contrib.rnn.python.ops.core_rnn_cell_impl.GRUCell object at 0x11d32cbd0> with a different variable scope than its first use. First use of cell was with scope 'rnn/multi_rnn_cell/cell_0/gru_cell', this attempt is with scope 'rnn/multi_rnn_cell/cell_1/gru_cell'. Please create a new instance of the cell if you would like it to use a different set of weights. If before you were using: MultiRNNCell([GRUCell(...)] * num_layers), change to: MultiRNNCell([GRUCell(...) for _ in range(num_layers)]). If before you were using the same cell instance as both the forward and reverse cell of a bidirectional RNN, simply create two instances (one for forward, one for reverse). In May 2017, we will start transitioning this cell's behavior to use existing stored weights, if any, when it is called with scope=None (which can lead to silent model degradation, so this error will remain until then.)\r\n\r\nthe origin code:\r\nfrom tensorflow.contrib import rnn\r\ninputs = tf.placeholder(dtype=tf.int32, shape=[None, None], name=\"inputs\")\r\nkeep_prob = tf.placeholder(dtype=tf.float32, name=\"keep_prob\")\r\ncell = rnn.GRUCell(10)\r\ncell = rnn.DropoutWrapper(cell=cell, input_keep_prob=keep_prob)\r\ncell = rnn.MultiRNNCell([cell for _ in range(5)], state_is_tuple=True)\r\n\r\n  outs, states = tf.nn.dynamic_rnn(cell=cell, inputs=look_up, dtype=tf.float32)\r\nsolution:\r\ninputs = tf.placeholder(dtype=tf.int32, shape=[None, None], name=\"inputs\")\r\nkeep_prob = tf.placeholder(dtype=tf.float32, name=\"keep_prob\")\r\ncell = rnn.MultiRNNCell([rnn.DropoutWrapper(rnn.GRUCell(10), input_keep_prob=keep_prob) for _ in range(5)] , state_is_tuple=True)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/333387182", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-333387182", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 333387182, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzM4NzE4Mg==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-01T16:11:16Z", "updated_at": "2017-10-01T16:11:16Z", "author_association": "CONTRIBUTOR", "body": "Do you have this issue with the tf nightlies?\n\nOn Oct 1, 2017 8:34 AM, \"Baohua Zhou\" <notifications@github.com> wrote:\n\n> I have the same issue when using tensorflow 1.1 on cpu with ios.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-333384725>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtimwOv7vf5vvFXBllbZryjCFwmJcU6ks5sn7DxgaJpZM4MWl4f>\n> .\n>\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/338617020", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-338617020", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 338617020, "node_id": "MDEyOklzc3VlQ29tbWVudDMzODYxNzAyMA==", "user": {"login": "PR-Iyyer", "id": 32569826, "node_id": "MDQ6VXNlcjMyNTY5ODI2", "avatar_url": "https://avatars0.githubusercontent.com/u/32569826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PR-Iyyer", "html_url": "https://github.com/PR-Iyyer", "followers_url": "https://api.github.com/users/PR-Iyyer/followers", "following_url": "https://api.github.com/users/PR-Iyyer/following{/other_user}", "gists_url": "https://api.github.com/users/PR-Iyyer/gists{/gist_id}", "starred_url": "https://api.github.com/users/PR-Iyyer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PR-Iyyer/subscriptions", "organizations_url": "https://api.github.com/users/PR-Iyyer/orgs", "repos_url": "https://api.github.com/users/PR-Iyyer/repos", "events_url": "https://api.github.com/users/PR-Iyyer/events{/privacy}", "received_events_url": "https://api.github.com/users/PR-Iyyer/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-23T10:30:51Z", "updated_at": "2017-10-23T10:30:51Z", "author_association": "NONE", "body": "AttributeError: 'NoneType' object has no attribute 'update'\r\n \r\nin tf=1.3  "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/347125740", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-347125740", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 347125740, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzEyNTc0MA==", "user": {"login": "rashmishrm", "id": 8945658, "node_id": "MDQ6VXNlcjg5NDU2NTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/8945658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rashmishrm", "html_url": "https://github.com/rashmishrm", "followers_url": "https://api.github.com/users/rashmishrm/followers", "following_url": "https://api.github.com/users/rashmishrm/following{/other_user}", "gists_url": "https://api.github.com/users/rashmishrm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rashmishrm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rashmishrm/subscriptions", "organizations_url": "https://api.github.com/users/rashmishrm/orgs", "repos_url": "https://api.github.com/users/rashmishrm/repos", "events_url": "https://api.github.com/users/rashmishrm/events{/privacy}", "received_events_url": "https://api.github.com/users/rashmishrm/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-27T09:31:33Z", "updated_at": "2017-11-27T09:31:33Z", "author_association": "NONE", "body": "   ValueError: Attempt to reuse RNNCell <tensorflow.contrib.rnn.python.ops.core_rnn_cell_impl.GRUCell object at 0x117f7cbd0> with a different variable scope than its first use.  First use of cell was with scope 'embedding_attention_seq2seq/rnn/multi_rnn_cell/cell_0/gru_cell', this attempt is with scope 'embedding_attention_seq2seq/rnn/multi_rnn_cell/cell_1/gru_cell'.  Please create a new instance of the cell if you would like it to use a different set of weights.  If before you were using: MultiRNNCell([GRUCell(...)] * num_layers), change to: MultiRNNCell([GRUCell(...) for _ in range(num_layers)]).  If before you were using the same cell instance as both the forward and reverse cell of a bidirectional RNN, simply create two instances (one for forward, one for reverse).  In May 2017, we will start transitioning this cell's behavior to use existing stored weights, if any, when it is called with scope=None (which can lead to silent model degradation, so this error will remain until then.)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/353542453", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-353542453", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 353542453, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzU0MjQ1Mw==", "user": {"login": "tensorflowbutler", "id": 28546240, "node_id": "MDQ6VXNlcjI4NTQ2MjQw", "avatar_url": "https://avatars2.githubusercontent.com/u/28546240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflowbutler", "html_url": "https://github.com/tensorflowbutler", "followers_url": "https://api.github.com/users/tensorflowbutler/followers", "following_url": "https://api.github.com/users/tensorflowbutler/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflowbutler/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflowbutler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflowbutler/subscriptions", "organizations_url": "https://api.github.com/users/tensorflowbutler/orgs", "repos_url": "https://api.github.com/users/tensorflowbutler/repos", "events_url": "https://api.github.com/users/tensorflowbutler/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflowbutler/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-22T07:48:59Z", "updated_at": "2017-12-22T07:48:59Z", "author_association": "MEMBER", "body": "It has been 14 days with no activity and the `awaiting tensorflower` label was assigned. Please update the label and/or status accordingly."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/355640188", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-355640188", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 355640188, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTY0MDE4OA==", "user": {"login": "tensorflowbutler", "id": 28546240, "node_id": "MDQ6VXNlcjI4NTQ2MjQw", "avatar_url": "https://avatars2.githubusercontent.com/u/28546240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflowbutler", "html_url": "https://github.com/tensorflowbutler", "followers_url": "https://api.github.com/users/tensorflowbutler/followers", "following_url": "https://api.github.com/users/tensorflowbutler/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflowbutler/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflowbutler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflowbutler/subscriptions", "organizations_url": "https://api.github.com/users/tensorflowbutler/orgs", "repos_url": "https://api.github.com/users/tensorflowbutler/repos", "events_url": "https://api.github.com/users/tensorflowbutler/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflowbutler/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-05T19:13:58Z", "updated_at": "2018-01-05T19:13:58Z", "author_association": "MEMBER", "body": "Nagging Awaiting TensorFlower: It has been 14 days with no activityand the `awaiting tensorflower` label was assigned. Please update the label and/or status accordingly."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/355644564", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-355644564", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 355644564, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTY0NDU2NA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-05T19:32:31Z", "updated_at": "2018-01-05T19:32:31Z", "author_association": "CONTRIBUTOR", "body": "The solution is to move to a newer version of TF.  This thread has drastically diverged from its original issue.  Closing."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/381063625", "html_url": "https://github.com/tensorflow/tensorflow/issues/8191#issuecomment-381063625", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8191", "id": 381063625, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTA2MzYyNQ==", "user": {"login": "monk1337", "id": 17107749, "node_id": "MDQ6VXNlcjE3MTA3NzQ5", "avatar_url": "https://avatars2.githubusercontent.com/u/17107749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monk1337", "html_url": "https://github.com/monk1337", "followers_url": "https://api.github.com/users/monk1337/followers", "following_url": "https://api.github.com/users/monk1337/following{/other_user}", "gists_url": "https://api.github.com/users/monk1337/gists{/gist_id}", "starred_url": "https://api.github.com/users/monk1337/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monk1337/subscriptions", "organizations_url": "https://api.github.com/users/monk1337/orgs", "repos_url": "https://api.github.com/users/monk1337/repos", "events_url": "https://api.github.com/users/monk1337/events{/privacy}", "received_events_url": "https://api.github.com/users/monk1337/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-13T08:28:20Z", "updated_at": "2018-04-13T08:28:20Z", "author_association": "NONE", "body": "If you want instant solution you can try what i tried : \r\n\r\n`pip install tensorflow==1.0\r\n`\r\nThe issue is with tenorflow 1.1 version , it worked for me.\r\n\r\n"}]