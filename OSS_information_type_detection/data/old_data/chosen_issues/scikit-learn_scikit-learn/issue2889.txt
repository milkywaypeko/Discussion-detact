[{
  "url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889",
  "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn",
  "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889/labels{/name}",
  "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889/comments",
  "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889/events",
  "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889",
  "id": 28205288,
  "node_id": "MDU6SXNzdWUyODIwNTI4OA==",
  "number": 2889,
  "title": "GridSearchCV parallel execution with own scorer freezes",
  "user": {
    "login": "adverley",
    "id": 5717716,
    "node_id": "MDQ6VXNlcjU3MTc3MTY=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/5717716?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adverley",
    "html_url": "https://github.com/adverley",
    "followers_url": "https://api.github.com/users/adverley/followers",
    "following_url": "https://api.github.com/users/adverley/following{/other_user}",
    "gists_url": "https://api.github.com/users/adverley/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adverley/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adverley/subscriptions",
    "organizations_url": "https://api.github.com/users/adverley/orgs",
    "repos_url": "https://api.github.com/users/adverley/repos",
    "events_url": "https://api.github.com/users/adverley/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adverley/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 99,
  "created_at": "2014-02-24T22:53:11Z",
  "updated_at": "2018-10-10T00:49:44Z",
  "closed_at": "2015-01-23T03:45:36Z",
  "author_association": "NONE",
  "body": "I have been searching hours on this problem and can consistently replicate it:\n\n```\nclf = GridSearchCV( sk.LogisticRegression(),\n                            tuned_parameters,\n                            cv = N_folds_validation,\n                            pre_dispatch='6*n_jobs', \n                            n_jobs=4,\n                            verbose = 1,\n                            scoring=metrics.make_scorer(metrics.scorer.f1_score, average=\"macro\")\n                        )\n```\n\nThis snippet crashes because of scoring=metrics.make_scorer(metrics.scorer.f1_score, average=\"macro\") where metrics refers to sklearn.metrics module. If I cancel out the scoring=... line, the parallel execution works. If I want to use the f1 score as evaluation method, I have to cancel out the parallel execution by setting n_jobs = 1. \n\nIs there a way I can define another score method without losing the parallel execution possibility?\n\nThanks\n",
  "closed_by": {
    "login": "amueller",
    "id": 449558,
    "node_id": "MDQ6VXNlcjQ0OTU1OA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amueller",
    "html_url": "https://github.com/amueller",
    "followers_url": "https://api.github.com/users/amueller/followers",
    "following_url": "https://api.github.com/users/amueller/following{/other_user}",
    "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amueller/subscriptions",
    "organizations_url": "https://api.github.com/users/amueller/orgs",
    "repos_url": "https://api.github.com/users/amueller/repos",
    "events_url": "https://api.github.com/users/amueller/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amueller/received_events",
    "type": "User",
    "site_admin": false
  }
},{"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/35954763", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-35954763", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 35954763, "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTU0NzYz", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-24T23:41:49Z", "updated_at": "2014-02-24T23:41:49Z", "author_association": "MEMBER", "body": "This is surprising, so we'll have to work out what the problem is and make sure it works!\n\nCan you please provide a little more detail:\n- What do you mean by \"crashes\"?\n- What version of scikit-learn is this? If it's 0.14, does it still happen in the current development version?\n- Multiprocessing has platform-specific issues. What platform are you on? (e.g. `import platform; platform.platform()`)\n- Have you tried it on different datasets?\n\nFWIW, my machine has no problem fitting iris with this snippet on the development version of sklearn.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/35990430", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-35990430", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 35990430, "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTkwNDMw", "user": {"login": "adverley", "id": 5717716, "node_id": "MDQ6VXNlcjU3MTc3MTY=", "avatar_url": "https://avatars1.githubusercontent.com/u/5717716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adverley", "html_url": "https://github.com/adverley", "followers_url": "https://api.github.com/users/adverley/followers", "following_url": "https://api.github.com/users/adverley/following{/other_user}", "gists_url": "https://api.github.com/users/adverley/gists{/gist_id}", "starred_url": "https://api.github.com/users/adverley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adverley/subscriptions", "organizations_url": "https://api.github.com/users/adverley/orgs", "repos_url": "https://api.github.com/users/adverley/repos", "events_url": "https://api.github.com/users/adverley/events{/privacy}", "received_events_url": "https://api.github.com/users/adverley/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-25T09:40:56Z", "updated_at": "2014-02-25T09:42:31Z", "author_association": "NONE", "body": "Thank you for your fast reply.\n\nWith crashing I actually mean freezing. It doesn't continue anymore and there is also no more activity to be monitored in the python process of task manager of windows. The processes are still there and consume a constant amount of RAM but require no processing time. \n\nThis is scikit-learn version 0.14, last updated and run using Enthought Canopy.\n\nI am on platform \"Windows-7-6.1.7601-SP1\".\n\nI will go more into depth by providing a generic example of the problem. I think it has to do with the GridSearchCV being placed in a for loop. (To not waste too much of your time, you should probably start at the run_tune_process() method which is being called at the bottom of the code and calls the method containing GridSearchCV() in a for loop)\n\n# Code:\n\n```\nimport sklearn.metrics as metrics\nfrom sklearn.grid_search import GridSearchCV\nimport numpy as np\nimport os\nfrom sklearn import datasets\nfrom sklearn import svm as sk\n\n\ndef tune_hyperparameters(trainingData, period):\n    allDataTrain = trainingData\n\n    # Define hyperparameters and construct a dictionary of them\n    amount_kernels = 2\n    kernels = ['rbf','linear']\n    gamma_range =   10. ** np.arange(-5, 5)\n    C_range =       10. ** np.arange(-5, 5)\n    tuned_parameters = [\n                        {'kernel': ['rbf'],     'gamma': gamma_range , 'C': C_range},\n                        {'kernel': ['linear'],  'C': C_range}\n                       ]\n\n    print(\"Tuning hyper-parameters on period = \" + str(period) + \"\\n\")\n\n    clf = GridSearchCV( sk.SVC(), \n                        tuned_parameters,\n                        cv=5,\n                        pre_dispatch='4*n_jobs', \n                        n_jobs=2,\n                        verbose = 1,\n                        scoring=metrics.make_scorer(metrics.scorer.f1_score, average=\"macro\")\n                        )\n    clf.fit(allDataTrain[:,1:], allDataTrain[:,0:1].ravel())\n\n    # other code will output some data to files, graphs and will save the optimal model with joblib package\n\n\n    #   Eventually we will return the optimal model\n    return clf\n\ndef run_tune_process(hyperparam_tuning_method,trainingData, testData):    \n    for period in np.arange(0,100,10):\n                clf = hyperparam_tuning_method(trainingData,period)\n\n                y_real = testData[:,0:1].ravel()\n                y_pred = clf.predict(testData[:,1:])\n\n# import some data to play with\niris = datasets.load_iris()\nX_training = iris.data[0:100,:]  \nY_training = (iris.target[0:100]).reshape(100,1)\ntrainingset = np.hstack((Y_training, X_training))\n\nX_test = iris.data[100:150,:]  \nY_test = (iris.target[100:150]).reshape(50,1)\ntestset = np.hstack((Y_test, X_test))\n\nrun_tune_process(tune_hyperparameters,trainingset,testset)\n```\n\nOnce again, this code works on my computer only when I change n_jobs to 1 or when I don't define a scoring= argument.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/35995946", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-35995946", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 35995946, "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTk1OTQ2", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-25T10:52:55Z", "updated_at": "2014-02-25T10:52:55Z", "author_association": "MEMBER", "body": "Generally multiprocessing in Windows encounters a lot of problems. But I\ndon't know why this should be correlated with a custom metric. There's\nnothing about the average=macro option in 0.14 that suggests it should be\nmore likely to hang than the default average (weighted). At the development\nhead, this completes in 11s on my macbook, and in 7s at version 0.14\n(that's something to look into!)\n\nAre you able to try this out in the current development version, to see if\nit's still an issue?\n\nOn 25 February 2014 20:40, adverley notifications@github.com wrote:\n\n>  Thank you for your fast reply.\n> \n> With crashing I actually mean freezing. It doesn't continue anymore and\n> there is also no more activity to be monitored in the python process of\n> task manager of windows. The processes are still there and consume a\n> constant amount of RAM but require no processing time.\n> \n> This is scikit-learn version 0.14, last updated and run using Enthought\n> Canopy.\n> \n> I am on platform \"Windows-7-6.1.7601-SP1\".\n> \n> I will go more into depth by providing a generic example of the problem. I\n> think it has to do with the GridSearchCV being placed in a for loop. (To\n> not waste too much of your time, you should probably start at the\n> run_tune_process() method which is being called at the bottom of the code\n> and calls the method containing GridSearchCV() in a for loop)\n> Code:\n> \n> import sklearn.metrics as metrics\n> from sklearn.grid_search import GridSearchCV\n> import numpy as np\n> import os\n> from sklearn import datasets\n> from sklearn import svm as sk\n> \n> def tune_hyperparameters(trainingData, period):\n>     allDataTrain = trainingData\n> \n> ```\n> # Define hyperparameters and construct a dictionary of them\n> amount_kernels = 2\n> kernels = ['rbf','linear']\n> gamma_range =   10. ** np.arange(-5, 5)\n> C_range =       10. ** np.arange(-5, 5)\n> tuned_parameters = [\n>                     {'kernel': ['rbf'],     'gamma': gamma_range , 'C': C_range},\n>                     {'kernel': ['linear'],  'C': C_range}\n>                    ]\n> \n> print(\"Tuning hyper-parameters on period = \" + str(period) + \"\\n\")\n> \n> clf = GridSearchCV( sk.SVC(),\n>                     tuned_parameters,\n>                     cv=5,\n>                     pre_dispatch='4*n_jobs',\n>                     n_jobs=2,\n>                     verbose = 1,\n>                     scoring=metrics.make_scorer(metrics.scorer.f1_score, average=\"macro\")\n>                     )\n> clf.fit(allDataTrain[:,1:], allDataTrain[:,0:1].ravel())\n> \n> # other code will output some data to files, graphs and will save the optimal model with joblib package\n> \n> \n> #   Eventually we will return the optimal model\n> return clf\n> ```\n> \n> def run_tune_process(hyperparam_tuning_method,trainingData, testData):\n>     for period in np.arange(0,100,10):\n>                 clf = hyperparam_tuning_method(trainingData,period)\n> \n> ```\n>             y_real = testData[:,0:1].ravel()\n>             y_pred = clf.predict(testData[:,1:])\n> ```\n> \n> # import some data to play with\n> \n> iris = datasets.load_iris()\n> X_training = iris.data[0:100,:]\n> Y_training = (iris.target[0:100]).reshape(100,1)\n> trainingset = np.hstack((Y_training, X_training))\n> \n> X_test = iris.data[100:150,:]\n> Y_test = (iris.target[100:150]).reshape(50,1)\n> testset = np.hstack((Y_test, X_test))\n> \n> run_tune_process(tune_hyperparameters,trainingset,testset)\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-35990430\n> .\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/35996528", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-35996528", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 35996528, "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTk2NTI4", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-25T11:00:41Z", "updated_at": "2014-02-25T11:00:41Z", "author_association": "MEMBER", "body": "(As a side point, @ogrisel, I note there seems to be a lot more joblib\nparallelisation overhead in master -- on OS X at least -- that wasn't there\nin 0.14...)\n\nOn 25 February 2014 21:52, Joel Nothman jnothman@student.usyd.edu.auwrote:\n\n> Generally multiprocessing in Windows encounters a lot of problems. But I\n> don't know why this should be correlated with a custom metric. There's\n> nothing about the average=macro option in 0.14 that suggests it should be\n> more likely to hang than the default average (weighted). At the development\n> head, this completes in 11s on my macbook, and in 7s at version 0.14\n> (that's something to look into!)\n> \n> Are you able to try this out in the current development version, to see if\n> it's still an issue?\n> \n> On 25 February 2014 20:40, adverley notifications@github.com wrote:\n> \n> >  Thank you for your fast reply.\n> > \n> > With crashing I actually mean freezing. It doesn't continue anymore and\n> > there is also no more activity to be monitored in the python process of\n> > task manager of windows. The processes are still there and consume a\n> > constant amount of RAM but require no processing time.\n> > \n> > This is scikit-learn version 0.14, last updated and run using Enthought\n> > Canopy.\n> > \n> > I am on platform \"Windows-7-6.1.7601-SP1\".\n> > \n> > I will go more into depth by providing a generic example of the problem.\n> > I think it has to do with the GridSearchCV being placed in a for loop. (To\n> > not waste too much of your time, you should probably start at the\n> > run_tune_process() method which is being called at the bottom of the code\n> > and calls the method containing GridSearchCV() in a for loop)\n> > Code:\n> > \n> > import sklearn.metrics as metrics\n> > from sklearn.grid_search import GridSearchCV\n> > import numpy as np\n> > import os\n> > from sklearn import datasets\n> > from sklearn import svm as sk\n> > \n> > def tune_hyperparameters(trainingData, period):\n> >     allDataTrain = trainingData\n> > \n> > ```\n> > # Define hyperparameters and construct a dictionary of them\n> > amount_kernels = 2\n> > kernels = ['rbf','linear']\n> > gamma_range =   10. ** np.arange(-5, 5)\n> > C_range =       10. ** np.arange(-5, 5)\n> > tuned_parameters = [\n> >                     {'kernel': ['rbf'],     'gamma': gamma_range , 'C': C_range},\n> >                     {'kernel': ['linear'],  'C': C_range}\n> >                    ]\n> > \n> > print(\"Tuning hyper-parameters on period = \" + str(period) + \"\\n\")\n> > \n> > clf = GridSearchCV( sk.SVC(),\n> >                     tuned_parameters,\n> >                     cv=5,\n> >                     pre_dispatch='4*n_jobs',\n> >                     n_jobs=2,\n> >                     verbose = 1,\n> >                     scoring=metrics.make_scorer(metrics.scorer.f1_score, average=\"macro\")\n> >                     )\n> > clf.fit(allDataTrain[:,1:], allDataTrain[:,0:1].ravel())\n> > \n> > # other code will output some data to files, graphs and will save the optimal model with joblib package\n> > \n> > \n> > #   Eventually we will return the optimal model\n> > return clf\n> > ```\n> > \n> > def run_tune_process(hyperparam_tuning_method,trainingData, testData):\n> >     for period in np.arange(0,100,10):\n> >                 clf = hyperparam_tuning_method(trainingData,period)\n> > \n> > ```\n> >             y_real = testData[:,0:1].ravel()\n> >             y_pred = clf.predict(testData[:,1:])\n> > ```\n> > \n> > # import some data to play with\n> > \n> > iris = datasets.load_iris()\n> > X_training = iris.data[0:100,:]\n> > Y_training = (iris.target[0:100]).reshape(100,1)\n> > trainingset = np.hstack((Y_training, X_training))\n> > \n> > X_test = iris.data[100:150,:]\n> > Y_test = (iris.target[100:150]).reshape(50,1)\n> > testset = np.hstack((Y_test, X_test))\n> > \n> > run_tune_process(tune_hyperparameters,trainingset,testset)\n> > \n> > ## \n> > \n> > Reply to this email directly or view it on GitHubhttps://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-35990430\n> > .\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/37311446", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-37311446", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 37311446, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzExNDQ2", "user": {"login": "larsmans", "id": 335383, "node_id": "MDQ6VXNlcjMzNTM4Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/335383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsmans", "html_url": "https://github.com/larsmans", "followers_url": "https://api.github.com/users/larsmans/followers", "following_url": "https://api.github.com/users/larsmans/following{/other_user}", "gists_url": "https://api.github.com/users/larsmans/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsmans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsmans/subscriptions", "organizations_url": "https://api.github.com/users/larsmans/orgs", "repos_url": "https://api.github.com/users/larsmans/repos", "events_url": "https://api.github.com/users/larsmans/events{/privacy}", "received_events_url": "https://api.github.com/users/larsmans/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-11T15:50:26Z", "updated_at": "2014-03-11T15:50:26Z", "author_association": "MEMBER", "body": "This has nothing to do with custom scorers. This is a [well-known feature](http://docs.python.org/2/library/multiprocessing.html#windows) of Python multiprocessing on Windows: you have to run everything that uses `n_jobs=-1` in an `if __name__ == '__main__'` block or you'll get freezes/crashes. Maybe we should document this somewhere prominently, e.g. in the README?\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/37314316", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-37314316", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 37314316, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzE0MzE2", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-11T16:11:49Z", "updated_at": "2014-03-11T16:11:49Z", "author_association": "MEMBER", "body": "> you have to run everything that uses n_jobs= -1 in an if **name** ==\n> '**main**' block or you'll get freezes/crashes.\n\nWell, the good news is that nowadays joblib gives a meaningful error\nmessage on such crash, rather than a fork bomb.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/37314773", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-37314773", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 37314773, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzE0Nzcz", "user": {"login": "larsmans", "id": 335383, "node_id": "MDQ6VXNlcjMzNTM4Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/335383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsmans", "html_url": "https://github.com/larsmans", "followers_url": "https://api.github.com/users/larsmans/followers", "following_url": "https://api.github.com/users/larsmans/following{/other_user}", "gists_url": "https://api.github.com/users/larsmans/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsmans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsmans/subscriptions", "organizations_url": "https://api.github.com/users/larsmans/orgs", "repos_url": "https://api.github.com/users/larsmans/repos", "events_url": "https://api.github.com/users/larsmans/events{/privacy}", "received_events_url": "https://api.github.com/users/larsmans/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-11T16:15:43Z", "updated_at": "2014-03-11T16:15:43Z", "author_association": "MEMBER", "body": "@GaelVaroquaux does current scikit-learn give that error message? If so, the issue can be considered fixed, IMHO.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/37315004", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-37315004", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 37315004, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzE1MDA0", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-11T16:17:27Z", "updated_at": "2014-03-11T16:17:27Z", "author_association": "MEMBER", "body": "> @GaelVaroquaux does current scikit-learn give that error message? If so, the\n> issue can be considered fixed, IMHO.\n\nIt should do. The only way to be sure is to check. I am on the move right\nnow, and I cannot boot up a Windows VM to do that.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/37315823", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-37315823", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 37315823, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzE1ODIz", "user": {"login": "larsmans", "id": 335383, "node_id": "MDQ6VXNlcjMzNTM4Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/335383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsmans", "html_url": "https://github.com/larsmans", "followers_url": "https://api.github.com/users/larsmans/followers", "following_url": "https://api.github.com/users/larsmans/following{/other_user}", "gists_url": "https://api.github.com/users/larsmans/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsmans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsmans/subscriptions", "organizations_url": "https://api.github.com/users/larsmans/orgs", "repos_url": "https://api.github.com/users/larsmans/repos", "events_url": "https://api.github.com/users/larsmans/events{/privacy}", "received_events_url": "https://api.github.com/users/larsmans/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-11T16:23:40Z", "updated_at": "2014-03-11T16:23:40Z", "author_association": "MEMBER", "body": "I'm not going to install a C compiler on Windows just for this. Sorry, but I really don't do Windows :)\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/37316389", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-37316389", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 37316389, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzE2Mzg5", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-11T16:27:51Z", "updated_at": "2014-03-11T16:27:51Z", "author_association": "MEMBER", "body": "> I'm not going to install a C compiler on Windows just for this. Sorry, but I\n> really don't do Windows :)\n\nI have a Windows VM. I can check. It's just a question of finding a\nlittle be of time to do it.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/37318306", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-37318306", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 37318306, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzE4MzA2", "user": {"login": "adverley", "id": 5717716, "node_id": "MDQ6VXNlcjU3MTc3MTY=", "avatar_url": "https://avatars1.githubusercontent.com/u/5717716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adverley", "html_url": "https://github.com/adverley", "followers_url": "https://api.github.com/users/adverley/followers", "following_url": "https://api.github.com/users/adverley/following{/other_user}", "gists_url": "https://api.github.com/users/adverley/gists{/gist_id}", "starred_url": "https://api.github.com/users/adverley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adverley/subscriptions", "organizations_url": "https://api.github.com/users/adverley/orgs", "repos_url": "https://api.github.com/users/adverley/repos", "events_url": "https://api.github.com/users/adverley/events{/privacy}", "received_events_url": "https://api.github.com/users/adverley/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-11T16:42:56Z", "updated_at": "2014-03-11T16:42:56Z", "author_association": "NONE", "body": "@larsmans , you are completely right. The custom scorer object was a mistake of me, the problem lies indeed in the multiprocessing on windows. I tried this same code on a Linux and it runs well.  \n\nI don't get any error messages because it doesn't crash, it just stops doing any meaningful. \n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/37728870", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-37728870", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 37728870, "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzI4ODcw", "user": {"login": "larsmans", "id": 335383, "node_id": "MDQ6VXNlcjMzNTM4Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/335383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsmans", "html_url": "https://github.com/larsmans", "followers_url": "https://api.github.com/users/larsmans/followers", "following_url": "https://api.github.com/users/larsmans/following{/other_user}", "gists_url": "https://api.github.com/users/larsmans/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsmans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsmans/subscriptions", "organizations_url": "https://api.github.com/users/larsmans/orgs", "repos_url": "https://api.github.com/users/larsmans/repos", "events_url": "https://api.github.com/users/larsmans/events{/privacy}", "received_events_url": "https://api.github.com/users/larsmans/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-15T15:38:38Z", "updated_at": "2014-03-15T15:38:38Z", "author_association": "MEMBER", "body": "@adverley Could you try the most recent version from GitHub on your Windows box?\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/71143620", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-71143620", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 71143620, "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTQzNjIw", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2015-01-23T03:45:36Z", "updated_at": "2015-01-23T03:45:36Z", "author_association": "MEMBER", "body": "Closing because of lack of feeback and it is probably a known issue that is fixed in newer joblib.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/86775491", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-86775491", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 86775491, "node_id": "MDEyOklzc3VlQ29tbWVudDg2Nzc1NDkx", "user": {"login": "hirak99", "id": 10203874, "node_id": "MDQ6VXNlcjEwMjAzODc0", "avatar_url": "https://avatars2.githubusercontent.com/u/10203874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirak99", "html_url": "https://github.com/hirak99", "followers_url": "https://api.github.com/users/hirak99/followers", "following_url": "https://api.github.com/users/hirak99/following{/other_user}", "gists_url": "https://api.github.com/users/hirak99/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirak99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirak99/subscriptions", "organizations_url": "https://api.github.com/users/hirak99/orgs", "repos_url": "https://api.github.com/users/hirak99/repos", "events_url": "https://api.github.com/users/hirak99/events{/privacy}", "received_events_url": "https://api.github.com/users/hirak99/received_events", "type": "User", "site_admin": false}, "created_at": "2015-03-27T00:53:28Z", "updated_at": "2015-03-27T01:11:18Z", "author_association": "NONE", "body": "Not sure if related, does seem to be.\n\nIn windows, custom scorer still freezes. I encountered this thread on google - removed the scorer, and the grid search works.\n\nWhen it freezes, it shows no error message. There are 3 python processes spawned too (because I set n_jobs=3). However, the CPU utilization remains 0 for all python processes. I am using IPython Notebook.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/88295259", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-88295259", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 88295259, "node_id": "MDEyOklzc3VlQ29tbWVudDg4Mjk1MjU5", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-01T00:45:39Z", "updated_at": "2015-04-01T00:45:39Z", "author_association": "MEMBER", "body": "Can you share the code of the scorer? It seems a bit unlikely.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/88295501", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-88295501", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 88295501, "node_id": "MDEyOklzc3VlQ29tbWVudDg4Mjk1NTAx", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-01T00:46:21Z", "updated_at": "2015-04-01T00:46:21Z", "author_association": "MEMBER", "body": "Does your scorer use joblib / n_jobs anywhere? It shouldn't, and that could maybe cause problems (though I think joblib should detect that).\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/88326302", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-88326302", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 88326302, "node_id": "MDEyOklzc3VlQ29tbWVudDg4MzI2MzAy", "user": {"login": "hirak99", "id": 10203874, "node_id": "MDQ6VXNlcjEwMjAzODc0", "avatar_url": "https://avatars2.githubusercontent.com/u/10203874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirak99", "html_url": "https://github.com/hirak99", "followers_url": "https://api.github.com/users/hirak99/followers", "following_url": "https://api.github.com/users/hirak99/following{/other_user}", "gists_url": "https://api.github.com/users/hirak99/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirak99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirak99/subscriptions", "organizations_url": "https://api.github.com/users/hirak99/orgs", "repos_url": "https://api.github.com/users/hirak99/repos", "events_url": "https://api.github.com/users/hirak99/events{/privacy}", "received_events_url": "https://api.github.com/users/hirak99/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-01T03:12:13Z", "updated_at": "2015-04-01T23:29:09Z", "author_association": "NONE", "body": "Sure - here's the full code - http://pastebin.com/yUE26SNs\n\nThe scorer function is \"score_model\", it doesn't use joblib.\n\nThis runs from command prompt, but not from IPython Notebook. The error message is -\n`AttributeError: Can't get attribute 'score_model' on <module '__main__' (built-in)>;`\n\nThen the IPython and all the spawned python instances become idle - silently - and don't respond to any python code anymore till I restart it.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/88530502", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-88530502", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 88530502, "node_id": "MDEyOklzc3VlQ29tbWVudDg4NTMwNTAy", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-01T15:51:38Z", "updated_at": "2015-04-01T15:51:38Z", "author_association": "MEMBER", "body": "Fix the attribute error, then it'll work.\nDo you do pylab imports in IPython notebook? Otherwise everything should be the same.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/88663624", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-88663624", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 88663624, "node_id": "MDEyOklzc3VlQ29tbWVudDg4NjYzNjI0", "user": {"login": "hirak99", "id": 10203874, "node_id": "MDQ6VXNlcjEwMjAzODc0", "avatar_url": "https://avatars2.githubusercontent.com/u/10203874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirak99", "html_url": "https://github.com/hirak99", "followers_url": "https://api.github.com/users/hirak99/followers", "following_url": "https://api.github.com/users/hirak99/following{/other_user}", "gists_url": "https://api.github.com/users/hirak99/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirak99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirak99/subscriptions", "organizations_url": "https://api.github.com/users/hirak99/orgs", "repos_url": "https://api.github.com/users/hirak99/repos", "events_url": "https://api.github.com/users/hirak99/events{/privacy}", "received_events_url": "https://api.github.com/users/hirak99/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-01T23:34:09Z", "updated_at": "2015-04-01T23:35:50Z", "author_association": "NONE", "body": "Well I do not know what causes the AttributeError... Though it is most likely related to joblibs, since _it happens only when n_jobs is more than 1_, runs fine with `n_jobs=1`.\n\nThe error talks about attribute `score_model` missing from `__main__`, whether or not I have a `if __name__ == '__main__'` in the IPython Notebook or not.\n\n(I realized that the error line was pasted incorrectly above - I edited in the post above.)\n\nI don't use pylab.\n\nHere's the full extended error message - http://pastebin.com/23y5uHT2\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/88932522", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-88932522", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 88932522, "node_id": "MDEyOklzc3VlQ29tbWVudDg4OTMyNTIy", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-02T14:43:20Z", "updated_at": "2015-04-02T14:43:20Z", "author_association": "MEMBER", "body": "Hum, that is likely related to issues of multiprocessing on windows. Maybe @GaelVaroquaux or @ogrisel can help.\nI don't know what the notebook makes of the `__name__ == \"__main__\"`.\nTry not defining the metric in the notebook, but in a separate file and import it. I'd think that would fix it.\nThis is not really related to GridSearchCV, but some interesting interaction between windows multiprocessing, IPython notebook and joblib.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/258591734", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-258591734", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 258591734, "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODU5MTczNA==", "user": {"login": "alwaysandeep", "id": 21002508, "node_id": "MDQ6VXNlcjIxMDAyNTA4", "avatar_url": "https://avatars0.githubusercontent.com/u/21002508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alwaysandeep", "html_url": "https://github.com/alwaysandeep", "followers_url": "https://api.github.com/users/alwaysandeep/followers", "following_url": "https://api.github.com/users/alwaysandeep/following{/other_user}", "gists_url": "https://api.github.com/users/alwaysandeep/gists{/gist_id}", "starred_url": "https://api.github.com/users/alwaysandeep/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alwaysandeep/subscriptions", "organizations_url": "https://api.github.com/users/alwaysandeep/orgs", "repos_url": "https://api.github.com/users/alwaysandeep/repos", "events_url": "https://api.github.com/users/alwaysandeep/events{/privacy}", "received_events_url": "https://api.github.com/users/alwaysandeep/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-05T05:18:50Z", "updated_at": "2016-11-05T05:25:07Z", "author_association": "NONE", "body": "guys...thanks for the thread. Anyway i should have checked this thread before, wasted 5 hours of my time on this. Trying to run in parallel processing. Thanks a lot :) \nTO ADD A FEEDBACK: its still freezing. I faced the same issue when in presence of my own make_Score cost function..my system starts freezing. When i did not use custom cost function, i did not face these freezes in parallel processing\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/259096336", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-259096336", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 259096336, "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTA5NjMzNg==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-08T10:07:57Z", "updated_at": "2016-11-08T10:07:57Z", "author_association": "MEMBER", "body": "The best way of turning these 5 hours into something useful for the project, would be to provide us with a stand-alone example reproducing the problem.\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/268395659", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-268395659", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 268395659, "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODM5NTY1OQ==", "user": {"login": "vosilov", "id": 15160529, "node_id": "MDQ6VXNlcjE1MTYwNTI5", "avatar_url": "https://avatars0.githubusercontent.com/u/15160529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vosilov", "html_url": "https://github.com/vosilov", "followers_url": "https://api.github.com/users/vosilov/followers", "following_url": "https://api.github.com/users/vosilov/following{/other_user}", "gists_url": "https://api.github.com/users/vosilov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vosilov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vosilov/subscriptions", "organizations_url": "https://api.github.com/users/vosilov/orgs", "repos_url": "https://api.github.com/users/vosilov/repos", "events_url": "https://api.github.com/users/vosilov/events{/privacy}", "received_events_url": "https://api.github.com/users/vosilov/received_events", "type": "User", "site_admin": false}, "created_at": "2016-12-21T00:02:32Z", "updated_at": "2016-12-21T00:02:32Z", "author_association": "NONE", "body": "I was experiencing the same issue on Windows 10 working in Jupyter notebook trying to use a custom scorer within a nested cross-validation and n_jobs=-1. I was getting the `AttributeError: Can't get attribute 'custom_scorer' on <module '__main__' (built-in)>;` message. \r\nAs @amueller suggested, importing the custom scorer instead of defining it in the notebook works."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/319605196", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-319605196", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 319605196, "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTYwNTE5Ng==", "user": {"login": "martinxtm", "id": 20025557, "node_id": "MDQ6VXNlcjIwMDI1NTU3", "avatar_url": "https://avatars1.githubusercontent.com/u/20025557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinxtm", "html_url": "https://github.com/martinxtm", "followers_url": "https://api.github.com/users/martinxtm/followers", "following_url": "https://api.github.com/users/martinxtm/following{/other_user}", "gists_url": "https://api.github.com/users/martinxtm/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinxtm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinxtm/subscriptions", "organizations_url": "https://api.github.com/users/martinxtm/orgs", "repos_url": "https://api.github.com/users/martinxtm/repos", "events_url": "https://api.github.com/users/martinxtm/events{/privacy}", "received_events_url": "https://api.github.com/users/martinxtm/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-02T08:29:41Z", "updated_at": "2017-08-02T08:29:41Z", "author_association": "NONE", "body": "I have the exact same problem on OSX 10.10.5"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320345300", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320345300", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320345300, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDM0NTMwMA==", "user": {"login": "boazsh", "id": 8148263, "node_id": "MDQ6VXNlcjgxNDgyNjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8148263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boazsh", "html_url": "https://github.com/boazsh", "followers_url": "https://api.github.com/users/boazsh/followers", "following_url": "https://api.github.com/users/boazsh/following{/other_user}", "gists_url": "https://api.github.com/users/boazsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/boazsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boazsh/subscriptions", "organizations_url": "https://api.github.com/users/boazsh/orgs", "repos_url": "https://api.github.com/users/boazsh/repos", "events_url": "https://api.github.com/users/boazsh/events{/privacy}", "received_events_url": "https://api.github.com/users/boazsh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-04T20:25:42Z", "updated_at": "2017-08-04T20:25:42Z", "author_association": "NONE", "body": "Same here.\r\nOSX 10.12.5"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320483567", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320483567", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320483567, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDQ4MzU2Nw==", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-06T03:38:14Z", "updated_at": "2017-08-06T03:38:14Z", "author_association": "MEMBER", "body": "Please give a reproducible code snippet. We'd love to get to the bottom of this. It is hard to understand without code, including data, that shows us the issue."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320885103", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320885103", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320885103, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDg4NTEwMw==", "user": {"login": "boazsh", "id": 8148263, "node_id": "MDQ6VXNlcjgxNDgyNjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8148263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boazsh", "html_url": "https://github.com/boazsh", "followers_url": "https://api.github.com/users/boazsh/followers", "following_url": "https://api.github.com/users/boazsh/following{/other_user}", "gists_url": "https://api.github.com/users/boazsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/boazsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boazsh/subscriptions", "organizations_url": "https://api.github.com/users/boazsh/orgs", "repos_url": "https://api.github.com/users/boazsh/repos", "events_url": "https://api.github.com/users/boazsh/events{/privacy}", "received_events_url": "https://api.github.com/users/boazsh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T08:15:06Z", "updated_at": "2017-08-08T12:08:29Z", "author_association": "NONE", "body": "Just run these lines in a python shell\r\n\r\n```python\r\nimport numpy as np\r\nfrom sklearn.decomposition import PCA\r\nfrom sklearn.svm import SVC\r\nfrom sklearn.preprocessing import RobustScaler\r\nfrom sklearn.metrics import classification_report\r\nfrom sklearn.pipeline import Pipeline\r\nfrom sklearn.model_selection import cross_val_predict\r\n\r\nnp.random.seed(1234)\r\nX = np.random.sample((1000, 100))\r\nY = np.random.sample((1000)) > 0.5\r\nsvc_pipeline = Pipeline([('pca', PCA(n_components=95)), ('svc', SVC())])\r\npredictions = cross_val_predict(svc_pipeline, X, Y, cv=30, n_jobs=-1)\r\nprint classification_report(Y, predictions)\r\n```\r\n\r\nNote that removing the PCA step from the pipeline solves the issue.\r\n\r\nMore info:\r\n\r\nDarwin-16.6.0-x86_64-i386-64bit\r\n('Python', '2.7.13 (default, Apr  4 2017, 08:47:57) \\n[GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.38)]')\r\n('NumPy', '1.12.1')\r\n('SciPy', '0.19.1')\r\n('Scikit-Learn', '0.18.2')"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320924503", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320924503", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320924503, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDkyNDUwMw==", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T11:09:12Z", "updated_at": "2017-08-08T11:09:12Z", "author_association": "MEMBER", "body": "seeing as you don't use a custom scorer, should we assume that is a\nseparate issue?\n\nOn 8 Aug 2017 6:15 pm, \"boazsh\" <notifications@github.com> wrote:\n\n> Just run these lines in a python shell\n>\n> from sklearn.decomposition import PCAfrom sklearn.svm import SVCfrom sklearn.preprocessing import RobustScalerfrom sklearn.metrics import classification_reportfrom sklearn.pipeline import Pipelinefrom sklearn.model_selection import cross_val_predict\n>\n> X = np.random.sample((1000, 100))\n> Y = np.random.sample((1000)) > 0.5\n> svc_pipeline = Pipeline([('pca', PCA(n_components=95)), ('svc', SVC())])\n> predictions = cross_val_predict(svc_pipeline, X, Y, cv=30, n_jobs=-1)print classification_report(Y, predictions)\n>\n> Note that removing the PCA step from the pipeline solves the issue.\n>\n> More info:\n>\n> scikit-learn==0.18.2\n> scipy==0.19.1\n> numpy==1.12.1\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320885103>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAEz6-6Klhc67b5kZ17fFTxc8RfZQ_BWks5sWBkLgaJpZM4BkiD9>\n> .\n>\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320926524", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320926524", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320926524, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDkyNjUyNA==", "user": {"login": "boazsh", "id": 8148263, "node_id": "MDQ6VXNlcjgxNDgyNjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8148263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boazsh", "html_url": "https://github.com/boazsh", "followers_url": "https://api.github.com/users/boazsh/followers", "following_url": "https://api.github.com/users/boazsh/following{/other_user}", "gists_url": "https://api.github.com/users/boazsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/boazsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boazsh/subscriptions", "organizations_url": "https://api.github.com/users/boazsh/orgs", "repos_url": "https://api.github.com/users/boazsh/repos", "events_url": "https://api.github.com/users/boazsh/events{/privacy}", "received_events_url": "https://api.github.com/users/boazsh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T11:19:44Z", "updated_at": "2017-08-08T11:19:44Z", "author_association": "NONE", "body": "When I first faced this issue I was using custom scorer, but while trying to simplify the example code as much as possible, I found that it is not necessarily have to contain custom scorer. At least on my machine. Importing the scorer also didn't help in my case. Anyway, the symptoms looks similar. The script hangs forever and the CPU utilization is low."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320932947", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320932947", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320932947, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDkzMjk0Nw==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T11:52:44Z", "updated_at": "2017-08-08T11:52:44Z", "author_association": "MEMBER", "body": "@boazsh thanks a lot for the snippet, it is not deterministic though, can you edit it and use a `np.random.RandomState` to make sure the random numbers are always the same on each run.\r\n\r\nAlso there is a work-around if you are using Python 3 suggested for example in https://github.com/scikit-learn/scikit-learn/issues/5115#issuecomment-187683383.\r\n\r\nI don't have a way to test this on OSX at the moment but I may be able to try in the upcoming days."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320933921", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320933921", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320933921, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDkzMzkyMQ==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T11:57:22Z", "updated_at": "2017-08-08T11:57:22Z", "author_association": "MEMBER", "body": "Some piece of information useful to have (just add what is missing to your earlier comment https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320885103):\r\n\r\n```py\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\n```\r\n\r\nAlso how did you install scikit-learn, with pip, with conda, with one of the OSX package managers (brew, etc ...) ?"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320936948", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320936948", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320936948, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDkzNjk0OA==", "user": {"login": "boazsh", "id": 8148263, "node_id": "MDQ6VXNlcjgxNDgyNjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8148263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boazsh", "html_url": "https://github.com/boazsh", "followers_url": "https://api.github.com/users/boazsh/followers", "following_url": "https://api.github.com/users/boazsh/following{/other_user}", "gists_url": "https://api.github.com/users/boazsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/boazsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boazsh/subscriptions", "organizations_url": "https://api.github.com/users/boazsh/orgs", "repos_url": "https://api.github.com/users/boazsh/repos", "events_url": "https://api.github.com/users/boazsh/events{/privacy}", "received_events_url": "https://api.github.com/users/boazsh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T12:10:38Z", "updated_at": "2017-08-08T12:10:38Z", "author_association": "NONE", "body": "Updated the snippet (used np.random.seed)\r\n\r\nDarwin-16.6.0-x86_64-i386-64bit\r\n('Python', '2.7.13 (default, Apr 4 2017, 08:47:57) \\n[GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.38)]')\r\n('NumPy', '1.12.1')\r\n('SciPy', '0.19.1')\r\n('Scikit-Learn', '0.18.2')"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320947905", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320947905", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320947905, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDk0NzkwNQ==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T12:57:41Z", "updated_at": "2017-08-08T12:57:41Z", "author_association": "MEMBER", "body": "> Updated the snippet (used np.random.seed)\r\n\r\nGreat thanks a lot!\r\n\r\n> Also how did you install scikit-learn, with pip, with conda, with one of the OSX package managers (brew, etc ...) ?\r\n\r\nHave you answered this one, I can't find your answer ..."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320948362", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320948362", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320948362, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDk0ODM2Mg==", "user": {"login": "boazsh", "id": 8148263, "node_id": "MDQ6VXNlcjgxNDgyNjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8148263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boazsh", "html_url": "https://github.com/boazsh", "followers_url": "https://api.github.com/users/boazsh/followers", "following_url": "https://api.github.com/users/boazsh/following{/other_user}", "gists_url": "https://api.github.com/users/boazsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/boazsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boazsh/subscriptions", "organizations_url": "https://api.github.com/users/boazsh/orgs", "repos_url": "https://api.github.com/users/boazsh/repos", "events_url": "https://api.github.com/users/boazsh/events{/privacy}", "received_events_url": "https://api.github.com/users/boazsh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T12:59:30Z", "updated_at": "2017-08-08T12:59:30Z", "author_association": "NONE", "body": "Sorry, missed it - pip."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320954026", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320954026", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320954026, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDk1NDAyNg==", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T13:21:40Z", "updated_at": "2017-08-08T13:21:40Z", "author_association": "MEMBER", "body": "FWIW, I have no problem running that snippet with:\n\n>>> import platform; print(platform.platform())\nDarwin-16.7.0-x86_64-i386-64bit\n>>> import sys; print(\"Python\", sys.version)\nPython 2.7.12 |Continuum Analytics, Inc.| (default, Jul  2 2016, 17:43:17)\n[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)]\n>>> import numpy; print(\"NumPy\", numpy.__version__)\nNumPy 1.13.1\n>>> import scipy; print(\"SciPy\", scipy.__version__)\nSciPy 0.19.1\n>>> import sklearn; print(\"Scikit-Learn\", sklearn.__version__)\nScikit-Learn 0.18.2\n\nCould you put verbose=10 in cross_val_predict, too, so that we can perhaps\nsee where it breaks for you?\n\nOn 8 August 2017 at 22:59, boazsh <notifications@github.com> wrote:\n\n> Sorry, missed it - pip.\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320948362>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAEz67S64KIXUGvARGjvxBOw_4aCAdqhks5sWFu0gaJpZM4BkiD9>\n> .\n>\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320959984", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320959984", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320959984, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDk1OTk4NA==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T13:44:08Z", "updated_at": "2017-08-08T13:44:08Z", "author_association": "MEMBER", "body": "@jnothman I am guessing that your conda environment uses MKL and not Accelerate. This freezing problem is specific to Accelerate and Python multiprocessing. http://scikit-learn.org/stable/faq.html#why-do-i-sometime-get-a-crash-freeze-with-n-jobs-1-under-osx-or-linux for more details.\r\n\r\npip on the other hand will use wheels that are shipped with Accelerate (at the time of writing).\r\n\r\nA work-around (other than the JOBLIB_START_METHOD) to avoid this particular bug is to use MKL (e.g. via conda) or OpenBLAS (e.g. via the conda-forge channel)."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320960479", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320960479", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320960479, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDk2MDQ3OQ==", "user": {"login": "boazsh", "id": 8148263, "node_id": "MDQ6VXNlcjgxNDgyNjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8148263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boazsh", "html_url": "https://github.com/boazsh", "followers_url": "https://api.github.com/users/boazsh/followers", "following_url": "https://api.github.com/users/boazsh/following{/other_user}", "gists_url": "https://api.github.com/users/boazsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/boazsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boazsh/subscriptions", "organizations_url": "https://api.github.com/users/boazsh/orgs", "repos_url": "https://api.github.com/users/boazsh/repos", "events_url": "https://api.github.com/users/boazsh/events{/privacy}", "received_events_url": "https://api.github.com/users/boazsh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T13:45:43Z", "updated_at": "2017-08-08T13:45:43Z", "author_association": "NONE", "body": "Nothing is being printed...\r\n\r\n![screen shot 2017-08-08 at 16 43 35](https://user-images.githubusercontent.com/8148263/29074692-e1a5f178-7c58-11e7-812f-6274bea026bc.png)\r\n\r\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/320961201", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-320961201", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 320961201, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDk2MTIwMQ==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T13:48:15Z", "updated_at": "2017-08-08T13:54:47Z", "author_association": "MEMBER", "body": "> @jnothman I am guessing that your conda environment uses MKL and not Accelerate.\r\n\r\n@jnothman in case you want to reproduce the problem, IIRC you can create an environment with Accelerate on OSX  with something like:\r\n```py\r\nconda create -n test-env python=3 nomkl scikit-learn ipython\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/321271120", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-321271120", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 321271120, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTI3MTEyMA==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-09T14:24:55Z", "updated_at": "2017-08-09T14:24:55Z", "author_association": "MEMBER", "body": "FWIW I can not reproduce the problem on my OS X VM. I tried to mimic as close as possible @boazsh's versions:\r\n\r\n```\r\nDarwin-16.1.0-x86_64-i386-64bit\r\n('Python', '2.7.13 |Continuum Analytics, Inc.| (default, Dec 20 2016, 23:05:08) \\n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)]')\r\n('NumPy', '1.12.1')\r\n('SciPy', '0.19.1')\r\n('Scikit-Learn', '0.18.2')\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/321276701", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-321276701", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 321276701, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTI3NjcwMQ==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-09T14:42:55Z", "updated_at": "2017-08-09T14:42:55Z", "author_association": "MEMBER", "body": "Hmm actually I can reproduce but your snippet was not a complete reproducer. Here is an updated snippet:\r\n\r\n```py\r\nimport numpy as np\r\nfrom sklearn.decomposition import PCA\r\nfrom sklearn.svm import SVC\r\nfrom sklearn.preprocessing import RobustScaler\r\nfrom sklearn.metrics import classification_report\r\nfrom sklearn.pipeline import Pipeline\r\nfrom sklearn.model_selection import cross_val_predict\r\n \r\nnp.random.seed(1234)\r\nX = np.random.sample((1000, 100))\r\nY = np.random.sample((1000)) > 0.5\r\nsvc_pipeline = Pipeline([('pca', PCA(n_components=95)), ('svc', SVC())])\r\nPCA(n_components=95).fit(X, Y) # this line is required to reproduce the freeze\r\npredictions = cross_val_predict(svc_pipeline, X, Y, cv=30, n_jobs=-1)\r\nprint(classification_report(Y, predictions))\r\n```\r\n\r\nIn any case, this is a known problem with Accelerate and Python multiprocessing. Work-arounds exist and have been listed in earlier posts. The easiest one is probably to use conda and make sure that you use MKL and not Accelerate."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/321494496", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-321494496", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 321494496, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTQ5NDQ5Ng==", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-10T09:02:38Z", "updated_at": "2017-08-10T09:02:38Z", "author_association": "MEMBER", "body": "On the longer term (probably scikit-learn 0.20) this problem will be universally solved by the new loky backend for joblib: https://github.com/scikit-learn/scikit-learn/issues/7650"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/321935905", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-321935905", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 321935905, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTkzNTkwNQ==", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-11T22:54:07Z", "updated_at": "2017-08-11T22:54:07Z", "author_association": "MEMBER", "body": "Having a fix to multiprocessing be dependent on the scikit-learn version is symptomatic of the problems of vendoring...."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/321958362", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-321958362", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 321958362, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTk1ODM2Mg==", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-12T05:14:23Z", "updated_at": "2017-08-12T05:14:23Z", "author_association": "MEMBER", "body": "> Having a fix to multiprocessing be dependent on the scikit-learn version is symptomatic of the problems of vendoring....\n\nI recently read the following, which I found interesting:\nhttps://lwn.net/Articles/730630/rss\n\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333829378", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333829378", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333829378, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzgyOTM3OA==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T12:41:52Z", "updated_at": "2017-10-03T14:00:34Z", "author_association": "NONE", "body": "I have a similar issue with RandomizedSearchCV; it hangs indefinitely. I am using a 3 year old macbook pro, 16GB ram and core i7 and my scikit-learn version is 0.19. \r\n\r\nPuzzling part is that it was working last Friday!!! Monday morning, I go back and try to run and it just freezes. I know from previous runs that it take about 60 min to finish, but I waited a lot longer than that and nothing happens, it just hangs, no error msgs, nothing and my computer heats up and sucks power like there's no tomorrow. Code below. I tried changing n_iter to 2 and n_jobs=1 after reading some comments here and that worked. So it may have something to do with n_jobs=-1. Still, this code worked fine last Friday! it just hates Mondays. My dataset size is less that 20k examples with dimensionality < 100.. \r\n \r\n\r\n```\r\nfrom sklearn.metrics import make_scorer\r\nfrom sklearn.cross_validation import cross_val_score\r\nfrom sklearn.grid_search import RandomizedSearchCV\r\nimport sklearn_crfsuite\r\n\r\ncrf = sklearn_crfsuite.CRF(\r\n    algorithm='lbfgs', \r\n    max_iterations=100, \r\n    all_possible_transitions=True\r\n)\r\nparams_space = {\r\n    'c1': scipy.stats.expon(scale=0.5),\r\n    'c2': scipy.stats.expon(scale=0.05),\r\n}\r\n\r\nf1_scorer = make_scorer(metrics.flat_f1_score, \r\n                        average='weighted', labels=labels)\r\nrs = RandomizedSearchCV(crf, params_space, \r\n                        cv=3, \r\n                        verbose=1, \r\n                        n_jobs=-1, \r\n                        n_iter=50, \r\n                        scoring=f1_scorer)\r\n\r\nrs.fit(X_train, y_train)  # THIS IS WHERE IT FREEZES\r\n```\r\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333835065", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333835065", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333835065, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzgzNTA2NQ==", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T13:04:44Z", "updated_at": "2017-10-03T13:04:44Z", "author_association": "MEMBER", "body": "what is crf? just to eliminate the possibility, could you try using\nreturn_train_score=False?\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333838434", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333838434", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333838434, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzgzODQzNA==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T13:17:29Z", "updated_at": "2017-10-03T13:17:29Z", "author_association": "MEMBER", "body": "It is very likely that this @KaisJM's problem is due to the well known limitation on Accelerate with multiprocessing, see our [faq](http://scikit-learn.org/stable/faq.html#why-do-i-sometime-get-a-crash-freeze-with-n-jobs-1-under-osx-or-linux).\r\n\r\nHow did you install scikit-learn?\r\n\r\nAlso for future reference, can you paste the output of:\r\n```py\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333841316", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333841316", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333841316, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg0MTMxNg==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T13:27:25Z", "updated_at": "2017-10-03T13:27:47Z", "author_association": "NONE", "body": "this was working last Friday!! I done nothing since. I think scikit learn is part of anaconda, but I did upgrade with pip (pip install --upgrade sklearn), but thats before I got this problem.. I ran the code fine after upgrading to 0.19.\r\n\r\nhere's the output of the above prints:\r\n\r\n```\r\nDarwin-15.6.0-x86_64-i386-64bit\r\n('Python', '2.7.12 |Continuum Analytics, Inc.| (default, Jul  2 2016, 17:43:17) \\n[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)]')\r\n('NumPy', '1.13.1')\r\n('SciPy', '0.19.1')\r\n('Scikit-Learn', '0.19.0')\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333848051", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333848051", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333848051, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg0ODA1MQ==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T13:50:23Z", "updated_at": "2017-10-03T13:51:44Z", "author_association": "NONE", "body": "@jnothman : I am using RandomizedSearchCV from sklearn.grid_search which does not have the return_train_score parameter. I know sklearn.grid_search is depricated.. I will try the one from sklearn.model_selection, but something tells me I will have the same exact issue). Updated original comment with more info and code."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333852852", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333852852", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333852852, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg1Mjg1Mg==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T14:06:41Z", "updated_at": "2017-10-03T14:06:41Z", "author_association": "MEMBER", "body": "Can you post the output of `conda list | grep numpy`. I would wild guess that by updating scikit-learn with pip you updated numpy with pip too and you got the numpy wheels which uses Accelerate and has the limitation mentioned above.\r\n\r\nSmall word of advice:\r\n* post a fully stand-alone snippet (for your next issue). That means anyone can copy and paste it in a IPython session and easily try to reproduce. This will give you the best chance of getting good feed-back.\r\n* if you are using conda, stick to conda to manage packages that are available through conda. Only use pip when you have to.\r\n* If you insist you want to use `pip install --update`, I would strongly recommend you use `pip install --update --no-deps`. Otherwise if a package dependends, say on numpy, and you happen not to have the latest numpy, numpy will be upgraded with pip, which you do not want."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333853050", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333853050", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333853050, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg1MzA1MA==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T14:07:21Z", "updated_at": "2017-10-03T14:07:21Z", "author_association": "MEMBER", "body": "Oh yeah and BTW, sklearn.grid_search is deprecated you probably want to use sklearn.model_selection at one point not too far down the road."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333854557", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333854557", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333854557, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg1NDU1Nw==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T14:12:20Z", "updated_at": "2017-10-03T14:17:50Z", "author_association": "NONE", "body": "Good advice, thank you. So is the workaround to downgrade numpy? what limitation are you referring to? the FAQ link above? I did read it, but I do not understand this stuff (i'm just an algo guy :) ).\r\n\r\noutput of `conda list | grep numpy`\r\n\r\nnumpy                     1.12.0                    <pip>\r\nnumpy                     1.12.0                   py27_0  \r\nnumpy                     1.13.1                    <pip>\r\nnumpydoc                  0.7.0                     <pip>"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333859963", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333859963", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333859963, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg1OTk2Mw==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T14:29:05Z", "updated_at": "2017-10-03T14:29:18Z", "author_association": "MEMBER", "body": "Wow three numpy installed I saw two before but never three ... anyway this seems indicative of the problem I was mentioning, i.e. that you have mixed pip and conda which is a bad idea for a given package.\r\n\r\n```\r\npip uninstall -y # maybe a few times to make sure you have removed pip installed packages\r\nconda install numpy -f\r\n```\r\n\r\nHopefully after that you will have a single numpy that uses MKL.\r\n\r\nIf I were you I would double-check that you don't have the same problem for other core scientific packages, e.g. scipy, etc ..."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333879678", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333879678", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333879678, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg3OTY3OA==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T15:30:19Z", "updated_at": "2017-10-03T15:31:14Z", "author_association": "NONE", "body": "the reason I resort to pip for some packages is that conda does not have some packages, which actually is very frustrating because I know mixing pip with conda is a bad idea. Next time that happens I'll use the --no-deps option."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333922905", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333922905", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333922905, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzkyMjkwNQ==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T17:43:21Z", "updated_at": "2017-10-03T21:31:12Z", "author_association": "NONE", "body": "one thing I should've mentioned is that I installed Spyder within the python env I was working in. However, I was able to run the code after installing Spyder, both in Spyder and in Jupyter.\r\n\r\n I did uninstall Spyder and the numpys above, re-installed bumpy with conda (which updated scikit to 0.19) and still get the same error. Something may have happened because of the Spyder install, but then why would it work for a day and then suddenly stop??"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/333938393", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-333938393", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 333938393, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzkzODM5Mw==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T18:37:12Z", "updated_at": "2017-10-03T18:47:24Z", "author_association": "NONE", "body": "ok, nothing is working!! should I just create a new environment (using conda) and re-install everything there? will that solve it or make it worse?"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334007627", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334007627", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334007627, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDAwNzYyNw==", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-03T23:25:39Z", "updated_at": "2017-10-03T23:25:39Z", "author_association": "MEMBER", "body": "Sounds worth a try!\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334039658", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334039658", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334039658, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDAzOTY1OA==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-04T03:20:27Z", "updated_at": "2017-10-04T03:39:48Z", "author_association": "NONE", "body": "created a new env and installed everything with conda, still freezes indefinitely. only one copy of each package etc.\r\n\r\nn_jobs=1 works,but takes forever of course (it worked in the previous env as well). n_jobs=-1 is what freezes indefinitely.\r\n\r\n```\r\nconda list | grep numpy\r\nnumpy                     1.13.1           py27hd567e90_2\r\n\r\n\r\nDarwin-15.6.0-x86_64-i386-64bit\r\n('Python', '2.7.13 |Continuum Analytics, Inc.| (default, Dec 20 2016, 23:05:08) \\n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)]')\r\n('NumPy', '1.13.1')\r\n('SciPy', '0.19.1')\r\n('Scikit-Learn', '0.19.0')\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334125742", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334125742", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334125742, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDEyNTc0Mg==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-04T11:24:30Z", "updated_at": "2017-10-04T11:24:30Z", "author_association": "MEMBER", "body": "Then I don't know. The only way we can investigate, is that you post a fully standalone snippet which we can just copy and paste in an IPython sesion and see if we can reproduce the problem."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334146318", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334146318", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334146318, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDE0NjMxOA==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-04T12:57:19Z", "updated_at": "2017-10-04T12:57:19Z", "author_association": "NONE", "body": "will try to create a minimal example that reproduces the problem. I need to do that to debug more efficiently.\r\n\r\nI read the FAQ entry you refer to about \"Accelerate\".. its not much help for me. What I took from it is that fork() NOT followed by exec() call is bad. I've done some googling on this and nothing so far even hints at a workaround. Can you point to some more information, more detail about what the problem is? thanks,"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334155175", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334155175", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334155175, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDE1NTE3NQ==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-04T13:29:26Z", "updated_at": "2017-10-04T13:30:53Z", "author_association": "MEMBER", "body": "Try this snippet (taken from https://github.com/numpy/numpy/issues/4776):\r\n```py\r\nimport multiprocessing as mp\r\n\r\nimport numpy as np\r\n\r\n\r\ndef compute(n):\r\n    print('Enter')\r\n    np.dot(np.eye(n), np.eye(n))\r\n    print('Exit')\r\n\r\n\r\nprint('\\nWithout multiprocessing:')\r\ncompute(1000)\r\n\r\nprint('\\nWith multiprocessing:')\r\nworkers = mp.Pool(1)\r\nresults = workers.map(compute, (1000, 1000))\r\n```\r\n\r\n* If this freezes (i.e. it does not finish within one second) that means you are using Accelerate and the freeze is a known limitation with Python multiprocessing.The work-around is to not use Accelerate. On OSX you can do that with conda which uses MKL by default. You can also use OpenBLAS using conda-forge.\r\n* If it does not freeze then you are not using Accelerate, and we would need a stand-alone snippet to investigate."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334164229", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334164229", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334164229, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDE2NDIyOQ==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-04T13:58:52Z", "updated_at": "2017-10-04T13:58:52Z", "author_association": "NONE", "body": "will try to reproduce with minimal code.\r\n\r\n```\r\nWithout multiprocessing:\r\nEnter\r\nExit\r\n\r\nWith multiprocessing:\r\nEnter\r\nExit\r\nEnter\r\nExit\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334194664", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334194664", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334194664, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDE5NDY2NA==", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-04T15:30:05Z", "updated_at": "2017-10-04T15:30:05Z", "author_association": "MEMBER", "body": "@GaelVaroquaux scikit-learn is not an app but a library in a rich ecosystem. If everybody did what we do, everything would come crashing down. That's a pretty clear signal that we need to change. And there are many environments where the opposite is true from that comment."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334503082", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334503082", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334503082, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDUwMzA4Mg==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-05T15:33:33Z", "updated_at": "2017-10-05T15:33:33Z", "author_association": "NONE", "body": "I used a ubuntu virtual instance in google cloud compute engine (bumpy, spicy, scikit etc were not the most up to date). The code ran fine. Then I installed Gensim. This updated numpy and scipy to the latest versions and installed few other things it needs (boto, bz2file and smart_open). After that the code freezes. I hope this gives a useful clue as to what causes this freeze.\r\n\r\n**after installing Gensim**\r\nnumpy (1.10.4) updated to numpy (1.13.3)\r\nscipy (0.16.1)   updated to scipy (0.19.1)\r\n\r\n**more info:**\r\nDoing some research I found that libblas, liblapack and liblapack_atlas were missing from my /usr/lib/, also I did not see the directory /usr/lib/atlas-base/. I don't know if they were there and installing gensim removed them since it updated numpy etc, but this is likely since the code worked before installing gensim. I installed them using `sudo apt-get --yes install libatlas-base-dev` and \"_update-alternatives_\" according to the advanced scikit [installation instructions](http://scikit-learn.org/stable/developers/advanced_installation.html) , but it did not help, the code still freezes with n_jobs=-1. \r\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334542075", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334542075", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334542075, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDU0MjA3NQ==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-05T17:52:36Z", "updated_at": "2017-10-05T17:52:36Z", "author_association": "NONE", "body": "I think the problem is that numpy is using OpenBlas. Will switch it to ATLAS and see what happens.\r\n```\r\n>>> import numpy as np\r\n>>> np.__config__.show()\r\nlapack_opt_info:\r\n    libraries = ['openblas']\r\n    library_dirs = ['/usr/local/lib']\r\n    define_macros = [('HAVE_CBLAS', None)]\r\n    language = c\r\nblas_opt_info:\r\n    libraries = ['openblas']\r\n    library_dirs = ['/usr/local/lib']\r\n    define_macros = [('HAVE_CBLAS', None)]\r\n    language = c\r\nopenblas_info:\r\n    libraries = ['openblas']\r\n    library_dirs = ['/usr/local/lib']\r\n    define_macros = [('HAVE_CBLAS', None)]\r\n    language = c\r\nopenblas_lapack_info:\r\n    libraries = ['openblas']\r\n    library_dirs = ['/usr/local/lib']\r\n    define_macros = [('HAVE_CBLAS', None)]\r\n    language = c\r\nblas_mkl_info:\r\n  NOT AVAILABLE\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334577305", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334577305", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334577305, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDU3NzMwNQ==", "user": {"login": "paulaceccon", "id": 4854694, "node_id": "MDQ6VXNlcjQ4NTQ2OTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4854694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulaceccon", "html_url": "https://github.com/paulaceccon", "followers_url": "https://api.github.com/users/paulaceccon/followers", "following_url": "https://api.github.com/users/paulaceccon/following{/other_user}", "gists_url": "https://api.github.com/users/paulaceccon/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulaceccon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulaceccon/subscriptions", "organizations_url": "https://api.github.com/users/paulaceccon/orgs", "repos_url": "https://api.github.com/users/paulaceccon/repos", "events_url": "https://api.github.com/users/paulaceccon/events{/privacy}", "received_events_url": "https://api.github.com/users/paulaceccon/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-05T20:06:36Z", "updated_at": "2017-10-05T20:06:36Z", "author_association": "NONE", "body": "Still the same problem. The following runs fine, unless I insert n_jobs=-1. \r\n\r\n```\r\nfrom sklearn.metrics import fbeta_score\r\n\r\ndef f2_score(y_true, y_pred):\r\n    y_true, y_pred, = np.array(y_true), np.array(y_pred)\r\n    return fbeta_score(y_true, y_pred, beta=2, average='binary')\r\n\r\nclf_rf = RandomForestClassifier()\r\ngrid_search = GridSearchCV(clf_rf, param_grid=param_grid, scoring=make_scorer(f2_score), cv=5)\r\ngrid_search.fit(X_train, y_train)  \r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334738035", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334738035", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334738035, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDczODAzNQ==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T12:15:16Z", "updated_at": "2017-10-06T12:15:45Z", "author_association": "NONE", "body": "@paulaceccon are your Numpy and Scipy installations using ATLAS or OpenBLAS?"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334751700", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334751700", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334751700, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDc1MTcwMA==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T13:17:02Z", "updated_at": "2017-10-06T13:17:02Z", "author_association": "MEMBER", "body": "It is a bit hard to follow what you have done @KaisJM. From a maintainer's point of view what we need is a fully stand-alone python snippet to see if we can reproduce. If we can reproduce, only then can we investigate and try to understand what is happening. If that only happens when you install gensim and you manage to reproduce this behaviour consistently, then we would need full instructions how to create a Python environment that has the problem vs a Python environment that doesn't have the problem.\r\n\r\nThis requires a non negligible amount of time and effort, I completely agree, but without it, I am afraid that there is not much we can do to investigate the problem you are facing."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334755572", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334755572", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334755572, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDc1NTU3Mg==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T13:31:33Z", "updated_at": "2017-10-06T13:31:33Z", "author_association": "MEMBER", "body": "> according to the advanced [installation instructions](http://scikit-learn.org/stable/developers/advanced_installation.html)\r\n\r\n@KaisJM by the way, this page is out-of-date, since nowadays wheels are available on Linux and contain their own OpenBLAS. If you install a released scikit-learn with pip you will be using OpenBLAS."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334760533", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334760533", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334760533, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDc2MDUzMw==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T13:50:35Z", "updated_at": "2017-10-06T13:51:53Z", "author_association": "NONE", "body": "@lesteve are you saying that Openblas does not cause a freeze anymore?"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334762372", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334762372", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334762372, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDc2MjM3Mg==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T13:57:20Z", "updated_at": "2017-10-06T13:57:20Z", "author_association": "NONE", "body": "@lesteve paula has posted a snippet that also has the same problem. I can see it's not complete code, but I hope it gives some clue. I can make here snippet \"complete\" and post for you. However, it is clear that the \"out-of-date\" -as you call it- instructions page may not be so out of date. The highest likelihood is that OpenBLAS is causing the fees they are talking about in that page."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334766705", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334766705", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334766705, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDc2NjcwNQ==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T14:12:51Z", "updated_at": "2017-10-06T14:12:51Z", "author_association": "MEMBER", "body": "These instructions are outdated believe me. If you read in details, it says \"but can freeze joblib/multiprocessing prior to OpenBLAS version 0.2.8-4\". I checked a recent numpy wheel and it contains OpenBLAS 0.2.8.18. The freeze they are referring to is the one in https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334155175, which you don't seem to have.\r\n\r\n> I can see it's not complete code, but I hope it gives some clue\r\n\r\nNot really no. We have reports of users that seems to indicate that freezing can still happen, none of which we have managed to reproduce AFAIK. That seems to indicate, that this problem happens in some very specific combination of factors. Unless someone that has the problem spends some time and figures out how to reproduce in a controlled way and we manage to reproduce, there is just no way we can do anything about it.\r\n\r\n> I can make here snippet \"complete\" and post for you\r\n\r\nThat would be great. That would be great if you could check if such a snippet still cause the freeze in a separate conda environment (or virtualenv depending on what you use)."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334777391", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334777391", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334777391, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDc3NzM5MQ==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T14:50:37Z", "updated_at": "2017-10-06T16:39:39Z", "author_association": "NONE", "body": "@lesteve @paulaceccon :I took Paula's excerpt code and made a complete run-able code snippet. Just paste it into a Jupyter cell and run it. Paula: I could not get this snippet to freeze. Notice that n_jobs=-1 and runs fine. Would be great if you can take a look and post a version of it that freezes. Notice that you can switch between grid_search module and model_selection module, both ran fine for me.\r\n\r\n```py\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy as np; print(\"NumPy\", np.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\n\r\nfrom sklearn.ensemble import RandomForestClassifier\r\nfrom sklearn.datasets import make_classification\r\n\r\nimport scipy.stats\r\nfrom sklearn.metrics import make_scorer\r\nfrom sklearn.grid_search import RandomizedSearchCV\r\n#from sklearn.model_selection import RandomizedSearchCV\r\n#from sklearn.model_selection import GridSearchCV\r\nfrom sklearn.metrics import fbeta_score\r\n\r\nX, y = make_classification(n_samples=1000, n_features=4,\r\n                           n_informative=2, n_redundant=0,\r\n                           random_state=0, shuffle=False)\r\n\r\nclf_rf = RandomForestClassifier(max_depth=2, random_state=0)\r\n\r\ndef f2_score(y_true, y_pred):\r\n    y_true, y_pred, = np.array(y_true), np.array(y_pred)\r\n    return fbeta_score(y_true, y_pred, beta=2, average='binary')\r\n\r\nparam_grid = {'max_depth':[2, 3, 4], 'random_state':[0, 3, 7, 17]}\r\n\r\ngrid_search = RandomizedSearchCV(clf_rf, param_grid, n_jobs=-1, scoring=make_scorer(f2_score), cv=5)\r\n\r\ngrid_search.fit(X, y)\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334814449", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334814449", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334814449, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDgxNDQ0OQ==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T17:07:53Z", "updated_at": "2017-10-06T17:07:53Z", "author_association": "MEMBER", "body": "@KaisJM I think it is more useful if you start from your freezing script and manage to simplify and post a fully stand-alone that freezes for you."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/334831018", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-334831018", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 334831018, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDgzMTAxOA==", "user": {"login": "KaisJM", "id": 32484936, "node_id": "MDQ6VXNlcjMyNDg0OTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/32484936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaisJM", "html_url": "https://github.com/KaisJM", "followers_url": "https://api.github.com/users/KaisJM/followers", "following_url": "https://api.github.com/users/KaisJM/following{/other_user}", "gists_url": "https://api.github.com/users/KaisJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaisJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaisJM/subscriptions", "organizations_url": "https://api.github.com/users/KaisJM/orgs", "repos_url": "https://api.github.com/users/KaisJM/repos", "events_url": "https://api.github.com/users/KaisJM/events{/privacy}", "received_events_url": "https://api.github.com/users/KaisJM/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T18:13:26Z", "updated_at": "2017-10-06T18:16:14Z", "author_association": "NONE", "body": "@lesteve Agreed. I created a new python2 environment like the one I had before installing Gensim. Code ran fine, NO freeze with n_jobs=-1. What's more, Numpy is using OpenBLAS and has the same config as the environment that exhibits the freeze (the one where Gensim was installed). So it seems that openblas is not the cause of this freeze.\r\n\r\n```\r\nbumpy.__config__.show()\r\nlapack_opt_info:\r\n    libraries = ['openblas']\r\n    library_dirs = ['/usr/local/lib']\r\n    define_macros = [('HAVE_CBLAS', None)]\r\n    language = c\r\nblas_opt_info:\r\n    libraries = ['openblas']\r\n    library_dirs = ['/usr/local/lib']\r\n    define_macros = [('HAVE_CBLAS', None)]\r\n    language = c\r\nopenblas_info:\r\n    libraries = ['openblas']\r\n    library_dirs = ['/usr/local/lib']\r\n    define_macros = [('HAVE_CBLAS', None)]\r\n    language = c\r\nopenblas_lapack_info:\r\n    libraries = ['openblas']\r\n    library_dirs = ['/usr/local/lib']\r\n    define_macros = [('HAVE_CBLAS', None)]\r\n    language = c\r\nblas_mkl_info:\r\n  NOT AVAILABLE\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/335337289", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-335337289", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 335337289, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTMzNzI4OQ==", "user": {"login": "paulaceccon", "id": 4854694, "node_id": "MDQ6VXNlcjQ4NTQ2OTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4854694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulaceccon", "html_url": "https://github.com/paulaceccon", "followers_url": "https://api.github.com/users/paulaceccon/followers", "following_url": "https://api.github.com/users/paulaceccon/following{/other_user}", "gists_url": "https://api.github.com/users/paulaceccon/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulaceccon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulaceccon/subscriptions", "organizations_url": "https://api.github.com/users/paulaceccon/orgs", "repos_url": "https://api.github.com/users/paulaceccon/repos", "events_url": "https://api.github.com/users/paulaceccon/events{/privacy}", "received_events_url": "https://api.github.com/users/paulaceccon/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-10T02:00:05Z", "updated_at": "2017-10-10T02:00:05Z", "author_association": "NONE", "body": "@KaisJM  I'm running the same snippet here (windows) and it freezes. \r\n\r\n```\r\nfrom sklearn.datasets import make_classification\r\nX, y = make_classification()\r\n\r\nfrom sklearn.ensemble import RandomForestClassifier\r\nclf_rf_params = {\r\n    'n_estimators': [400, 600, 800],\r\n    'min_samples_leaf' : [5, 10, 15],\r\n    'min_samples_split' : [10, 15, 20],\r\n    'criterion': ['gini', 'entropy'],\r\n    'class_weight': [{0: 0.51891309,  1: 13.71835531}]\r\n}\r\n\r\nimport numpy as np\r\ndef ginic(actual, pred):\r\n    actual = np.asarray(actual) # In case, someone passes Series or list\r\n    n = len(actual)\r\n    a_s = actual[np.argsort(pred)]\r\n    a_c = a_s.cumsum()\r\n    giniSum = a_c.sum() / a_s.sum() - (n + 1) / 2.0\r\n    return giniSum / n\r\n \r\ndef gini_normalizedc(a, p):\r\n    if p.ndim == 2:  # Required for sklearn wrapper\r\n        p = p[:,1]   # If proba array contains proba for both 0 and 1 classes, just pick class 1\r\n    return ginic(a, p) / ginic(a, a)\r\n\r\nfrom sklearn import metrics\r\ngini_sklearn = metrics.make_scorer(gini_normalizedc, True, True)\r\n\r\nfrom sklearn.model_selection import GridSearchCV\r\n\r\nclf_rf = RandomForestClassifier()\r\ngrid = GridSearchCV(clf_rf, clf_rf_params, scoring=gini_sklearn, cv=3, verbose=1, n_jobs=-1)\r\ngrid.fit(X, y)\r\n\r\nprint (grid.best_params_)\r\n```\r\n\r\nI know that it's awkward but it didn't froze when running with a _custom_ metric."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/336833145", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-336833145", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 336833145, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjgzMzE0NQ==", "user": {"login": "snovik75", "id": 26685119, "node_id": "MDQ6VXNlcjI2Njg1MTE5", "avatar_url": "https://avatars3.githubusercontent.com/u/26685119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snovik75", "html_url": "https://github.com/snovik75", "followers_url": "https://api.github.com/users/snovik75/followers", "following_url": "https://api.github.com/users/snovik75/following{/other_user}", "gists_url": "https://api.github.com/users/snovik75/gists{/gist_id}", "starred_url": "https://api.github.com/users/snovik75/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snovik75/subscriptions", "organizations_url": "https://api.github.com/users/snovik75/orgs", "repos_url": "https://api.github.com/users/snovik75/repos", "events_url": "https://api.github.com/users/snovik75/events{/privacy}", "received_events_url": "https://api.github.com/users/snovik75/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-16T09:34:15Z", "updated_at": "2017-10-16T09:34:15Z", "author_association": "NONE", "body": "I have a similar problem. I have been running the same code and simply wanted to update the model with the new month data and it stopped running. i believe sklearn got updated in the meantime to 0.19"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/337980307", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-337980307", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 337980307, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzk4MDMwNw==", "user": {"login": "thomberg1", "id": 18251629, "node_id": "MDQ6VXNlcjE4MjUxNjI5", "avatar_url": "https://avatars2.githubusercontent.com/u/18251629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomberg1", "html_url": "https://github.com/thomberg1", "followers_url": "https://api.github.com/users/thomberg1/followers", "following_url": "https://api.github.com/users/thomberg1/following{/other_user}", "gists_url": "https://api.github.com/users/thomberg1/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomberg1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomberg1/subscriptions", "organizations_url": "https://api.github.com/users/thomberg1/orgs", "repos_url": "https://api.github.com/users/thomberg1/repos", "events_url": "https://api.github.com/users/thomberg1/events{/privacy}", "received_events_url": "https://api.github.com/users/thomberg1/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-19T17:31:56Z", "updated_at": "2017-10-19T17:31:56Z", "author_association": "NONE", "body": "Running GridSearchCV or RandomizedSearchCV in a loop and  n_jobs > 1 would hang silently in Jupiter & IntelliJ:\r\n\r\n```\r\nfor trial in tqdm(range(NUM_TRIALS)):\r\n    ...\r\n    gscv = GridSearchCV(estimator=estimator, param_grid=param_grid,\r\n                          scoring=scoring, cv=cv, verbose=1, n_jobs=-1)\r\n    gscv.fit(X_data, y_data)\r\n\r\n    ...\r\n```\r\n\r\nFollowed @lesteve recommendation & checked environment & removed numpy installed with pip:\r\n\r\nDarwin-16.6.0-x86_64-i386-64bit\r\nPython 3.6.1 |Anaconda custom (x86_64)| (default, May 11 2017, 13:04:09)\r\n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.19.0\r\n\r\n\r\n$conda list | grep numpy\r\ngnumpy                   0.2                pip\r\nnumpy                     1.13.1            py36_0\r\nnumpy                     1.13.3           pip\r\nnumpydoc              0.6.0             py36_0\r\n\r\n$pip uninstall numpy\r\n\r\n$conda list | grep numpy\r\ngnumpy                   0.2                      pip\r\nnumpy                     1.13.1                  py36_0         \r\nnumpydoc              0.6.0                  py36_0\r\n\r\n$conda install numpy -f                                // most likely unnecessary\r\n\r\n$conda list | grep numpy\r\ngnumpy                   0.2                       pip\r\nnumpy                     1.13.1                   py36_0\r\nnumpydoc               0.6.0                   py36_0\r\n\r\nFixed my problem."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/337985212", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-337985212", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 337985212, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzk4NTIxMg==", "user": {"login": "thomberg1", "id": 18251629, "node_id": "MDQ6VXNlcjE4MjUxNjI5", "avatar_url": "https://avatars2.githubusercontent.com/u/18251629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomberg1", "html_url": "https://github.com/thomberg1", "followers_url": "https://api.github.com/users/thomberg1/followers", "following_url": "https://api.github.com/users/thomberg1/following{/other_user}", "gists_url": "https://api.github.com/users/thomberg1/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomberg1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomberg1/subscriptions", "organizations_url": "https://api.github.com/users/thomberg1/orgs", "repos_url": "https://api.github.com/users/thomberg1/repos", "events_url": "https://api.github.com/users/thomberg1/events{/privacy}", "received_events_url": "https://api.github.com/users/thomberg1/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-19T17:49:32Z", "updated_at": "2017-10-19T17:49:32Z", "author_association": "NONE", "body": "@paulaceccon your problem is related to  \r\n\r\n> https://stackoverflow.com/questions/36533134/cant-get-attribute-abc-on-module-main-from-abc-h-py\r\n> If you declare the pool prior to declaring the function you are trying to use in parallel it will throw this error. Reverse the order and it will no longer throw this error. \r\n\r\nThe following will run your code:\r\n```\r\nimport multiprocessing\r\n\r\nif __name__ == '__main__':\r\n    multiprocessing.set_start_method('spawn')\r\n\r\n    from external import *\r\n\r\n    from sklearn.datasets import make_classification\r\n    X, y = make_classification()\r\n\r\n    from sklearn.ensemble import RandomForestClassifier\r\n    clf_rf_params = {\r\n        'n_estimators': [400, 600, 800],\r\n        'min_samples_leaf' : [5, 10, 15],\r\n        'min_samples_split' : [10, 15, 20],\r\n        'criterion': ['gini', 'entropy'],\r\n        'class_weight': [{0: 0.51891309,  1: 13.71835531}]\r\n    }\r\n\r\n    from sklearn.model_selection import GridSearchCV\r\n\r\n    clf_rf = RandomForestClassifier()\r\n    grid = GridSearchCV(clf_rf, clf_rf_params, scoring=gini_sklearn, cv=3, verbose=1, n_jobs=-1)\r\n    grid.fit(X, y)\r\n\r\n    print (grid.best_params_)\r\n```\r\nwith external.py \r\n\r\n```\r\nimport numpy as np\r\ndef ginic(actual, pred):\r\n    actual = np.asarray(actual) # In case, someone passes Series or list\r\n    n = len(actual)\r\n    a_s = actual[np.argsort(pred)]\r\n    a_c = a_s.cumsum()\r\n    giniSum = a_c.sum() / a_s.sum() - (n + 1) / 2.0\r\n    return giniSum / n\r\n\r\ndef gini_normalizedc(a, p):\r\n    if p.ndim == 2:  # Required for sklearn wrapper\r\n        p = p[:,1]   # If proba array contains proba for both 0 and 1 classes, just pick class 1\r\n    return ginic(a, p) / ginic(a, a)\r\n\r\nfrom sklearn import metrics\r\ngini_sklearn = metrics.make_scorer(gini_normalizedc, True, True)\r\n```\r\nResults running on 8 cores\r\n\r\nFitting 3 folds for each of 54 candidates, totalling 162 fits\r\n[Parallel(n_jobs=-1)]: Done  34 tasks      | elapsed:    7.1s\r\n[Parallel(n_jobs=-1)]: Done 162 out of 162 | elapsed:   30.5s finished\r\n{'class_weight': {0: 0.51891309, 1: 13.71835531}, 'criterion': 'gini', 'min_samples_leaf': 10, 'min_samples_split': 20, 'n_estimators': 400}\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/364851642", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-364851642", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 364851642, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDg1MTY0Mg==", "user": {"login": "xtosis", "id": 33601730, "node_id": "MDQ6VXNlcjMzNjAxNzMw", "avatar_url": "https://avatars0.githubusercontent.com/u/33601730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xtosis", "html_url": "https://github.com/xtosis", "followers_url": "https://api.github.com/users/xtosis/followers", "following_url": "https://api.github.com/users/xtosis/following{/other_user}", "gists_url": "https://api.github.com/users/xtosis/gists{/gist_id}", "starred_url": "https://api.github.com/users/xtosis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xtosis/subscriptions", "organizations_url": "https://api.github.com/users/xtosis/orgs", "repos_url": "https://api.github.com/users/xtosis/repos", "events_url": "https://api.github.com/users/xtosis/events{/privacy}", "received_events_url": "https://api.github.com/users/xtosis/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-12T08:08:20Z", "updated_at": "2018-02-12T08:08:20Z", "author_association": "NONE", "body": "Issue is still there guys. I am using a custom scorer and it keeps going on forever when I set n_jobs to anything. When I don't specify n_jobs at all it works fine but otherwise it freezes."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/364876499", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-364876499", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 364876499, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDg3NjQ5OQ==", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-12T10:01:36Z", "updated_at": "2018-02-12T10:01:36Z", "author_association": "MEMBER", "body": "Can you provide a stand-alone snippet to reproduce the problem ? Please read https://stackoverflow.com/help/mcve for more details."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/373874969", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-373874969", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 373874969, "node_id": "MDEyOklzc3VlQ29tbWVudDM3Mzg3NDk2OQ==", "user": {"login": "paulaceccon", "id": 4854694, "node_id": "MDQ6VXNlcjQ4NTQ2OTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4854694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulaceccon", "html_url": "https://github.com/paulaceccon", "followers_url": "https://api.github.com/users/paulaceccon/followers", "following_url": "https://api.github.com/users/paulaceccon/following{/other_user}", "gists_url": "https://api.github.com/users/paulaceccon/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulaceccon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulaceccon/subscriptions", "organizations_url": "https://api.github.com/users/paulaceccon/orgs", "repos_url": "https://api.github.com/users/paulaceccon/repos", "events_url": "https://api.github.com/users/paulaceccon/events{/privacy}", "received_events_url": "https://api.github.com/users/paulaceccon/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-16T23:56:44Z", "updated_at": "2018-03-16T23:56:44Z", "author_association": "NONE", "body": "Still facing this problem with the same sample  code.\r\n\r\nWindows-10-10.0.15063-SP0\r\nPython 3.6.4 |Anaconda custom (64-bit)| (default, Jan 16 2018, 10:22:32) [MSC v.1900 64 bit (AMD64)]\r\nNumPy 1.14.1\r\nSciPy 1.0.0\r\nScikit-Learn 0.19.1"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/373901059", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-373901059", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 373901059, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzkwMTA1OQ==", "user": {"login": "glemaitre", "id": 7454015, "node_id": "MDQ6VXNlcjc0NTQwMTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7454015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glemaitre", "html_url": "https://github.com/glemaitre", "followers_url": "https://api.github.com/users/glemaitre/followers", "following_url": "https://api.github.com/users/glemaitre/following{/other_user}", "gists_url": "https://api.github.com/users/glemaitre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glemaitre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glemaitre/subscriptions", "organizations_url": "https://api.github.com/users/glemaitre/orgs", "repos_url": "https://api.github.com/users/glemaitre/repos", "events_url": "https://api.github.com/users/glemaitre/events{/privacy}", "received_events_url": "https://api.github.com/users/glemaitre/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-17T07:34:00Z", "updated_at": "2018-03-17T07:34:00Z", "author_association": "CONTRIBUTOR", "body": "\r\nCan you provide a stand-alone snippet to reproduce the problem ? Please read https://stackoverflow.com/help/mcve for more details."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/373962621", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-373962621", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 373962621, "node_id": "MDEyOklzc3VlQ29tbWVudDM3Mzk2MjYyMQ==", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-18T00:15:38Z", "updated_at": "2018-03-18T00:15:38Z", "author_association": "MEMBER", "body": "I suspect this is the same old multiprocessing in windows issue. see our FAQ\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/380298376", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-380298376", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 380298376, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDI5ODM3Ng==", "user": {"login": "chi18000", "id": 11224736, "node_id": "MDQ6VXNlcjExMjI0NzM2", "avatar_url": "https://avatars2.githubusercontent.com/u/11224736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chi18000", "html_url": "https://github.com/chi18000", "followers_url": "https://api.github.com/users/chi18000/followers", "following_url": "https://api.github.com/users/chi18000/following{/other_user}", "gists_url": "https://api.github.com/users/chi18000/gists{/gist_id}", "starred_url": "https://api.github.com/users/chi18000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chi18000/subscriptions", "organizations_url": "https://api.github.com/users/chi18000/orgs", "repos_url": "https://api.github.com/users/chi18000/repos", "events_url": "https://api.github.com/users/chi18000/events{/privacy}", "received_events_url": "https://api.github.com/users/chi18000/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-11T01:35:45Z", "updated_at": "2018-04-11T05:53:45Z", "author_association": "NONE", "body": "I tested the code in thomberg1's https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-337985212.\r\n\r\nOS: Windows 10 x64 10.0.16299.309\r\nPython package: WinPython-64bit-3.6.1\r\nnumpy (1.14.2)\r\nscikit-learn (0.19.1)\r\nscipy (1.0.0)\r\n\r\nIt worked fine in Jupyter Notebook and command-line.\r\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/383164515", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-383164515", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 383164515, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzE2NDUxNQ==", "user": {"login": "siideffect", "id": 10053287, "node_id": "MDQ6VXNlcjEwMDUzMjg3", "avatar_url": "https://avatars3.githubusercontent.com/u/10053287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siideffect", "html_url": "https://github.com/siideffect", "followers_url": "https://api.github.com/users/siideffect/followers", "following_url": "https://api.github.com/users/siideffect/following{/other_user}", "gists_url": "https://api.github.com/users/siideffect/gists{/gist_id}", "starred_url": "https://api.github.com/users/siideffect/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siideffect/subscriptions", "organizations_url": "https://api.github.com/users/siideffect/orgs", "repos_url": "https://api.github.com/users/siideffect/repos", "events_url": "https://api.github.com/users/siideffect/events{/privacy}", "received_events_url": "https://api.github.com/users/siideffect/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-20T17:20:46Z", "updated_at": "2018-04-20T17:21:18Z", "author_association": "NONE", "body": "HI, i m having the same issue, so i did not want to open new one which could lead to almost identical thread.\r\n\r\n-Macos\r\n-Anaconda\r\n-scikit-learn 0.19.1\r\n-scipy 1.0.1\r\n-numpy 1.14.2\r\n```\r\n# MLP for Pima Indians Dataset with grid search via sklearn\r\nfrom keras.models import Sequential\r\nfrom keras.layers import Dense\r\nfrom keras.wrappers.scikit_learn import KerasClassifier\r\nfrom sklearn.model_selection import GridSearchCV\r\nimport numpy\r\n\r\n# Function to create model, required for KerasClassifier\r\ndef create_model(optimizer='rmsprop', init='glorot_uniform'):\r\n  # create model\r\n  model = Sequential()\r\n  model.add(Dense(12, input_dim=8, kernel_initializer=init, activation='relu'))\r\n  model.add(Dense(8, kernel_initializer=init, activation='relu'))\r\n  model.add(Dense(1, kernel_initializer=init, activation='sigmoid'))\r\n  # Compile model\r\n  model.compile(loss='binary_crossentropy', optimizer=optimizer, metrics=['accuracy'])\r\n  return model\r\n\r\n# fix random seed for reproducibility\r\nseed = 7\r\nnumpy.random.seed(seed)\r\n# load pima indians dataset\r\ndataset = numpy.loadtxt(\"pima-indians-diabetes.csv\", delimiter=\",\")\r\n# split into input (X) and output (Y) variables\r\nX = dataset[:,0:8]\r\nY = dataset[:,8]\r\n\r\n\r\n# create model\r\nmodel = KerasClassifier(build_fn=create_model, verbose=0)\r\n# grid search epochs, batch size and optimizer\r\noptimizers = ['rmsprop', 'adam']\r\ninit = ['glorot_uniform', 'normal', 'uniform']\r\nepochs = [50, 100, 150]\r\nbatches = [5, 10, 20]\r\nparam_grid = dict(optimizer=optimizers, epochs=epochs, batch_size=batches, init=init)\r\ngrid = GridSearchCV(estimator=model, param_grid=param_grid)\r\ngrid_result = grid.fit(X, Y)\r\n# summarize results\r\nprint(\"Best: %f using %s\" % (grid_result.best_score_, grid_result.best_params_))\r\nmeans = grid_result.cv_results_['mean_test_score']\r\nstds = grid_result.cv_results_['std_test_score']\r\nparams = grid_result.cv_results_['params']\r\nfor mean, stdev, param in zip(means, stds, params):\r\n  print(\"%f (%f) with: %r\" % (mean, stdev, param))\r\n```\r\nCode is from a tutorial : https://machinelearningmastery.com/use-keras-deep-learning-models-scikit-learn-python/\r\nI tried changing the n_jobs parameter to 1, -1, but neither of these worked. Any hint?"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/385100562", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-385100562", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 385100562, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTEwMDU2Mg==", "user": {"login": "thomberg1", "id": 18251629, "node_id": "MDQ6VXNlcjE4MjUxNjI5", "avatar_url": "https://avatars2.githubusercontent.com/u/18251629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomberg1", "html_url": "https://github.com/thomberg1", "followers_url": "https://api.github.com/users/thomberg1/followers", "following_url": "https://api.github.com/users/thomberg1/following{/other_user}", "gists_url": "https://api.github.com/users/thomberg1/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomberg1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomberg1/subscriptions", "organizations_url": "https://api.github.com/users/thomberg1/orgs", "repos_url": "https://api.github.com/users/thomberg1/repos", "events_url": "https://api.github.com/users/thomberg1/events{/privacy}", "received_events_url": "https://api.github.com/users/thomberg1/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-27T21:36:31Z", "updated_at": "2018-04-27T21:36:31Z", "author_association": "NONE", "body": "it runs if I add the multiprocessing import and  the if statement as show below - I don't work with keras so I don't have more insight\r\n\r\n```\r\nimport multiprocessing\r\n\r\nif __name__ == '__main__':\r\n\r\n    # MLP for Pima Indians Dataset with grid search via sklearn\r\n    from keras.models import Sequential\r\n    from keras.layers import Dense\r\n    from keras.wrappers.scikit_learn import KerasClassifier\r\n    from sklearn.model_selection import GridSearchCV\r\n    import numpy\r\n\r\n    # Function to create model, required for KerasClassifier\r\n    def create_model(optimizer='rmsprop', init='glorot_uniform'):\r\n      # create model\r\n      model = Sequential()\r\n      model.add(Dense(12, input_dim=8, kernel_initializer=init, activation='relu'))\r\n      model.add(Dense(8, kernel_initializer=init, activation='relu'))\r\n      model.add(Dense(1, kernel_initializer=init, activation='sigmoid'))\r\n      # Compile model\r\n      model.compile(loss='binary_crossentropy', optimizer=optimizer, metrics=['accuracy'])\r\n      return model\r\n\r\n    # fix random seed for reproducibility\r\n    seed = 7\r\n    numpy.random.seed(seed)\r\n    # load pima indians dataset\r\n    dataset = numpy.loadtxt(\"pima-indians-diabetes.csv\", delimiter=\",\")\r\n    # split into input (X) and output (Y) variables\r\n    X = dataset[:,0:8]\r\n    Y = dataset[:,8]\r\n\r\n\r\n    # create model\r\n    model = KerasClassifier(build_fn=create_model, verbose=0)\r\n    # grid search epochs, batch size and optimizer\r\n    optimizers = ['rmsprop', 'adam']\r\n    init = ['glorot_uniform', 'normal', 'uniform']\r\n    epochs = [5]\r\n    batches = [5, 10, 20]\r\n    param_grid = dict(optimizer=optimizers, epochs=epochs, batch_size=batches, init=init)\r\n    grid = GridSearchCV(estimator=model, param_grid=param_grid, n_jobs=12, verbose=1)\r\n    grid_result = grid.fit(X, Y)\r\n    # summarize results\r\n    print(\"Best: %f using %s\" % (grid_result.best_score_, grid_result.best_params_))\r\n    means = grid_result.cv_results_['mean_test_score']\r\n    stds = grid_result.cv_results_['std_test_score']\r\n    params = grid_result.cv_results_['params']\r\n    for mean, stdev, param in zip(means, stds, params):\r\n      print(\"%f (%f) with: %r\" % (mean, stdev, param))\r\n\r\n```\r\n\r\n### Fitting 3 folds for each of 18 candidates, totalling 54 fits\r\n[Parallel(n_jobs=12)]: Done  26 tasks      | elapsed:   18.4s\r\n[Parallel(n_jobs=12)]: Done  54 out of  54 | elapsed:   23.7s finished\r\nBest: 0.675781 using {'batch_size': 5, 'epochs': 5, 'init': 'glorot_uniform', 'optimizer': 'adam'}\r\n0.621094 (0.036225) with: {'batch_size': 5, 'epochs': 5, 'init': 'glorot_uniform', 'optimizer': 'rmsprop'}\r\n0.675781 (0.006379) with: {'batch_size': 5, 'epochs': 5, 'init': 'glorot_uniform', 'optimizer': 'adam'}\r\n...\r\n0.651042 (0.025780) with: {'batch_size': 20, 'epochs': 5, 'init': 'uniform', 'optimizer': 'adam'}\r\n\r\n----------------------------------------------\r\nversion info if needed\r\nsys 3.6.4 |Anaconda custom (64-bit)| (default, Jan 16 2018, 12:04:33) \r\n[GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]\r\nnumpy 1.14.2\r\npandas 0.22.0\r\nsklearn 0.19.1\r\ntorch 0.4.0a0+9692519\r\nIPython 6.2.1\r\nkeras 2.1.5\r\n\r\ncompiler   : GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)\r\nsystem     : Darwin\r\nrelease    : 17.5.0\r\nmachine    : x86_64\r\nprocessor  : i386\r\nCPU cores  : 24\r\ninterpreter: 64bit"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/385352255", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-385352255", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 385352255, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTM1MjI1NQ==", "user": {"login": "siideffect", "id": 10053287, "node_id": "MDQ6VXNlcjEwMDUzMjg3", "avatar_url": "https://avatars3.githubusercontent.com/u/10053287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siideffect", "html_url": "https://github.com/siideffect", "followers_url": "https://api.github.com/users/siideffect/followers", "following_url": "https://api.github.com/users/siideffect/following{/other_user}", "gists_url": "https://api.github.com/users/siideffect/gists{/gist_id}", "starred_url": "https://api.github.com/users/siideffect/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siideffect/subscriptions", "organizations_url": "https://api.github.com/users/siideffect/orgs", "repos_url": "https://api.github.com/users/siideffect/repos", "events_url": "https://api.github.com/users/siideffect/events{/privacy}", "received_events_url": "https://api.github.com/users/siideffect/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-30T09:38:44Z", "updated_at": "2018-04-30T09:39:16Z", "author_association": "NONE", "body": "Thank you @thomberg1 , but adding\r\n```\r\nimport multiprocessing\r\nif __name__ == '__main__':\r\n```\r\ndid not help. The problem is still the same"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/390508869", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-390508869", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 390508869, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDUwODg2OQ==", "user": {"login": "byrony", "id": 7675717, "node_id": "MDQ6VXNlcjc2NzU3MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7675717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/byrony", "html_url": "https://github.com/byrony", "followers_url": "https://api.github.com/users/byrony/followers", "following_url": "https://api.github.com/users/byrony/following{/other_user}", "gists_url": "https://api.github.com/users/byrony/gists{/gist_id}", "starred_url": "https://api.github.com/users/byrony/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/byrony/subscriptions", "organizations_url": "https://api.github.com/users/byrony/orgs", "repos_url": "https://api.github.com/users/byrony/repos", "events_url": "https://api.github.com/users/byrony/events{/privacy}", "received_events_url": "https://api.github.com/users/byrony/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-20T20:18:26Z", "updated_at": "2018-05-20T20:18:26Z", "author_association": "NONE", "body": "Same problem on my machine when using customized scoring function in `GridsearchCV`.\r\npython 3.6.4, \r\nscikit-learn 0.19.1, \r\nwindows 10.,\r\nCPU cores: 24"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/390699346", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-390699346", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 390699346, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDY5OTM0Ng==", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-21T16:02:23Z", "updated_at": "2018-05-21T16:02:23Z", "author_association": "MEMBER", "body": "@byrony can you provide code to reproduce? did you use ``if __name__ == \"__main__\"``?"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/392184176", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-392184176", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 392184176, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjE4NDE3Ng==", "user": {"login": "Pazitos10", "id": 5199304, "node_id": "MDQ6VXNlcjUxOTkzMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5199304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pazitos10", "html_url": "https://github.com/Pazitos10", "followers_url": "https://api.github.com/users/Pazitos10/followers", "following_url": "https://api.github.com/users/Pazitos10/following{/other_user}", "gists_url": "https://api.github.com/users/Pazitos10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pazitos10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pazitos10/subscriptions", "organizations_url": "https://api.github.com/users/Pazitos10/orgs", "repos_url": "https://api.github.com/users/Pazitos10/repos", "events_url": "https://api.github.com/users/Pazitos10/events{/privacy}", "received_events_url": "https://api.github.com/users/Pazitos10/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-25T20:52:34Z", "updated_at": "2018-05-25T20:54:08Z", "author_association": "NONE", "body": "I've experienced a similar problem multiple times on my machine when using `n_jobs=-1` or `n_jobs=8` as an argument for `GridsearchCV` but using the default scorer argument.\r\n\r\n* Python 3.6.5,\r\n* scikit-learn 0.19.1,\r\n* Arch Linux,\r\n* CPU cores: 8.\r\n\r\nHere is the code I used:\r\n```python\r\nfrom sklearn.model_selection import GridSearchCV\r\nfrom sklearn.preprocessing import MinMaxScaler\r\nfrom sklearn.decomposition import PCA\r\nfrom sklearn.utils import shuffle\r\nfrom sklearn.neural_network import MLPClassifier\r\nimport matplotlib.pyplot as plt\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\n\r\ndef main():\r\n    \r\n    df = pd.read_csv('../csvs/my_data.csv', nrows=4000000)    \r\n    \r\n    X = np.array(list(map(lambda a: np.fromstring(a[1:-1] , sep=','), df['X'])))\r\n    y = np.array(list(map(lambda a: np.fromstring(a[1:-1] , sep=','), df['y'])))\r\n    \r\n    scalerX = MinMaxScaler()\r\n    scalerY = MinMaxScaler()\r\n    X = scalerX.fit_transform(X)\r\n    y = scalerY.fit_transform(y)\r\n   \r\n    grid_params = {\r\n        'beta_1': [ .1, .2, .3, .4, .5, .6, .7, .8, .9 ],\r\n        'activation': ['identity', 'logistic', 'tanh', 'relu'],\r\n        'learning_rate_init': [0.01, 0.001, 0.0001]\r\n    }\r\n    \r\n    estimator = MLPClassifier(random_state=1, \r\n                              max_iter=1000, \r\n                              verbose=10,\r\n                              early_stopping=True)\r\n    \r\n    gs = GridSearchCV(estimator, \r\n                      grid_params, \r\n                      cv=5,\r\n                      verbose=10, \r\n                      return_train_score=True,\r\n                      n_jobs=8)\r\n    \r\n    X, y = shuffle(X, y, random_state=0)\r\n    \r\n    y = y.astype(np.int16)    \r\n\r\n    gs.fit(X, y.ravel())\r\n    \r\n    print(\"GridSearchCV Report \\n\\n\")\r\n    print(\"best_estimator_ {}\".format(gs.best_estimator_))\r\n    print(\"best_score_ {}\".format(gs.best_score_))\r\n    print(\"best_params_ {}\".format(gs.best_params_))\r\n    print(\"best_index_ {}\".format(gs.best_index_))\r\n    print(\"scorer_ {}\".format(gs.scorer_))\r\n    print(\"n_splits_ {}\".format(gs.n_splits_))\r\n    \r\n    print(\"Exporting\")\r\n    results = pd.DataFrame(data=gs.cv_results_)\r\n    results.to_csv('../csvs/gs_results.csv')\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n\r\n```\r\nI know is a big dataset so I expected it would take some time to get results but then after 2 days running, it just stopped working (the script keeps executing but is not using any resource apart from RAM and swap).\r\n\r\n![captura de pantalla de 2018-05-25 17-53-11](https://user-images.githubusercontent.com/5199304/40565799-50f84b0a-6044-11e8-84c1-cd81845d0352.png)\r\n\r\n![captura de pantalla de 2018-05-25 17-54-59](https://user-images.githubusercontent.com/5199304/40565857-914405f0-6044-11e8-98ea-e981a803a360.png)\r\n\r\n\r\nThanks in advance!\r\n"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/392217495", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-392217495", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 392217495, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjIxNzQ5NQ==", "user": {"login": "byrony", "id": 7675717, "node_id": "MDQ6VXNlcjc2NzU3MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7675717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/byrony", "html_url": "https://github.com/byrony", "followers_url": "https://api.github.com/users/byrony/followers", "following_url": "https://api.github.com/users/byrony/following{/other_user}", "gists_url": "https://api.github.com/users/byrony/gists{/gist_id}", "starred_url": "https://api.github.com/users/byrony/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/byrony/subscriptions", "organizations_url": "https://api.github.com/users/byrony/orgs", "repos_url": "https://api.github.com/users/byrony/repos", "events_url": "https://api.github.com/users/byrony/events{/privacy}", "received_events_url": "https://api.github.com/users/byrony/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-26T00:04:26Z", "updated_at": "2018-05-26T00:04:42Z", "author_association": "NONE", "body": "@amueller I didn't use the `if __name__ == \"__main__\"`. Below is my code, it only works when `n_jobs=1`\r\n\r\n```\r\ndef neg_mape(true, pred):\r\n    true, pred = np.array(true)+0.01, np.array(pred)\r\n    return -1*np.mean(np.absolute((true - pred)/true))\r\n\r\nxgb_test1 = XGBRegressor(\r\n    #learning_rate =0.1,\r\n    n_estimators=150,\r\n    max_depth=3,\r\n    min_child_weight=1,\r\n    gamma=0,\r\n    subsample=0.8,\r\n    colsample_bytree=0.8,\r\n    objective= 'reg:linear',\r\n    nthread=4,\r\n    scale_pos_weight=1,\r\n    seed=123,\r\n)\r\n\r\nparam_test1 = {\r\n    'learning_rate':[0.01, 0.05, 0.1, 0.2, 0.3],\r\n}\r\n\r\ngsearch1 = GridSearchCV(estimator = xgb_test1, param_grid = param_test1, scoring=neg_mape, n_jobs=4, cv = 5)\r\n```"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/392268158", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-392268158", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 392268158, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjI2ODE1OA==", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-26T15:22:31Z", "updated_at": "2018-05-26T15:22:31Z", "author_association": "MEMBER", "body": "You're using XGBoost. I don't know what they do internally, it's very possible that's the issue. Can you try to see if adding the ``if __name__`` helps?\r\nOtherwise I don't think there's a fix for that yet."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/392268208", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-392268208", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 392268208, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjI2ODIwOA==", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-26T15:23:26Z", "updated_at": "2018-05-26T15:23:26Z", "author_association": "MEMBER", "body": "@Pazitos10 can you reproduce with synthetic data and/or smaller data? I can't reproduce without your data and it would be good to reproduce in shorter time."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/392268698", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-392268698", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 392268698, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjI2ODY5OA==", "user": {"login": "Pazitos10", "id": 5199304, "node_id": "MDQ6VXNlcjUxOTkzMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5199304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pazitos10", "html_url": "https://github.com/Pazitos10", "followers_url": "https://api.github.com/users/Pazitos10/followers", "following_url": "https://api.github.com/users/Pazitos10/following{/other_user}", "gists_url": "https://api.github.com/users/Pazitos10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pazitos10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pazitos10/subscriptions", "organizations_url": "https://api.github.com/users/Pazitos10/orgs", "repos_url": "https://api.github.com/users/Pazitos10/repos", "events_url": "https://api.github.com/users/Pazitos10/events{/privacy}", "received_events_url": "https://api.github.com/users/Pazitos10/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-26T15:31:57Z", "updated_at": "2018-05-26T15:34:01Z", "author_association": "NONE", "body": "@amueller Ok, I will run it again with 500k rows and will post the results. Thanks!"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/392271264", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-392271264", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 392271264, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjI3MTI2NA==", "user": {"login": "Pazitos10", "id": 5199304, "node_id": "MDQ6VXNlcjUxOTkzMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5199304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pazitos10", "html_url": "https://github.com/Pazitos10", "followers_url": "https://api.github.com/users/Pazitos10/followers", "following_url": "https://api.github.com/users/Pazitos10/following{/other_user}", "gists_url": "https://api.github.com/users/Pazitos10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pazitos10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pazitos10/subscriptions", "organizations_url": "https://api.github.com/users/Pazitos10/orgs", "repos_url": "https://api.github.com/users/Pazitos10/repos", "events_url": "https://api.github.com/users/Pazitos10/events{/privacy}", "received_events_url": "https://api.github.com/users/Pazitos10/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-26T16:12:25Z", "updated_at": "2018-05-26T16:12:25Z", "author_association": "NONE", "body": "@amueller, running the script with 50k rows works as expected. The script ends correctly, showing the results as follows (sorry, I meant 50k not 500k):\r\n\r\n![captura de pantalla de 2018-05-26 13-09-00](https://user-images.githubusercontent.com/5199304/40578161-ca1c8d92-60e5-11e8-953a-1b6b5a329a7d.png)\r\n\r\n![captura de pantalla de 2018-05-26 13-09-51](https://user-images.githubusercontent.com/5199304/40578174-e4750b38-60e5-11e8-894b-494cdf0540f3.png)\r\n\r\nThe problem is that I don't know if these results are going to be the best for my whole dataset. Any advice? "}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/392271347", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-392271347", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 392271347, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjI3MTM0Nw==", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-26T16:13:33Z", "updated_at": "2018-05-26T16:13:33Z", "author_association": "MEMBER", "body": "Seems like you're running out of ram. Maybe try using Keras instead, it's likely a better solution for large scale neural nets."}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/392271593", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-392271593", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 392271593, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjI3MTU5Mw==", "user": {"login": "Pazitos10", "id": 5199304, "node_id": "MDQ6VXNlcjUxOTkzMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5199304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pazitos10", "html_url": "https://github.com/Pazitos10", "followers_url": "https://api.github.com/users/Pazitos10/followers", "following_url": "https://api.github.com/users/Pazitos10/following{/other_user}", "gists_url": "https://api.github.com/users/Pazitos10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pazitos10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pazitos10/subscriptions", "organizations_url": "https://api.github.com/users/Pazitos10/orgs", "repos_url": "https://api.github.com/users/Pazitos10/repos", "events_url": "https://api.github.com/users/Pazitos10/events{/privacy}", "received_events_url": "https://api.github.com/users/Pazitos10/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-26T16:17:47Z", "updated_at": "2018-05-26T16:17:47Z", "author_association": "NONE", "body": "@amueller Oh, ok. I will try using Keras instead. Thank you again!"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/428366950", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-428366950", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 428366950, "node_id": "MDEyOklzc3VlQ29tbWVudDQyODM2Njk1MA==", "user": {"login": "PGTBoos", "id": 23136027, "node_id": "MDQ6VXNlcjIzMTM2MDI3", "avatar_url": "https://avatars1.githubusercontent.com/u/23136027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PGTBoos", "html_url": "https://github.com/PGTBoos", "followers_url": "https://api.github.com/users/PGTBoos/followers", "following_url": "https://api.github.com/users/PGTBoos/following{/other_user}", "gists_url": "https://api.github.com/users/PGTBoos/gists{/gist_id}", "starred_url": "https://api.github.com/users/PGTBoos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PGTBoos/subscriptions", "organizations_url": "https://api.github.com/users/PGTBoos/orgs", "repos_url": "https://api.github.com/users/PGTBoos/repos", "events_url": "https://api.github.com/users/PGTBoos/events{/privacy}", "received_events_url": "https://api.github.com/users/PGTBoos/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-09T21:56:42Z", "updated_at": "2018-10-09T21:56:42Z", "author_association": "NONE", "body": "> \r\n> \r\n> This has nothing to do with custom scorers. This is a [well-known feature](http://docs.python.org/2/library/multiprocessing.html#windows) of Python multiprocessing on Windows: you have to run everything that uses `n_jobs=-1` in an `if __name__ == '__main__'` block or you'll get freezes/crashes. Maybe we should document this somewhere prominently, e.g. in the README?\r\n\r\nIs it perhaps an idea for scikit, that in case of Windows to alter the function\r\nAnd use queues to feed tasks to a collection of worker processes and collect the results\r\nAs described here : https://docs.python.org/2/library/multiprocessing.html#windows\r\nand for 3.6 here : https://docs.python.org/3.6/library/multiprocessing.html#windows"}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/comments/428400670", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/2889#issuecomment-428400670", "issue_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/2889", "id": 428400670, "node_id": "MDEyOklzc3VlQ29tbWVudDQyODQwMDY3MA==", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-10T00:49:44Z", "updated_at": "2018-10-10T00:49:44Z", "author_association": "MEMBER", "body": "@PGTBoos this is fixed in scikit-learn 0.20.0"}]